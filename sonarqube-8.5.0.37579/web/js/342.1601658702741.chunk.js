(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{1004:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(660),r=n(13),o=n(667),l=n.n(o),i=n(176);function s(e){var t=e.className,n=e.tooltip,o=void 0===n||n,s=r.createElement("div",{className:a("badge badge-info",t)},Object(i.translate)("quality_profiles.built_in"));return o?r.createElement(l.a,{overlay:Object(i.translate)("quality_profiles.built_in.description")},s):s}},1017:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(13),r=n(665),o=n(810),l=function(){return(l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function s(e){var t=e.name,n=e.language,s=e.organization,c=e.children,u=i(e,["name","language","organization","children"]);return a.createElement(r.Link,l({activeClassName:"link-no-underline",to:Object(o.c)(t,n,s)},u),c)}},2194:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Te}));var a,r=n(13),o=n(176),l=n(711),i=n(38),s=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.getExportUrl=function(e){var t=this.props.profile;return""+Object(i.getBaseUrl)()+Object(l.u)(e,t)},t.prototype.render=function(){var e=this,t=this.props,n=t.exporters,a=t.profile,l=n.filter((function(e){return e.languages.includes(a.language)}));return 0===l.length?null:r.createElement("div",{className:"boxed-group quality-profile-exporters"},r.createElement("h2",null,Object(o.translate)("quality_profiles.exporters")),r.createElement("div",{className:"boxed-group-inner"},r.createElement("ul",null,l.map((function(t,n){return r.createElement("li",{className:n>0?"spacer-top":void 0,"data-key":t.key,key:t.key},r.createElement("a",{href:e.getExportUrl(t),rel:"noopener noreferrer",target:"_blank"},t.name))})))))},t}(r.PureComponent),u=n(660),p=n(661),f=n(678),m=n.n(f),d=n(679),h=n.n(d),g=n(693),y=n.n(g),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,i=o.length;l<i;l++,r++)a[r]=o[l];return a},O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1,selected:null},t.handleSelectChange=function(e){t.setState({selected:e.value})},t.handleFormSubmit=function(e){e.preventDefault();var n=t.props.profiles.find((function(e){return e.key===t.state.selected}));t.setState({loading:!0}),Object(l.g)(t.props.profile,n).then(t.props.onChange).catch((function(){t.mounted&&t.setState({loading:!1})}))},t}return v(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.profiles,t=b([{label:Object(o.translate)("none"),value:""}],m()(e,"name").map((function(e){return{label:e.isBuiltIn?e.name+" ("+Object(o.translate)("quality_profiles.built_in")+")":e.name,value:e.key}}))),n=this.state.loading||null==this.state.selected||this.state.selected===this.props.profile.parentKey;return r.createElement(h.a,{contentLabel:Object(o.translate)("quality_profiles.change_parent"),onRequestClose:this.props.onClose,size:"small"},r.createElement("form",{id:"change-profile-parent-form",onSubmit:this.handleFormSubmit},r.createElement("div",{className:"modal-head"},r.createElement("h2",null,Object(o.translate)("quality_profiles.change_parent"))),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"modal-field"},r.createElement("label",{htmlFor:"change-profile-parent"},Object(o.translate)("quality_profiles.parent")," ",r.createElement("em",{className:"mandatory"},"*")),r.createElement(y.a,{clearable:!1,id:"change-profile-parent",name:"parentKey",onChange:this.handleSelectChange,options:t,value:null!=this.state.selected?this.state.selected:this.props.profile.parentKey||""}))),r.createElement("div",{className:"modal-foot"},this.state.loading&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(p.SubmitButton,{disabled:n,id:"change-profile-parent-submit"},Object(o.translate)("change_verb")),r.createElement(p.ResetButtonLink,{id:"change-profile-parent-cancel",onClick:this.props.onClose},Object(o.translate)("cancel")))))},t}(r.PureComponent),j=n(673),E=n.n(j),_=n(1004),N=n(1017);function q(e){var t=e.className,n=e.depth,a=e.extendsBuiltIn,l=e.language,i=e.organization,s=e.profile,c=e.displayLink,u=void 0===c||c,p=e.type,f=void 0===p?"current":p,m=25*n;return r.createElement("tr",{className:t,"data-test":"quality-profiles__inheritance-"+f},r.createElement("td",null,r.createElement("div",{style:{paddingLeft:m}},u?r.createElement(N.a,{className:"text-middle",language:l,name:s.name,organization:i},s.name):r.createElement("span",{className:"text-middle"},s.name),s.isBuiltIn&&r.createElement(_.a,{className:"spacer-left"}),a&&r.createElement(E.a,{className:"spacer-left",overlay:Object(o.translate)("quality_profiles.extends_built_in")}))),r.createElement("td",null,Object(o.translateWithParameters)("quality_profile.x_active_rules",s.activeRuleCount)),r.createElement("td",null,null!=s.overridingRuleCount&&r.createElement("p",null,Object(o.translateWithParameters)("quality_profiles.x_overridden_rules",s.overridingRuleCount))))}var S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={formOpen:!1,loading:!0},t.handleChangeParentClick=function(){t.setState({formOpen:!0})},t.closeForm=function(){t.setState({formOpen:!1})},t.handleParentChange=function(){t.props.updateProfiles().then((function(){t.loadData()}),(function(){})),t.closeForm()},t}return S(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadData()},t.prototype.componentDidUpdate=function(e){e.profile.key!==this.props.profile.key&&this.loadData()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadData=function(){var e=this;Object(l.q)(this.props.profile).then((function(t){if(e.mounted){var n=t.ancestors,a=t.children;n.reverse(),e.setState({children:a,ancestors:n,profile:t.profile,loading:!1})}}),(function(){e.mounted&&e.setState({loading:!1})}))},t.prototype.render=function(){var e=this,t=this.props,n=t.profile,a=t.profiles,l=this.state.ancestors,i=!this.state.loading&&null!=l&&null!=this.state.children&&(l.length>0||this.state.children.length>0),s=null!=l&&l.some((function(e){return e.isBuiltIn}));return r.createElement("div",{className:"boxed-group quality-profile-inheritance"},n.actions&&n.actions.edit&&!n.isBuiltIn&&r.createElement("div",{className:"boxed-group-actions"},r.createElement(p.Button,{className:"pull-right js-change-parent",onClick:this.handleChangeParentClick},Object(o.translate)("quality_profiles.change_parent"))),r.createElement("header",{className:"boxed-group-header"},r.createElement("h2",null,Object(o.translate)("quality_profiles.profile_inheritance"))),r.createElement("div",{className:"boxed-group-inner"},this.state.loading?r.createElement("i",{className:"spinner"}):r.createElement("table",{className:"data zebra"},r.createElement("tbody",null,null!=l&&l.map((function(t,a){return r.createElement(q,{depth:a,key:t.key,language:n.language,organization:e.props.organization,profile:t,type:"ancestor"})})),null!=this.state.profile&&r.createElement(q,{className:u({selected:i}),depth:l?l.length:0,displayLink:!1,extendsBuiltIn:s,language:n.language,organization:this.props.organization,profile:this.state.profile}),null!=this.state.children&&this.state.children.map((function(t){return r.createElement(q,{depth:l?l.length+1:0,key:t.key,language:n.language,organization:e.props.organization,profile:t,type:"child"})}))))),this.state.formOpen&&r.createElement(O,{onChange:this.handleParentChange,onClose:this.closeForm,profile:n,profiles:a.filter((function(e){return e!==n&&e.language===n.language}))}))},t}(r.PureComponent),k=n(876),P=n.n(k),z=n(944),D=n.n(z),w=n(722),x=n.n(w),R=n(1015),T=n.n(R),A=n(725),U=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),M=function(){return(M=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},B=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleSearch=function(e){n.setState({loading:!0}),n.props.onSearch(e).then((function(e){n.mounted&&n.setState({loading:!1,searchResults:e})}),(function(){n.mounted&&n.setState({loading:!1})}))},n.handleInputChange=function(e){n.setState({query:e}),e.length>1&&n.handleSearch(e)},n.handleSearch=x()(n.handleSearch,250),n.state={loading:!1,query:"",searchResults:[]},n}return U(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.handleSearch(this.state.query)},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=1===this.state.query.length?Object(o.translateWithParameters)("select2.tooShort",2):Object(o.translate)("no_results"),t=this.state.searchResults.map((function(e){return M(M({},e),{value:L(e)})}));return r.createElement(y.a,{autoFocus:!0,className:"Select-big",clearable:!1,filterOptions:D.a,isLoading:this.state.loading,noResultsText:e,onChange:this.props.onChange,onInputChange:this.handleInputChange,optionRenderer:I,options:t,placeholder:"",searchable:!0,value:this.props.selected&&L(this.props.selected),valueRenderer:I})},t}(r.PureComponent);function F(e){return void 0!==e.login}function L(e){return F(e)?"user:"+e.login:"group:"+e.name}function I(e){return F(e)?r.createElement(r.Fragment,null,r.createElement(A.a,{hash:e.avatar,name:e.name,size:16}),r.createElement("strong",{className:"spacer-left"},e.name),r.createElement("span",{className:"note little-spacer-left"},e.login)):r.createElement(r.Fragment,null,r.createElement(T.a,{size:16}),r.createElement("strong",{className:"spacer-left"},e.name))}var W=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),J=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,i=o.length;l<i;l++,r++)a[r]=o[l];return a},G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1},t.stopSubmitting=function(){t.mounted&&t.setState({submitting:!1})},t.handleUserAdd=function(e){var n=t.props,a=n.profile,r=a.language,o=a.name,i=n.organization;Object(l.c)({language:r,login:e.login,organization:i,qualityProfile:o}).then((function(){return t.props.onUserAdd(e)}),t.stopSubmitting)},t.handleGroupAdd=function(e){var n=t.props,a=n.profile,r=a.language,o=a.name,i=n.organization;Object(l.b)({group:e.name,language:r,organization:i,qualityProfile:o}).then((function(){return t.props.onGroupAdd(e)}),t.stopSubmitting)},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state.selected;n&&(t.setState({submitting:!0}),void 0!==n.login?t.handleUserAdd(n):t.handleGroupAdd(n))},t.handleSearch=function(e){var n=t.props,a=n.organization,r=n.profile,o={language:r.language,organization:a,q:e,qualityProfile:r.name,selected:"deselected"};return Promise.all([Object(l.B)(o),Object(l.z)(o)]).then((function(e){var t=e[0],n=e[1];return J(t.users,n.groups)}))},t.handleValueChange=function(e){t.setState({selected:e})},t}return W(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=Object(o.translate)("quality_profiles.grant_permissions_to_user_or_group"),t=!this.state.selected||this.state.submitting;return r.createElement(h.a,{contentLabel:e,onRequestClose:this.props.onClose},r.createElement("header",{className:"modal-head"},r.createElement("h2",null,e)),r.createElement("form",{onSubmit:this.handleFormSubmit},r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"modal-field"},r.createElement("label",null,Object(o.translate)("quality_profiles.search_description")),r.createElement(B,{onChange:this.handleValueChange,onSearch:this.handleSearch,selected:this.state.selected}))),r.createElement("footer",{className:"modal-foot"},this.state.submitting&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(p.SubmitButton,{disabled:t},Object(o.translate)("add_verb")),r.createElement(p.ResetButtonLink,{onClick:this.props.onClose},Object(o.translate)("cancel")))))},t}(r.PureComponent),K=n(668),H=n(682),V=n.n(H),Y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={deleteModal:!1},t.handleDeleteClick=function(){t.setState({deleteModal:!0})},t.handleDeleteModalClose=function(){t.mounted&&t.setState({deleteModal:!1})},t.handleDelete=function(){var e=t.props,n=e.group,a=e.organization,r=e.profile;return Object(l.v)({group:n.name,language:r.language,organization:a,qualityProfile:r.name}).then((function(){t.handleDeleteModalClose(),t.props.onDelete(n)}))},t.renderDeleteModal=function(e){return r.createElement("div",null,r.createElement("header",{className:"modal-head"},r.createElement("h2",null,Object(o.translate)("groups.remove"))),r.createElement("div",{className:"modal-body"},r.createElement(K.FormattedMessage,{defaultMessage:Object(o.translate)("groups.remove.confirmation"),id:"groups.remove.confirmation",values:{user:r.createElement("strong",null,t.props.group.name)}})),r.createElement("footer",{className:"modal-foot"},e.submitting&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(p.Button,{className:"button-red",disabled:e.submitting,onClick:e.onSubmitClick},Object(o.translate)("remove")),r.createElement(p.ResetButtonLink,{onClick:e.onCloseClick},Object(o.translate)("cancel"))))},t}return Y(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.group;return r.createElement("div",{className:"clearfix big-spacer-bottom"},r.createElement(p.DeleteButton,{className:"pull-right spacer-top spacer-left spacer-right button-small",onClick:this.handleDeleteClick}),r.createElement(T.a,{className:"pull-left spacer-right",size:32}),r.createElement("div",{className:"overflow-hidden",style:{lineHeight:"32px"}},r.createElement("strong",null,e.name)),this.state.deleteModal&&r.createElement(V.a,{header:Object(o.translate)("group.remove"),onClose:this.handleDeleteModalClose,onSubmit:this.handleDelete},this.renderDeleteModal))},t}(r.PureComponent),X=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={deleteModal:!1},t.handleDeleteClick=function(){t.setState({deleteModal:!0})},t.handleDeleteModalClose=function(){t.mounted&&t.setState({deleteModal:!1})},t.handleDelete=function(){var e=t.props,n=e.organization,a=e.profile,r=e.user;return Object(l.w)({language:a.language,login:r.login,organization:n,qualityProfile:a.name}).then((function(){t.handleDeleteModalClose(),t.props.onDelete(r)}))},t.renderDeleteModal=function(e){return r.createElement("div",null,r.createElement("header",{className:"modal-head"},r.createElement("h2",null,Object(o.translate)("users.remove"))),r.createElement("div",{className:"modal-body"},r.createElement(K.FormattedMessage,{defaultMessage:Object(o.translate)("users.remove.confirmation"),id:"users.remove.confirmation",values:{user:r.createElement("strong",null,t.props.user.name)}})),r.createElement("footer",{className:"modal-foot"},e.submitting&&r.createElement("i",{className:"spinner spacer-right"}),r.createElement(p.SubmitButton,{className:"button-red",disabled:e.submitting,onClick:e.onSubmitClick},Object(o.translate)("remove")),r.createElement(p.ResetButtonLink,{onClick:e.onCloseClick},Object(o.translate)("cancel"))))},t}return X(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.user;return r.createElement("div",{className:"clearfix big-spacer-bottom"},r.createElement(p.DeleteButton,{className:"pull-right spacer-top spacer-left spacer-right button-small",onClick:this.handleDeleteClick}),r.createElement(A.a,{className:"pull-left spacer-right",hash:e.avatar,name:e.name,size:32}),r.createElement("div",{className:"overflow-hidden"},r.createElement("strong",null,e.name),r.createElement("div",{className:"note"},e.login)),this.state.deleteModal&&r.createElement(V.a,{header:Object(o.translate)("users.remove"),onClose:this.handleDeleteModalClose,onSubmit:this.handleDelete},this.renderDeleteModal))},t}(r.PureComponent),$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ee=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,i=o.length;l<i;l++,r++)a[r]=o[l];return a},te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={addUserForm:!1,loading:!0},t.handleAddUserButtonClick=function(){t.setState({addUserForm:!0})},t.handleAddUserFormClose=function(){t.mounted&&t.setState({addUserForm:!1})},t.handleUserAdd=function(e){t.mounted&&t.setState((function(t){return{addUserForm:!1,users:t.users&&P()(ee(t.users,[e]),(function(e){return e.login}))}}))},t.handleUserDelete=function(e){t.mounted&&t.setState((function(t){return{users:t.users&&t.users.filter((function(t){return t!==e}))}}))},t.handleGroupAdd=function(e){t.mounted&&t.setState((function(t){return{addUserForm:!1,groups:t.groups&&P()(ee(t.groups,[e]),(function(e){return e.name}))}}))},t.handleGroupDelete=function(e){t.mounted&&t.setState((function(t){return{groups:t.groups&&t.groups.filter((function(t){return t!==e}))}}))},t}return $(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchUsersAndGroups()},t.prototype.componentDidUpdate=function(e){e.organization===this.props.organization&&e.profile.key===this.props.profile.key||this.fetchUsersAndGroups()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.fetchUsersAndGroups=function(){var e=this;this.setState({loading:!0});var t=this.props,n=t.organization,a=t.profile,r={language:a.language,organization:n,qualityProfile:a.name,selected:"selected"};Promise.all([Object(l.B)(r),Object(l.z)(r)]).then((function(t){var n=t[0],a=t[1];e.mounted&&e.setState({groups:a.groups,loading:!1,users:n.users})}),(function(){e.mounted&&e.setState({loading:!1})}))},t.prototype.render=function(){var e=this;return r.createElement("div",{className:"boxed-group"},r.createElement("h2",null,Object(o.translate)("permissions.page")),r.createElement("div",{className:"boxed-group-inner"},r.createElement("p",{className:"note"},Object(o.translate)("quality_profiles.default_permissions")),this.state.loading?r.createElement("div",{className:"big-spacer-top"},r.createElement("i",{className:"spinner"})):r.createElement("div",{className:"big-spacer-top"},this.state.users&&m()(this.state.users,"name").map((function(t){return r.createElement(Z,{key:t.login,onDelete:e.handleUserDelete,organization:e.props.organization,profile:e.props.profile,user:t})})),this.state.groups&&m()(this.state.groups,"name").map((function(t){return r.createElement(Q,{group:t,key:t.name,onDelete:e.handleGroupDelete,organization:e.props.organization,profile:e.props.profile})})),r.createElement("div",{className:"text-right"},r.createElement(p.Button,{onClick:this.handleAddUserButtonClick},Object(o.translate)("quality_profiles.grant_permissions_to_more_users"))))),this.state.addUserForm&&r.createElement(G,{onClose:this.handleAddUserFormClose,onGroupAdd:this.handleGroupAdd,onUserAdd:this.handleUserAdd,organization:this.props.organization,profile:this.props.profile}))},t}(r.PureComponent),ne=n(665),ae=n(696),re=n.n(ae),oe=n(692),le=n.n(oe),ie=n(670),se=n(718),ce=n.n(se),ue=n(853),pe=n.n(ue),fe=n(855),me=n.n(fe),de=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),he=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,i=o.length;l<i;l++,r++)a[r]=o[l];return a},ge=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.fetchProjects=function(e){return Object(l.r)({key:n.props.profile.key,organization:n.props.organization,p:e.page,ps:e.pageSize,q:""!==e.query?e.query:void 0,selected:e.filter}).then((function(t){n.mounted&&n.setState((function(n){var a=null!=e.page&&e.page>1,r=a?he(n.projects,t.results):t.results,o=t.results.filter((function(e){return e.selected})).map((function(e){return e.key})),l=a?he(n.selectedProjects,o):o;return{lastSearchParams:e,needToReload:!1,projects:r,projectsTotalCount:t.paging.total,selectedProjects:l}}))}))},n.handleSelect=function(e){return Object(l.d)(n.props.profile,e).then((function(){n.mounted&&n.setState((function(t){return{needToReload:!0,selectedProjects:he(t.selectedProjects,[e])}}))}))},n.handleUnselect=function(e){return Object(l.m)(n.props.profile,e).then((function(){n.mounted&&n.setState((function(t){return{needToReload:!0,selectedProjects:ce()(t.selectedProjects,e)}}))}))},n.handleCloseClick=function(e){e.preventDefault(),n.props.onClose()},n.renderElement=function(e){var t=pe()(n.state.projects,{key:e});return r.createElement("div",{className:"select-list-list-item"},void 0===t?e:r.createElement(r.Fragment,null,t.name,r.createElement("br",null),r.createElement("span",{className:"note"},t.key)))},n.state={needToReload:!1,projects:[],selectedProjects:[]},n}return de(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=Object(o.translate)("projects");return r.createElement(h.a,{contentLabel:e,onRequestClose:this.props.onClose},r.createElement("div",{className:"modal-head"},r.createElement("h2",null,e)),r.createElement("div",{className:"modal-body modal-container",id:"profile-projects"},r.createElement(me.a,{allowBulkSelection:!0,elements:this.state.projects.map((function(e){return e.key})),elementsTotalCount:this.state.projectsTotalCount,labelAll:Object(o.translate)("quality_gates.projects.all"),labelSelected:Object(o.translate)("quality_gates.projects.with"),labelUnselected:Object(o.translate)("quality_gates.projects.without"),needToReload:this.state.needToReload&&this.state.lastSearchParams&&this.state.lastSearchParams.filter!==fe.SelectListFilter.All,onSearch:this.fetchProjects,onSelect:this.handleSelect,onUnselect:this.handleUnselect,renderElement:this.renderElement,selectedElements:this.state.selectedProjects,withPaging:!0})),r.createElement("div",{className:"modal-foot"},r.createElement("a",{href:"#",onClick:this.handleCloseClick},Object(o.translate)("close"))))},t}(r.PureComponent),ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ve=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,i=o.length;l<i;l++,r++)a[r]=o[l];return a},be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={formOpen:!1,loading:!0,loadingMore:!1,page:1,projects:[],total:0},t.stopLoading=function(){t.mounted&&t.setState({loading:!1})},t.loadMore=function(){t.setState({loadingMore:!0});var e={key:t.props.profile.key,page:t.state.page+1};Object(l.r)(e).then((function(e){var n=e.paging,a=e.results;t.mounted&&t.setState((function(e){return{projects:ve(e.projects,a),total:n.total,loadingMore:!1}}))}),t.stopLoading)},t.handleChangeClick=function(){t.setState({formOpen:!0})},t.closeForm=function(){t.setState({formOpen:!1}),t.loadProjects()},t}return ye(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadProjects()},t.prototype.componentDidUpdate=function(e){e.profile.key!==this.props.profile.key&&this.loadProjects()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadProjects=function(){var e=this;if(this.props.profile.isDefault)this.setState({loading:!1,projects:[]});else{this.setState({loading:!0});var t={key:this.props.profile.key,page:this.state.page};Object(l.r)(t).then((function(t){var n=t.paging,a=t.results;e.mounted&&e.setState({projects:a,total:n.total,loading:!1})}),this.stopLoading)}},t.prototype.renderDefault=function(){return r.createElement("div",null,r.createElement("span",{className:"badge spacer-right"},Object(o.translate)("default")),Object(o.translate)("quality_profiles.projects_for_default"))},t.prototype.renderProjects=function(){if(this.state.loading)return r.createElement("i",{className:"spinner"});var e=this.state.projects;return 0===e.length?r.createElement("div",null,Object(o.translate)("quality_profiles.no_projects_associated_to_profile")):r.createElement(r.Fragment,null,r.createElement("ul",null,e.map((function(e){return r.createElement("li",{className:"spacer-top js-profile-project","data-key":e.key,key:e.key},r.createElement(ne.Link,{className:"link-with-icon",to:Object(ie.u)(e.key)},r.createElement(le.a,{qualifier:"TRK"})," ",r.createElement("span",null,e.name)))}))),r.createElement(re.a,{count:e.length,loadMore:this.loadMore,ready:!this.state.loadingMore,total:this.state.total}))},t.prototype.render=function(){var e=this.props.profile;return r.createElement("div",{className:"boxed-group quality-profile-projects"},e.actions&&e.actions.associateProjects&&r.createElement("div",{className:"boxed-group-actions"},r.createElement(p.Button,{className:"js-change-projects",onClick:this.handleChangeClick},Object(o.translate)("quality_profiles.change_projects"))),r.createElement("header",{className:"boxed-group-header"},r.createElement("h2",null,Object(o.translate)("projects"))),r.createElement("div",{className:"boxed-group-inner"},e.isDefault?this.renderDefault():this.renderProjects()),this.state.formOpen&&r.createElement(ge,{onClose:this.closeForm,organization:this.props.organization,profile:e}))},t}(r.PureComponent),Oe=n(836),je=n.n(Oe),Ee=n(667),_e=n.n(Ee),Ne=n(807);function qe(e){return r.createElement("div",{className:"quality-profile-rules-deprecated clearfix"},r.createElement("span",{className:"pull-left"},r.createElement("span",{className:"text-middle"},Object(o.translate)("quality_profiles.deprecated_rules")),r.createElement(E.a,{className:"spacer-left",overlay:Object(o.translate)("quality_profiles.deprecated_rules_description")})),r.createElement(ne.Link,{className:"pull-right",to:Object(ie.l)({qprofile:e.profile},e.organization)},e.activeDeprecatedRules))}var Se=n(720),Ce=n.n(Se),ke=n(669);function Pe(e){var t=Object(ie.A)({qprofile:e.qprofile,activation:"true",types:e.type},e.organization),n=Object(ie.A)({qprofile:e.qprofile,activation:"false",types:e.type},e.organization),a=null;return null!=e.count&&null!=e.total&&(a=e.total-e.count),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",null,r.createElement(Ce.a,{className:"little-spacer-right",query:e.type}),Object(o.translate)("issue.type",e.type,"plural"))),r.createElement("td",{className:"thin nowrap text-right"},null!=e.count&&r.createElement(ne.Link,{to:t},Object(ke.formatMeasure)(e.count,"SHORT_INT",null))),r.createElement("td",{className:"thin nowrap text-right"},null!=a&&(a>0?r.createElement(ne.Link,{className:"small text-muted",to:n},Object(ke.formatMeasure)(a,"SHORT_INT",null)):r.createElement("span",{className:"note text-muted"},"0"))))}function ze(e){var t=Object(ie.A)({qprofile:e.qprofile,activation:"true"},e.organization),n=Object(ie.A)({qprofile:e.qprofile,activation:"false"},e.organization),a=null;return null!=e.count&&null!=e.total&&(a=e.total-e.count),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,Object(o.translate)("total"))),r.createElement("td",{className:"thin nowrap text-right"},null!=e.count&&r.createElement(ne.Link,{to:t},r.createElement("strong",null,Object(ke.formatMeasure)(e.count,"SHORT_INT",null)))),r.createElement("td",{className:"thin nowrap text-right"},null!=a&&(a>0?r.createElement(ne.Link,{className:"small text-muted",to:n},r.createElement("strong",null,Object(ke.formatMeasure)(a,"SHORT_INT",null))):r.createElement("span",{className:"note text-muted"},"0"))))}function De(e){var t=Object(ie.A)({qprofile:e.profile,activation:"false",compareToProfile:e.sonarway,languages:e.language},e.organization);return r.createElement("div",{className:"quality-profile-rules-sonarway-missing clearfix"},r.createElement("span",{className:"pull-left"},r.createElement("span",{className:"text-middle"},Object(o.translate)("quality_profiles.sonarway_missing_rules")),r.createElement(E.a,{className:"spacer-left",overlay:Object(o.translate)("quality_profiles.sonarway_missing_rules_description")})),r.createElement(ne.Link,{className:"pull-right","data-test":"rules",to:t},e.sonarWayMissingRules))}var we=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),xe=["BUG","VULNERABILITY","CODE_SMELL","SECURITY_HOTSPOT"],Re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={activatedTotal:null,activatedByType:je()(xe.map((function(e){return{val:e,count:null}})),"val"),allByType:je()(xe.map((function(e){return{val:e,count:null}})),"val"),compareToSonarWay:null,total:null},t}return we(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadRules()},t.prototype.componentDidUpdate=function(e){e.profile.key!==this.props.profile.key&&this.loadRules()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadProfile=function(){return this.props.profile.isBuiltIn?Promise.resolve(null):Object(l.s)({compareToSonarWay:!0,profile:this.props.profile})},t.prototype.loadAllRules=function(){return Object(Ne.f)({languages:this.props.profile.language,facets:"types",organization:this.props.organization||void 0,ps:1})},t.prototype.loadActivatedRules=function(){return Object(Ne.f)({activation:"true",facets:"types",organization:this.props.organization||void 0,ps:1,qprofile:this.props.profile.key})},t.prototype.loadRules=function(){var e=this;Promise.all([this.loadAllRules(),this.loadActivatedRules(),this.loadProfile()]).then((function(t){if(e.mounted){var n=t[0],a=t[1],r=t[2];e.setState({activatedTotal:a.total,allByType:je()(Object(Ne.g)(n,"types"),"val"),activatedByType:je()(Object(Ne.g)(a,"types"),"val"),compareToSonarWay:r&&r.compareToSonarWay,total:n.total})}}))},t.prototype.getRulesCountForType=function(e){return this.state.activatedByType&&this.state.activatedByType[e]?this.state.activatedByType[e].count:null},t.prototype.getRulesTotalForType=function(e){return this.state.allByType&&this.state.allByType[e]?this.state.allByType[e].count:null},t.prototype.render=function(){var e=this,t=this.props,n=t.organization,a=t.profile,l=this.state.compareToSonarWay,i=Object(ie.A)({qprofile:a.key,activation:"false"},n),s=a.actions,c=void 0===s?{}:s;return r.createElement("div",{className:"boxed-group quality-profile-rules"},r.createElement("div",{className:"quality-profile-rules-distribution"},r.createElement("table",{className:"data condensed"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement("h2",null,Object(o.translate)("rules"))),r.createElement("th",null,Object(o.translate)("active")),r.createElement("th",null,Object(o.translate)("inactive")))),r.createElement("tbody",null,r.createElement(ze,{count:this.state.activatedTotal,organization:n,qprofile:a.key,total:this.state.total}),xe.map((function(t){return r.createElement(Pe,{count:e.getRulesCountForType(t),key:t,organization:n,qprofile:a.key,total:e.getRulesTotalForType(t),type:t})})))),c.edit&&!a.isBuiltIn&&r.createElement("div",{className:"text-right big-spacer-top"},r.createElement(ne.Link,{className:"button js-activate-rules",to:i},Object(o.translate)("quality_profiles.activate_more"))),c.copy&&a.isBuiltIn&&r.createElement("div",{className:"text-right big-spacer-top"},r.createElement(_e.a,{overlay:Object(o.translate)("quality_profiles.activate_more.help.built_in")},r.createElement(p.Button,{className:"disabled js-activate-rules"},Object(o.translate)("quality_profiles.activate_more"))))),a.activeDeprecatedRuleCount>0&&r.createElement(qe,{activeDeprecatedRules:a.activeDeprecatedRuleCount,organization:n,profile:a.key}),null!=l&&l.missingRuleCount>0&&r.createElement(De,{language:a.language,organization:n,profile:a.key,sonarWayMissingRules:l.missingRuleCount,sonarway:l.profile}))},t}(r.PureComponent);function Te(e){var t=e.organization,n=e.profile;return r.createElement("div",null,r.createElement("div",{className:"quality-profile-grid"},r.createElement("div",{className:"quality-profile-grid-left"},r.createElement(Re,{organization:t,profile:n}),r.createElement(c,{exporters:e.exporters,organization:t,profile:n}),n.actions&&n.actions.edit&&!n.isBuiltIn&&r.createElement(te,{organization:t||void 0,profile:n})),r.createElement("div",{className:"quality-profile-grid-right"},r.createElement(C,{organization:t,profile:n,profiles:e.profiles,updateProfiles:e.updateProfiles}),r.createElement(be,{organization:t,profile:n}))))}},711:function(e,t,n){"use strict";n.d(t,"A",(function(){return c})),n.d(t,"s",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"y",(function(){return f})),n.d(t,"r",(function(){return m})),n.d(t,"q",(function(){return d})),n.d(t,"C",(function(){return h})),n.d(t,"x",(function(){return g})),n.d(t,"i",(function(){return y})),n.d(t,"l",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"t",(function(){return O})),n.d(t,"u",(function(){return j})),n.d(t,"o",(function(){return E})),n.d(t,"n",(function(){return _})),n.d(t,"p",(function(){return N})),n.d(t,"h",(function(){return q})),n.d(t,"d",(function(){return S})),n.d(t,"m",(function(){return C})),n.d(t,"B",(function(){return k})),n.d(t,"z",(function(){return P})),n.d(t,"c",(function(){return z})),n.d(t,"w",(function(){return D})),n.d(t,"b",(function(){return w})),n.d(t,"v",(function(){return x})),n.d(t,"e",(function(){return R})),n.d(t,"f",(function(){return T})),n.d(t,"a",(function(){return A})),n.d(t,"k",(function(){return U}));var a=n(703),r=n.n(a),o=n(812),l=n(49),i=n(675),s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function c(e){return Object(l.getJSON)("/api/qualityprofiles/search",e).catch(i.a)}function u(e){var t=e.compareToSonarWay,n=e.profile.key;return Object(l.getJSON)("/api/qualityprofiles/show",{compareToSonarWay:t,key:n})}function p(e){return Object(l.postJSON)("/api/qualityprofiles/create",e).catch(i.a)}function f(e){return Object(l.postJSON)("/api/qualityprofiles/restore",e).catch(i.a)}function m(e){return Object(l.getJSON)("/api/qualityprofiles/projects",e).catch(i.a)}function d(e){var t=e.language,n=e.name,a=e.organization;return Object(l.getJSON)("/api/qualityprofiles/inheritance",{language:t,qualityProfile:n,organization:a}).catch(i.a)}function h(e){var t=e.language,n=e.name,a=e.organization;return Object(l.post)("/api/qualityprofiles/set_default",{language:t,qualityProfile:n,organization:a})}function g(e,t){return Object(l.post)("/api/qualityprofiles/rename",{key:e,name:t}).catch(i.a)}function y(e,t){return Object(l.postJSON)("/api/qualityprofiles/copy",{fromKey:e,toName:t}).catch(i.a)}function v(e){var t=e.language,n=e.name,a=e.organization;return Object(l.post)("/api/qualityprofiles/delete",{language:t,qualityProfile:n,organization:a}).catch(i.a)}function b(e,t){var n=e.language,a=e.name,r=e.organization;return Object(l.post)("/api/qualityprofiles/change_parent",{language:n,qualityProfile:a,organization:r,parentQualityProfile:t?t.name:void 0}).catch(i.a)}function O(e){var t=e.language,n=e.name,a=e.organization;return"/api/qualityprofiles/backup?"+Object.entries({language:t,qualityProfile:n,organization:a}).map((function(e){var t=e[0],n=e[1];return t+"="+encodeURIComponent(n)})).join("&")}function j(e,t){var n=e.key,a=t.language,r=t.name,o=t.organization;return"/api/qualityprofiles/export?"+Object.entries({exporterKey:n,language:a,qualityProfile:r,organization:o}).map((function(e){var t=e[0],n=e[1];return t+"="+encodeURIComponent(n)})).join("&")}function E(){return Object(l.getJSON)("/api/qualityprofiles/importers").then((function(e){return e.importers}),i.a)}function _(){return Object(l.getJSON)("/api/qualityprofiles/exporters").then((function(e){return e.exporters}))}function N(e,t,n,a){var r=n.language,o=n.name,i=n.organization;return Object(l.getJSON)("/api/qualityprofiles/changelog",{since:e,to:t,language:r,qualityProfile:o,organization:i,p:a})}function q(e,t){return Object(l.getJSON)("/api/qualityprofiles/compare",{leftKey:e,rightKey:t})}function S(e,t){var n=e.language,a=e.name,r=e.organization;return Object(l.post)("/api/qualityprofiles/add_project",{language:n,qualityProfile:a,organization:r,project:t}).catch(i.a)}function C(e,t){var n=e.language,a=e.name,r=e.organization;return Object(l.post)("/api/qualityprofiles/remove_project",{language:n,qualityProfile:a,organization:r,project:t}).catch(i.a)}function k(e){return Object(l.getJSON)("/api/qualityprofiles/search_users",e).catch(i.a)}function P(e){return Object(l.getJSON)("/api/qualityprofiles/search_groups",e).catch(i.a)}function z(e){return Object(l.post)("/api/qualityprofiles/add_user",e).catch(i.a)}function D(e){return Object(l.post)("/api/qualityprofiles/remove_user",e).catch(i.a)}function w(e){return Object(l.post)("/api/qualityprofiles/add_group",e).catch(i.a)}function x(e){return Object(l.post)("/api/qualityprofiles/remove_group",e).catch(i.a)}function R(e){return Object(l.postJSON)("/api/qualityprofiles/activate_rules",e)}function T(e){return Object(l.postJSON)("/api/qualityprofiles/deactivate_rules",e)}function A(e){var t=e.params&&r()(e.params,(function(e,t){return t+"="+Object(o.csvEscape)(e)})).join(";");return Object(l.post)("/api/qualityprofiles/activate_rule",s(s({},e),{params:t})).catch(i.a)}function U(e){return Object(l.post)("/api/qualityprofiles/deactivate_rule",e).catch(i.a)}}}]);
//# sourceMappingURL=342.1601658702741.chunk.js.map