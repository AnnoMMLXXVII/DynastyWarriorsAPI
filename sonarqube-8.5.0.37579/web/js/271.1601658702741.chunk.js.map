{"version":3,"sources":["webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./node_modules/lodash/intersection.js","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./node_modules/sonar-ui-common/components/icons/ExpandSnippetIcon.js","webpack:///./src/main/js/components/common/LocationIndex.css?e012","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8760","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?a142","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./node_modules/lodash/_baseIntersection.js","webpack:///./node_modules/lodash/_castArrayLikeObject.js","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/utils.ts","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?94e1","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.tsx","webpack:///./node_modules/lodash/times.js","webpack:///./src/main/js/components/SourceViewer/components/Line.css?69c4","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css?ff37","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css","webpack:///./src/main/js/apps/security-hotspots/styles.css?978b","webpack:///./node_modules/sonar-ui-common/components/icons/ChevronUpIcon.js","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css?98a3","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css?fed6","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css?94be","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css?dec8","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css","webpack:///./src/main/js/apps/security-hotspots/styles.css","webpack:///./src/main/js/api/security-hotspots.ts","webpack:///./src/main/js/types/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/EmptyHotspotsPage.tsx","webpack:///./src/main/js/apps/security-hotspots/components/FilterBar.tsx","webpack:///./src/main/js/apps/security-hotspots/utils.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotListItem.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCategory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/Assignee.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCommentPopup.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistoryAndComments.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerTabs.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusDescription.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsAppRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsApp.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.js","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css?2512","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css","webpack:///./node_modules/sonar-ui-common/components/icons/QualifierIcon.js","webpack:///./node_modules/sonar-ui-common/components/controls/ListFooter.js","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./node_modules/sonar-ui-common/components/ui/Level.js","webpack:///./node_modules/lodash/groupBy.js","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.js","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./node_modules/sonar-ui-common/components/icons/ChevronDownIcon.js","webpack:///./node_modules/sonar-ui-common/components/ui/Level.css?4f58","webpack:///./node_modules/sonar-ui-common/components/ui/Level.css","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.js","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css?35f6","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.js","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.css?01af","webpack:///./node_modules/sonar-ui-common/helpers/pages.js","webpack:///./node_modules/sonar-ui-common/components/controls/Radio.css","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./node_modules/lodash/range.js","webpack:///./node_modules/lodash/_createRange.js","webpack:///./node_modules/lodash/_baseRange.js","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.css?a2dd","webpack:///./node_modules/sonar-ui-common/components/ui/Rating.css","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./node_modules/lodash/flatMap.js","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./node_modules/sonar-ui-common/components/controls/BoxedTabs.js","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts"],"names":["SourceViewerContext","branchLike","file","arrayMap","baseIntersection","baseRest","castArrayLikeObject","intersection","arrays","mapped","length","module","exports","splitByTokens","code","rootClassName","container","document","createElement","tokens","innerHTML","forEach","call","childNodes","node","nodeType","fullClassName","className","innerTokens","concat","nodeValue","push","markers","text","highlightSymbol","symbol","symbolRegExp","RegExp","map","token","test","part","str","from","to","acc","substr","highlightIssueLocations","issueLocations","location","nextTokens","markerAdded","line","startLine","s1","e1","s2","e2","x","Math","max","min","p1","p2","p3","newClassName","indexOf","index","slice","__assign","this","Object","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","apply","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","value","React","Icon_1","default","_a","_b","fill","iconProps","fillRule","d","stroke","strokeWidth","transform","api","content","__esModule","options","exported","locals","___CSS_LOADER_API_IMPORT___","LocationMessage","props","selected","children","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","nativeMin","iteratee","comparator","includes","othLength","othIndex","caches","Array","maxLength","Infinity","result","array","undefined","seen","outer","computed","cache","isArrayLikeObject","MERGE_DISTANCE","LINES_BELOW_ISSUE","EXPAND_BY_LINES","collision","startA","endA","startB","getPrimaryLocation","issue","component","textRange","endLine","endOffset","startOffset","createSnippets","params","locations","hasSecondaryLocations","secondaryLocations","ranges","reduce","snippets","loc","firstCollision","startIndex","endIndex","locationEnd","issueEndLine","addLinesBellow","filter","snippet","start","end","keep","sort","a","b","linesForSnippets","componentLines","lines","groupLocationsByComponent","components","currentGroup","currentComponent","groups","addGroup","key","measures","path","project","projectName","q","uuid","sources","every","expandSnippet","direction","snippetIndex","snippetToExpand","find","Error","toDelete","inSnippet","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","then","response","users","rules","handleSelect","event","preventDefault","onSelect","item","handleHover","onHover","renderLink","active","href","onClick","onFocus","onMouseOver","render","overlay","title","placement","attachShortcuts","previousKeyScope","previousFilter","currentKeyScope","tagName","isInput","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","renderChild","child","type","currentItem","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","hasChildren","count","searchMembers","query","organization","projectOrganization","ps","handleSearchResult","searchUsers","activeUsers","currentUser","login","handleSearchChange","defaultUsersArray","name","Dropdown","noPadding","autoFocus","minLength","placeholder","user","Avatar","hash","avatar","size","style","marginLeft","withCurrentUser","toggleAssign","open","togglePopup","handleClose","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","closeOnEscape","onRequestClose","isOpen","onAssign","handleCommentChange","textComment","target","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","addComment","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","mounted","searchResult","onSearch","selectedTags","tags","tag","setTags","onUnselect","availableTags","BottomRight","TagsSelector","listSize","toggleSetTags","join","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","description","setTransition","toggleSetTransition","hasTransitions","StatusHelper","resolution","status","TYPES","SetTypePopup","toggleSetType","setType","canSetType","baseFontColor","property","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","htmlText","date","createdAt","updatable","changelog","loadChangelog","creationDate","userName","isUserActive","diffs","diff","IssueChangelogDiff","toggleChangelog","handleClick","IssueMessage","engine","engineName","manualVulnerability","message","ruleKey","ruleEngine","onOpenRule","onFilter","subProject","ruleName","qualifier","subProjectName","componentQualifier","componentLongName","handleFilter","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","flows","sum","locationsBadge","LocationIndex","displayLocations","displayLocationsCount","issueUrl","issues","types","Consumer","externalRulesRepoNames","openRule","externalRuleEngine","rule","displayLocationsLink","handleCheck","onCheck","isClickable","editComment","deleteComment","hasCheckbox","issueClass","hotspot","role","tabIndex","comments","checked","toUpperCase","parentElement","onPopupToggle","handleAssignement","bindShortcuts","componentWillUpdate","nextProps","unbindShortcuts","defaultProps","SourceViewerHeaderSlim","expandable","displayProjectName","linkToProject","loading","onExpand","sourceViewerFile","projectNameLabel","Project","SubProject","copyValue","files","resolved","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","symbols","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","LineIssuesList","issuePopup","Issue","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","handleSymbolClick","keys","currentTarget","match","onSymbolClick","attachEvents","activeMarkerNode","scroll","componentWillReceiveProps","detachEvents","codeNode","querySelectorAll","addEventListener","renderMarker","leading","onLocationSelect","ref","onIssueSelect","padding","secondaryIssueLocations","showIssues","highlight","renderedTokens","leadingMarker","displayLocationMarkers","marker","paddingBottom","filteredSelectedIssues","coverageStatus","conditions","coveredConditions","getStatusTooltip","blocksLoaded","duplicated","dropdownOpen","setDropdownOpen","RightTop","renderDuplicationPopup","issuesOpen","hasIssues","tooltipContent","mostImportantIssue","blur","rel","lineNumber","overlayPlacement","hasAuthor","scmAuthor","hasDate","scmDate","scmRevision","previousLine","hasPopup","cell","changed","isSCMChanged","ariaLabel","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","displayAllIssues","displayCoverage","displayDuplications","displayIssues","displaySCM","duplications","duplicationsCount","highlighted","last","verticalBuffer","isNew","bottomPadding","Boolean","loadDuplications","doScroll","element","parent","snippetNodeRef","current","offset","getBoundingClientRect","width","leftOffset","rightOffset","scrollToLastExpandedRow","snippetNode","lastRow","expandBlock","renderLine","duplicationsByLine","lineDuplications","isSinkLine","noop","handleCloseIssues","handleOpenIssues","openIssuesByLine","issuesByLine","lastSnippetOfLastGroup","locationsByLine","lastLine","parseInt","bottomLine","issueLine","lowestVisibleIssue","k","l","assignSecurityHotspot","hotspotKey","data","catch","throwGlobalError","RiskExposure","HotspotStatus","HotspotResolution","HotspotStatusFilter","HotspotStatusOption","ReviewHistoryType","EmptyHotspotsPage","translationRoot","filtered","isStaticListOfHotspots","alt","height","src","pathname","AssigneeFilterOption","statusOptions","TO_REVIEW","label","FIXED","SAFE","periodOptions","assigneeFilterOptions","ME","ALL","filters","hotspotsReviewedMeasure","loadingMeasure","onBranch","isProject","id","onChangeFilters","assignedToMe","clearable","option","searchable","sinceLeakPeriod","CoverageRating","Measure","metricKey","metricType","RISK_EXPOSURE_LEVELS","HIGH","MEDIUM","LOW","groupByCategory","hotspots","securityCategories","h","getCategoryTitle","STATUS_AND_RESOLUTION_TO_STATUS_OPTION","REVIEWED","getStatusOptionFromStatusAndResolution","STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP","HotspotListItem","HotspotCategory","categoryKey","expanded","selectedHotspot","isLastAndIncomplete","risk","vulnerabilityProbability","securityCategory","onToggleExpand","onHotspotClick","groupHotspots","risks","categories","handleToggleCategory","expandedCategories","groupedHotspots","hotspotsTotal","loadingMore","statusFilter","riskGroup","riskGroupIndex","isLastRiskGroup","cat","categoryIndex","isLastCategory","loadMore","onLoadMore","total","AssigneeSelectionRenderer","suggestedUsers","BottomLeft","suggestion","handleSearch","handleNoSearch","handleActualSearch","allowCurrentUserSelection","loggedInUser","handleKeyDown","Enter","selectHighlighted","UpArrow","highlightPrevious","DownArrow","highlightNext","getCurrentIndex","findIndex","highlightIndex","AssigneeRenderer","canEdit","editing","onEnterEditionMode","onKeydown","onExitEditionMode","onClickOutside","handleEnterEditionMode","handleExitEditionMode","handleAssign","newAssignee","onAssigneeChange","addGlobalSuccessMessage","assigneeUser","HotspotCommentPopup","setComment","onCommentEditSubmit","onCancelEdit","HotspotReviewHistory","reviewHistory","history","Creation","authorUser","log","Diff","Comment","html","elt","getHotspotReviewHistory","editedCommentKey","setEditedCommentKey","historyElt","historyIndex","diffIndex","markdownComment","onEditComment","onOpen","onDeleteComment","handleCloseComment","onCloseComment","handleSubmitComment","onCommentUpdate","handleDeleteComment","commentKey","handleEditComment","editSecurityHotspotComment","commentTextRef","commentVisible","invisible","onOpenComment","HotspotSnippetContainerRenderer","sourceLines","Provider","SnippetViewer","_i","onExpandBlock","TabKeys","handleExpansion","range","additionalLines","concatSourceLines","checkLastLine","previousLastLine","componentWillMount","fetchSources","lastLineReceived","toString","constructSourceViewerFile","Application","handleSelectTabs","tabKey","currentTab","tabs","tab","computeTabs","RiskDescription","riskDescription","VulnerabilityDescription","vulnerabilityDescription","FixRecommendation","fixRecommendations","StatusDescription","statusOption","showTitle","StatusSelectionRenderer","selectedStatus","submitDisabled","renderOption","onStatusChange","htmlFor","onCommentChange","onSubmit","handleStatusChange","handleSubmit","initialStatus","onStatusOptionChange","setIsOpen","readonly","canChangeStatus","trigger","actionableTrigger","Bottom","permalink","onUpdateHotspot","fetchHotspot","securityHotspotKey","u","c","handleHotspotUpdate","handleOpenComment","focus","preventScroll","bottomOffset","SecurityHotspotsAppRenderer","scrollableRef","querySelector","smooth","topOffset","Suggestions","suggestions","A11ySkipTarget","anchor","onShowAllHotspots","ScreenPositionHelper","top","selectNeighboringHotspot","shift","handleCallFailure","fetchSecurityHotspotsReviewed","reviewedHotspotsMetricKey","metricKeys","measure","reloadSecurityHotspotList","fetchSecurityHotspots","paging","hotspotsPageIndex","handleChangeFilters","changes","handleHotspotClick","Promise","all","hotspotPages","allHotspots","nextHotspot","pageIndex","handleShowAllHotspots","router","handleLoadMore","additionalHotspots","constructFiltersFromProps","fetchInitialData","registerKeyboardEvents","previous","unregisterKeyboardEvents","sonarsourceSecurity","requestedCategory","category","hotspotForCategory","page","hotspotKeys","split","getSecurityHotspotList","projectKey","onlyMine","classNames","HelpIcon_1","theme_1","Tooltip_1","mouseLeaveDelay","onShow","ThemeConsumer","theme","colors","gray71","addSuggestions","removeSuggestions","SuggestionsInner","qualifierIcons","app","ThemedIcon","blue","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","orange","toLowerCase","FoundIcon","l10n_1","measures_1","DeferredSpinner_1","buttons_1","button","needReload","ready","hasMore","reload","Button","translate","translateWithParameters","formatMeasure","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","weight","toNumber","formatted","level","small","muted","baseAssignValue","createAggregator","groupBy","_c","ariaAttrs","KNOWN_RATINGS","enhanceMeasure","metrics","metric","leak","getLeakValue","period","getRatingTooltip","finalMetricKey","decimals","formattedValue","omitExtraDecimalZeros","tooltip","Number","rating","extendStatics","__extends","setPrototypeOf","__proto__","__","constructor","create","RadioToggle","_super","_this","htmlId","PureComponent","Radio","toggleBodyClass","body","classList","toggle","documentElement","addSideBarClass","addWhitePageClass","addNoFooterPageClass","console","warn","removeSideBarClass","removeWhitePageClass","removeNoFooterPageClass","dispatch","getPosition","containerPos","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","removeEventListener","createRange","baseRange","isIterateeCall","toFinite","fromRight","step","nativeCeil","ceil","nativeMax","MultiSelectOption","custom","renderLabel","onSelectChange","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","evt","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","totalElements","searchInput","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","div","baseFlatten","collection","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","padAngle","numberValue","green","barBackgroundColor","lineCoverageRed","thickness","validateTag","replace","clickAttributes","other","getStandards","renderCWECategory","standards","record","cwe","renderOwaspTop10Category","withPrefix","owaspTop10","addPrefix","renderSansTop25Category","sansTop25","renderSonarSourceSecurityCategory","prefix","issuesByComponentAndLine","mapping","duplicationIndex","blocks","block","_ref","symbolsByLine","__makeTemplateObject","cooked","raw","templateObject_1","templateObject_2","templateObject_3","TabContainer","styled","baseBorder","barBorderColor","highlightHoverMixin","barBackgroundColorHighlight","StyledTab","themeSize","ActiveBorder","themeColor","oldValue","newValue","getLinearLocations","getSecondaryIssueLocationsForLine","highlightedLocations","linearLocations"],"mappings":"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","file":"js/271.1601658702741.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ExpandSnippetIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"g\", { fill: \"none\", fillRule: \"evenodd\" },\n            React.createElement(\"path\", { d: \"M8 1v4H4\", stroke: fill, strokeWidth: \"2\", transform: \"scale(-.83333 -.84583) rotate(45 7.66 -19.75)\" }),\n            React.createElement(\"path\", { d: \"M3 5.78h10v1.7H3z\", fill: fill }),\n            React.createElement(\"path\", { d: \"M7.17 2.4h1.66v5.07H7.17z\", fill: fill }),\n            React.createElement(\"g\", null,\n                React.createElement(\"path\", { d: \"M8.16 1.81V6.1H3.9\", stroke: fill, strokeWidth: \"2\", transform: \"scale(.83333 .84583) rotate(45 -4.2 13.2)\" }),\n                React.createElement(\"path\", { d: \"M13 10.01H3v-1.7h10z\", fill: fill }),\n                React.createElement(\"path\", { d: \"M8.83 13.4H7.17V9.15h1.66z\", fill: fill })))));\n}\nexports.default = ExpandSnippetIcon;\n//# sourceMappingURL=ExpandSnippetIcon.js.map","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst LINES_ABOVE = 5;\nconst LINES_BELOW = 5;\nexport const MERGE_DISTANCE = 11; // Merge if snippets are eleven lines away (separated by 10 lines) or fewer\nexport const LINES_BELOW_ISSUE = 9;\nexport const EXPAND_BY_LINES = 50;\n\nfunction unknownComponent(key: string): T.SnippetsByComponent {\n  return {\n    component: {\n      key,\n      measures: {},\n      path: '',\n      project: '',\n      projectName: '',\n      q: 'FIL',\n      uuid: ''\n    },\n    sources: []\n  };\n}\n\nfunction collision([startA, endA]: number[], [startB, endB]: number[]) {\n  return !(startA > endB + MERGE_DISTANCE || endA < startB - MERGE_DISTANCE);\n}\n\nexport function getPrimaryLocation(issue: T.Issue): T.FlowLocation {\n  return {\n    component: issue.component,\n    textRange: issue.textRange || {\n      endLine: 0,\n      endOffset: 0,\n      startLine: 0,\n      startOffset: 0\n    }\n  };\n}\n\nfunction addLinesBellow(params: { issue: T.Issue; locationEnd: number }) {\n  const { issue, locationEnd } = params;\n  const issueEndLine = (issue.textRange && issue.textRange.endLine) || 0;\n\n  if (!issueEndLine || issueEndLine === locationEnd) {\n    return locationEnd + LINES_BELOW_ISSUE;\n  }\n\n  return locationEnd + LINES_BELOW;\n}\n\nexport function createSnippets(params: {\n  component: string;\n  issue: T.Issue;\n  locations: T.FlowLocation[];\n}): T.Snippet[] {\n  const { component, issue, locations } = params;\n\n  const hasSecondaryLocations = issue.secondaryLocations.length > 0;\n  const addIssueLocation = hasSecondaryLocations && issue.component === component;\n\n  // For each location: compute its range, and then compare with other ranges\n  // to merge snippets that collide.\n  const ranges = (addIssueLocation ? [getPrimaryLocation(issue), ...locations] : locations).reduce(\n    (snippets: T.Snippet[], loc, index) => {\n      const startIndex = Math.max(1, loc.textRange.startLine - LINES_ABOVE);\n      const endIndex = addLinesBellow({ issue, locationEnd: loc.textRange.endLine });\n\n      let firstCollision: { start: number; end: number } | undefined;\n\n      // Remove ranges that collide into the first collision\n      snippets = snippets.filter(snippet => {\n        if (collision([snippet.start, snippet.end], [startIndex, endIndex])) {\n          let keep = false;\n          // Check if we've already collided\n          if (!firstCollision) {\n            firstCollision = snippet;\n            keep = true;\n          }\n          // Merge with first collision:\n          firstCollision.start = Math.min(startIndex, snippet.start, firstCollision.start);\n          firstCollision.end = Math.max(endIndex, snippet.end, firstCollision.end);\n\n          // remove the range if it was not the first collision\n          return keep;\n        }\n        return true;\n      });\n\n      if (firstCollision === undefined) {\n        snippets.push({\n          start: startIndex,\n          end: endIndex,\n          index\n        });\n      }\n\n      return snippets;\n    },\n    []\n  );\n\n  // Sort snippets by line number in the case of secondary locations\n  // Preserve location order for flows!\n  return hasSecondaryLocations ? ranges.sort((a, b) => a.start - b.start) : ranges;\n}\n\nexport function linesForSnippets(snippets: T.Snippet[], componentLines: T.LineMap) {\n  return snippets\n    .map(snippet => {\n      const lines = [];\n      for (let i = snippet.start; i <= snippet.end; i++) {\n        if (componentLines[i]) {\n          lines.push(componentLines[i]);\n        }\n      }\n      return lines;\n    })\n    .filter(snippet => snippet.length > 0);\n}\n\nexport function groupLocationsByComponent(\n  issue: T.Issue,\n  locations: T.FlowLocation[],\n  components: { [key: string]: T.SnippetsByComponent }\n) {\n  let currentComponent = '';\n  let currentGroup: T.SnippetGroup;\n  const groups: T.SnippetGroup[] = [];\n\n  const addGroup = (loc: T.FlowLocation) => {\n    currentGroup = {\n      ...(components[loc.component] || unknownComponent(loc.component)),\n      locations: []\n    };\n    groups.push(currentGroup);\n    currentComponent = loc.component;\n  };\n\n  if (\n    issue.secondaryLocations.length > 0 &&\n    locations.every(loc => loc.component !== issue.component)\n  ) {\n    addGroup(getPrimaryLocation(issue));\n  }\n\n  locations.forEach((loc, index) => {\n    if (loc.component !== currentComponent) {\n      addGroup(loc);\n    }\n    loc.index = index;\n    currentGroup.locations.push(loc);\n  });\n\n  return groups;\n}\n\nexport function expandSnippet({\n  direction,\n  snippetIndex,\n  snippets\n}: {\n  direction: T.ExpandDirection;\n  snippetIndex: number;\n  snippets: T.Snippet[];\n}) {\n  const snippetToExpand = snippets.find(s => s.index === snippetIndex);\n  if (!snippetToExpand) {\n    throw new Error(`Snippet ${snippetIndex} not found`);\n  }\n\n  snippetToExpand.start = Math.max(\n    0,\n    snippetToExpand.start - (direction === 'up' ? EXPAND_BY_LINES : 0)\n  );\n  snippetToExpand.end += direction === 'down' ? EXPAND_BY_LINES : 0;\n\n  return snippets.map(snippet => {\n    if (snippet.index === snippetIndex) {\n      return snippetToExpand;\n    }\n    if (collision([snippet.start, snippet.end], [snippetToExpand.start, snippetToExpand.end])) {\n      // Merge with expanded snippet\n      snippetToExpand.start = Math.min(snippet.start, snippetToExpand.start);\n      snippetToExpand.end = Math.max(snippet.end, snippetToExpand.end);\n      snippet.toDelete = true;\n    }\n    return snippet;\n  });\n}\n\nexport function inSnippet(line: number, snippet: T.SourceLine[]) {\n  return line >= snippet[0].line && line <= snippet[snippet.length - 1].line;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <ButtonLink\n            className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n            onClick={this.handleClick}>\n            <span className=\"issue-meta-label\">\n              <DateFromNow date={this.props.creationDate} />\n            </span>\n            <DropdownIcon className=\"little-spacer-left\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  engineName?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  ruleKey: string;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, engineName, manualVulnerability, message, organization, ruleKey } = props;\n  const ruleEngine = engineName ? engineName : engine;\n\n  return (\n    <div className=\"issue-message break-word\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right text-baseline\"\n        onClick={() => props.onOpenRule({ key: ruleKey, organization })}>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {ruleEngine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', ruleEngine)}>\n          <div className=\"badge spacer-right text-baseline\">{ruleEngine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-baseline\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\nexport interface IssueTitleBarProps {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: IssueTitleBarProps) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ externalRulesRepoNames, openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            engineName={\n              issue.externalRuleEngine &&\n              externalRulesRepoNames &&\n              externalRulesRepoNames[issue.externalRuleEngine]\n            }\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            organization={issue.organization}\n            ruleKey={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  displayProjectName?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim(props: Props) {\n  const {\n    branchLike,\n    expandable,\n    displayProjectName = true,\n    linkToProject = true,\n    loading,\n    onExpand,\n    sourceViewerFile\n  } = props;\n  const { measures, path, project, projectName, q, subProject, subProjectName } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        {displayProjectName && (\n          <div className=\"spacer-right\">\n            {linkToProject ? (\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n                {projectNameLabel}\n              </a>\n            ) : (\n              projectNameLabel\n            )}\n          </div>\n        )}\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span className=\"spacer-right\">{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-right\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-right\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              files: path,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nexport interface LineCoverageProps {\n  line: T.SourceLine;\n}\n\nexport function LineCoverage({ line }: LineCoverageProps) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  const status = getStatusTooltip(line);\n\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={status} placement=\"right\">\n        <div aria-label={status} className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n\nexport default React.memo(LineCoverage);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface LineDuplicationBlockProps {\n  blocksLoaded: boolean;\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onClick?: (line: T.SourceLine) => void;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport function LineDuplicationBlock(props: LineDuplicationBlockProps) {\n  const { blocksLoaded, duplicated, index, line } = props;\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n\n  const className = classNames('source-meta', 'source-line-duplications', {\n    'source-line-duplicated': duplicated\n  });\n\n  return duplicated ? (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <Tooltip\n        overlay={dropdownOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n        placement=\"right\">\n        <div>\n          <Toggler\n            onRequestClose={() => setDropdownOpen(false)}\n            open={dropdownOpen}\n            overlay={\n              <DropdownOverlay placement={PopupPlacement.RightTop}>\n                {props.renderDuplicationPopup(index, line.line)}\n              </DropdownOverlay>\n            }>\n            <div\n              aria-label={translate('source_viewer.tooltip.duplicated_block')}\n              className=\"source-line-bar\"\n              onClick={() => {\n                setDropdownOpen(true);\n                if (!blocksLoaded && line.duplicated && props.onClick) {\n                  props.onClick(line);\n                }\n              }}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Toggler>\n        </div>\n      </Tooltip>\n    </td>\n  ) : (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <div className=\"source-line-bar\" />\n    </td>\n  );\n}\n\nexport default React.memo(LineDuplicationBlock);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueIcon from 'sonar-ui-common/components/icons/IssueIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { sortByType } from '../../../helpers/issues';\n\nexport interface LineIssuesIndicatorProps {\n  issues: T.Issue[];\n  issuesOpen?: boolean;\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport function LineIssuesIndicator(props: LineIssuesIndicatorProps) {\n  const { issues, issuesOpen, line } = props;\n  const hasIssues = issues.length > 0;\n  const className = classNames('source-meta', 'source-line-issues', {\n    'source-line-with-issues': hasIssues\n  });\n\n  if (!hasIssues) {\n    return <td className={className} data-line-number={line.line} />;\n  }\n\n  const mostImportantIssue = sortByType(issues)[0];\n  const issueTypes = uniq(issues.map(i => i.type));\n\n  let tooltipContent;\n  if (issueTypes.length > 1) {\n    tooltipContent = translate('source_viewer.issues_on_line.multiple_issues');\n  } else if (issues.length === 1) {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.issue_of_type_X',\n      translate('issue.type', mostImportantIssue.type)\n    );\n  } else {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.X_issues_of_type_Y',\n      issues.length,\n      translate('issue.type', mostImportantIssue.type, 'plural')\n    );\n  }\n\n  return (\n    <td className={className} data-line-number={line.line}>\n      <span\n        aria-label={translate('source_viewer.issues_on_line', issuesOpen ? 'hide' : 'show')}\n        onClick={(e: React.MouseEvent<HTMLElement>) => {\n          e.preventDefault();\n          e.currentTarget.blur();\n          props.onClick();\n        }}\n        role=\"button\"\n        tabIndex={0}>\n        <Tooltip overlay={tooltipContent}>\n          <IssueIcon type={mostImportantIssue.type} />\n        </Tooltip>\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </span>\n    </td>\n  );\n}\n\nexport default React.memo(LineIssuesIndicator);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface LineOptionsPopupProps {\n  line: T.SourceLine;\n}\n\nexport function LineOptionsPopup({ line }: LineOptionsPopupProps) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <div className=\"source-viewer-bubble-popup nowrap\">\n          <Link\n            className=\"js-get-permalink\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n            {translate('component_viewer.get_permalink')}\n          </Link>\n        </div>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n\nexport default React.memo(LineOptionsPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport LineOptionsPopup from './LineOptionsPopup';\n\nexport interface LineNumberProps {\n  line: T.SourceLine;\n}\n\nexport function LineNumber({ line }: LineNumberProps) {\n  const { line: lineNumber } = line;\n  const hasLineNumber = !!lineNumber;\n  return hasLineNumber ? (\n    <td className=\"source-meta source-line-number\" data-line-number={lineNumber}>\n      <Dropdown\n        overlay={<LineOptionsPopup line={line} />}\n        overlayPlacement={PopupPlacement.RightTop}>\n        <span\n          aria-label={translateWithParameters('source_viewer.line_X', lineNumber)}\n          role=\"button\">\n          {lineNumber}\n        </span>\n      </Dropdown>\n    </td>\n  ) : (\n    <td className=\"source-meta source-line-number\" />\n  );\n}\n\nexport default React.memo(LineNumber);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface SCMPopupProps {\n  line: T.SourceLine;\n}\n\nexport function SCMPopup({ line }: SCMPopupProps) {\n  const hasAuthor = line.scmAuthor !== undefined && line.scmAuthor !== '';\n  const hasDate = line.scmDate !== undefined;\n  return (\n    <div className=\"source-viewer-bubble-popup abs-width-400\">\n      {hasAuthor && (\n        <div>\n          <h4>{translate('author')}</h4>\n          {line.scmAuthor}\n        </div>\n      )}\n      {hasDate && (\n        <div className={classNames({ 'spacer-top': hasAuthor })}>\n          <h4>{translate('source_viewer.tooltip.scm.commited_on')}</h4>\n          <DateFormatter date={line.scmDate!} />\n        </div>\n      )}\n      {line.scmRevision && (\n        <div className={classNames({ 'spacer-top': hasAuthor || hasDate })}>\n          <h4>{translate('source_viewer.tooltip.scm.revision')}</h4>\n          {line.scmRevision}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(SCMPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport SCMPopup from './SCMPopup';\n\nexport interface LineSCMProps {\n  line: T.SourceLine;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport function LineSCM({ line, previousLine }: LineSCMProps) {\n  const hasPopup = !!line.line;\n  const cell = (\n    <div className=\"source-line-scm-inner\">\n      {isSCMChanged(line, previousLine) ? line.scmAuthor || '' : ' '}\n    </div>\n  );\n\n  if (hasPopup) {\n    let ariaLabel = translate('source_viewer.click_for_scm_info');\n    if (line.scmAuthor) {\n      ariaLabel = `${translateWithParameters(\n        'source_viewer.author_X',\n        line.scmAuthor\n      )}, ${ariaLabel}`;\n    }\n\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        <Dropdown overlay={<SCMPopup line={line} />} overlayPlacement={PopupPlacement.RightTop}>\n          <div aria-label={ariaLabel} role=\"button\">\n            {cell}\n          </div>\n        </Dropdown>\n      </td>\n    );\n  } else {\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n\nexport default React.memo(LineSCM);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  loadDuplications: (line: T.SourceLine) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      branchLike,\n      displayAllIssues,\n      displayCoverage,\n      displayDuplications,\n      displayIssueLocationsCount,\n      displayIssueLocationsLink,\n      displayLocationMarkers,\n      highlightedLocationMessage,\n      displayIssues,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      highlighted,\n      highlightedSymbols,\n      issueLocations,\n      issuePopup,\n      issues,\n      last,\n      line,\n      openIssues,\n      previousLine,\n      secondaryIssueLocations,\n      selectedIssue,\n      verticalBuffer\n    } = this.props;\n\n    const className = classNames('source-line', {\n      'source-line-highlighted': highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': last === true\n    });\n\n    const bottomPadding = verticalBuffer ? verticalBuffer * LINE_HEIGHT : undefined;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber line={line} />\n\n        {displaySCM && <LineSCM line={line} previousLine={previousLine} />}\n        {displayIssues && !displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={issues}\n            issuesOpen={openIssues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {displayDuplications && (\n          <LineDuplicationBlock\n            blocksLoaded={duplicationsCount > 0}\n            duplicated={Boolean(line.duplicated)}\n            index={0}\n            key={0}\n            line={this.props.line}\n            onClick={this.props.loadDuplications}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        )}\n\n        {duplicationsCount > 1 &&\n          times(duplicationsCount - 1, index => (\n            <LineDuplicationBlock\n              blocksLoaded={true}\n              duplicated={duplications.includes(index + 1)}\n              index={index + 1}\n              key={index + 1}\n              line={this.props.line}\n              renderDuplicationPopup={this.props.renderDuplicationPopup}\n            />\n          ))}\n\n        {displayCoverage && <LineCoverage line={line} />}\n\n        <LineCode\n          branchLike={branchLike}\n          displayIssueLocationsCount={displayIssueLocationsCount}\n          displayIssueLocationsLink={displayIssueLocationsLink}\n          displayLocationMarkers={displayLocationMarkers}\n          highlightedLocationMessage={highlightedLocationMessage}\n          highlightedSymbols={highlightedSymbols}\n          issueLocations={issueLocations}\n          issuePopup={issuePopup}\n          issues={issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={secondaryIssueLocations}\n          selectedIssue={selectedIssue}\n          showIssues={openIssues || displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollHorizontally } from 'sonar-ui-common/helpers/scrolling';\nimport Line from '../../../components/SourceViewer/components/Line';\nimport { symbolsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getSecondaryIssueLocationsForLine } from '../../../components/SourceViewer/helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from '../../../components/SourceViewer/helpers/lines';\nimport { BranchLike } from '../../../types/branch-like';\nimport './SnippetViewer.css';\nimport { inSnippet, LINES_BELOW_ISSUE } from './utils';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  component: T.SourceViewerFile;\n  displaySCM?: boolean;\n  duplications?: T.Duplication[];\n  duplicationsByLine?: { [line: number]: number[] };\n  expandBlock: (snippetIndex: number, direction: T.ExpandDirection) => Promise<void>;\n  handleCloseIssues: (line: T.SourceLine) => void;\n  handleOpenIssues: (line: T.SourceLine) => void;\n  handleSymbolClick: (symbols: string[]) => void;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[];\n  index: number;\n  issue: Pick<T.Issue, 'key' | 'textRange' | 'line'>;\n  issuePopup?: { issue: string; name: string };\n  issuesByLine: T.IssuesByLine;\n  lastSnippetOfLastGroup: boolean;\n  loadDuplications?: (line: T.SourceLine) => void;\n  locations: T.FlowLocation[];\n  locationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onLocationSelect: (index: number) => void;\n  openIssuesByLine: T.Dict<boolean>;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement, offset?: number) => void;\n  snippet: T.SourceLine[];\n}\n\nexport default class SnippetViewer extends React.PureComponent<Props> {\n  snippetNodeRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.snippetNodeRef = React.createRef();\n  }\n\n  doScroll = (element: HTMLElement) => {\n    if (this.props.scroll) {\n      this.props.scroll(element);\n    }\n    const parent = this.snippetNodeRef.current as Element;\n\n    if (parent) {\n      const offset = parent.getBoundingClientRect().width / 2;\n\n      scrollHorizontally(element, {\n        leftOffset: offset,\n        rightOffset: offset,\n        parent\n      });\n    }\n  };\n\n  scrollToLastExpandedRow = () => {\n    if (this.props.scroll) {\n      const snippetNode = this.snippetNodeRef.current as Element;\n      if (!snippetNode) {\n        return;\n      }\n      const rows = snippetNode.querySelectorAll('tr');\n      const lastRow = rows[rows.length - 1];\n      this.props.scroll(lastRow, 100);\n    }\n  };\n\n  expandBlock = (direction: T.ExpandDirection) => () =>\n    this.props.expandBlock(this.props.index, direction).then(() => {\n      if (direction === 'down') {\n        this.scrollToLastExpandedRow();\n      }\n    });\n\n  renderLine({\n    displayDuplications,\n    displaySCM,\n    index,\n    issuesForLine,\n    issueLocations,\n    line,\n    snippet,\n    symbols,\n    verticalBuffer\n  }: {\n    displayDuplications: boolean;\n    displaySCM?: boolean;\n    index: number;\n    issuesForLine: T.Issue[];\n    issueLocations: T.LinearIssueLocation[];\n    line: T.SourceLine;\n    snippet: T.SourceLine[];\n    symbols: string[];\n    verticalBuffer: number;\n  }) {\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, this.props.locations);\n\n    const { duplications, duplicationsByLine } = this.props;\n    const duplicationsCount = duplications ? duplications.length : 0;\n    const lineDuplications =\n      (duplicationsCount && duplicationsByLine && duplicationsByLine[line.line]) || [];\n\n    const isSinkLine = issuesForLine.some(i => i.key === this.props.issue.key);\n    const noop = () => {};\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={false}\n        displayCoverage={true}\n        displayDuplications={displayDuplications}\n        displayIssues={!isSinkLine || issuesForLine.length > 1}\n        displayLocationMarkers={true}\n        displaySCM={displaySCM}\n        duplications={lineDuplications}\n        duplicationsCount={duplicationsCount}\n        highlighted={false}\n        highlightedLocationMessage={optimizeLocationMessage(\n          this.props.highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(symbols, this.props.highlightedSymbols)}\n        issueLocations={issueLocations}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={false}\n        line={line}\n        loadDuplications={this.props.loadDuplications || noop}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={noop}\n        onIssueUnselect={noop}\n        onIssuesClose={this.props.handleCloseIssues}\n        onIssuesOpen={this.props.handleOpenIssues}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.handleSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line]}\n        previousLine={index > 0 ? snippet[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.doScroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(this.props.issue.key, issuesForLine)}\n        verticalBuffer={verticalBuffer}\n      />\n    );\n  }\n\n  render() {\n    const {\n      component,\n      displaySCM,\n      issue,\n      issuesByLine = {},\n      lastSnippetOfLastGroup,\n      locationsByLine,\n      openIssuesByLine,\n      snippet\n    } = this.props;\n    const lastLine =\n      component.measures && component.measures.lines && parseInt(component.measures.lines, 10);\n\n    const symbols = symbolsByLine(snippet);\n\n    const bottomLine = snippet[snippet.length - 1].line;\n    const issueLine = issue.textRange ? issue.textRange.endLine : issue.line;\n    const lowestVisibleIssue = Math.max(\n      ...Object.keys(issuesByLine)\n        .map(k => parseInt(k, 10))\n        .filter(l => inSnippet(l, snippet) && (l === issueLine || openIssuesByLine[l]))\n    );\n    const verticalBuffer = lastSnippetOfLastGroup\n      ? Math.max(0, LINES_BELOW_ISSUE - (bottomLine - lowestVisibleIssue))\n      : 0;\n\n    const displayDuplications =\n      Boolean(this.props.loadDuplications) && snippet.some(s => !!s.duplicated);\n\n    return (\n      <div className=\"source-viewer-code snippet\" ref={this.snippetNodeRef}>\n        <div>\n          {snippet[0].line > 1 && (\n            <div className=\"expand-block expand-block-above\">\n              <button\n                aria-label={translate('source_viewer.expand_above')}\n                onClick={this.expandBlock('up')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n          <table\n            className={classNames('source-table', {\n              'expand-up': snippet[0].line > 1,\n              'expand-down': !lastLine || snippet[snippet.length - 1].line < lastLine\n            })}>\n            <tbody>\n              {snippet.map((line, index) =>\n                this.renderLine({\n                  displayDuplications,\n                  displaySCM,\n                  index,\n                  issuesForLine: issuesByLine[line.line] || [],\n                  issueLocations: locationsByLine[line.line] || [],\n                  line,\n                  snippet,\n                  symbols: symbols[line.line],\n                  verticalBuffer: index === snippet.length - 1 ? verticalBuffer : 0\n                })\n              )}\n            </tbody>\n          </table>\n          {(!lastLine || snippet[snippet.length - 1].line < lastLine) && (\n            <div className=\"expand-block expand-block-below\">\n              <button\n                aria-label={translate('source_viewer.expand_below')}\n                onClick={this.expandBlock('down')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line [role=button]{cursor:pointer}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-inner pre{-moz-tab-size:4;tab-size:4}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-line-duplications-extra{display:none}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm .dropdown{display:block}.source-line-scm [role=button]{height:18px}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-bar{width:5px;height:18px}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#777;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=\\\");top:0}.expand-block-below{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC\\\");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ChevronUpIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M8.28 4.404l4.602 4.604a.382.382 0 0 1 .118.279c0 .108-.04.2-.118.279l-1.03 1.03a.382.382 0 0 1-.278.117.382.382 0 0 1-.28-.117L8 7.3l-3.294 3.295a.382.382 0 0 1-.28.117.382.382 0 0 1-.279-.117l-1.03-1.03A.382.382 0 0 1 3 9.286c0-.107.04-.2.118-.278L7.72 4.404A.382.382 0 0 1 8 4.287c.108 0 .201.04.28.117z\", style: { fill: fill } })));\n}\nexports.default = ChevronUpIcon;\n//# sourceMappingURL=ChevronUpIcon.js.map","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-list-header{padding:16px 8px}.hotspot-risk-header{padding:8px}.hotspot-category{background-color:#fff;border:1px solid #e6e6e6}.hotspot-category .hotspot-category-header{padding:16px 8px;color:#444;border-bottom:none;border-left:4px solid}.hotspot-category .hotspot-category-header.contains-selected-hotspot,.hotspot-category .hotspot-category-header:hover{color:#4b9fd5}.hotspot-category.HIGH .hotspot-category-header{border-left-color:#d4333f}.hotspot-category.MEDIUM .hotspot-category-header{border-left-color:#ed7d20}.hotspot-category.LOW .hotspot-category-header{border-left-color:#eabe06}.hotspot-item{color:#444;display:block;padding:8px 16px;border:1px solid transparent;border-top-color:#e6e6e6;transition:padding 0s,border 0s}.hotspot-item:hover{background-color:#f2faff;border:1px dashed #4b9fd5;color:#444}.hotspot-item.highlight{background-color:#f2faff;color:#444;border:1px solid #4b9fd5;cursor:unset}.hotspot-risk-badge{color:#fff;text-transform:uppercase;display:inline-block;text-align:center;min-width:48px;padding:0 8px;font-weight:700;border-radius:2px}.hotspot-risk-badge.HIGH{background-color:#d4333f}.hotspot-risk-badge.MEDIUM{background-color:#ed7d20}.hotspot-risk-badge.LOW{background-color:#eabe06}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-assignee-search-results{min-width:300px}.hotspot-assignee-search-results li{cursor:pointer}.hotspot-assignee-search-results li.active,.hotspot-assignee-search-results li:hover{background-color:#f3f3f3}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-information{flex-basis:320px}.hotspot-information>div>span{flex-basis:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#status-trigger,#status-trigger+.popup{width:400px;box-sizing:border-box}#status-trigger{height:80px;border-radius:4px;outline:none}#status-trigger.readonly{cursor:not-allowed}#status-trigger:not(.readonly){cursor:pointer;background-color:#236a97}#status-trigger:not(.readonly) *{color:#fff}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#security_hotspots .filter-bar-outer{height:62px}#security_hotspots .filter-bar{position:fixed;background-color:#f3f3f3;z-index:51;left:0;right:0}#security_hotspots .filter-bar-inner{max-width:1280px;margin:0 auto;padding:16px 8px;box-sizing:border-box;border-bottom:1px solid #e6e6e6}#security_hotspots .layout-page-side,#security_hotspots .layout-page-side-outer{width:calc(50vw - 330px)}#security_hotspots .layout-page-side-inner{margin-left:calc(50vw - 645px)}#security_hotspots .layout-page-main{padding:0}@media (max-width:1320px){#security_hotspots .layout-page-side,#security_hotspots .layout-page-side-outer{width:316px}#security_hotspots .layout-page-side-inner{margin-left:0}}#security_hotspots .hotspot-content{max-width:962px;background:#fff;box-sizing:border-box}#security_hotspots .invisible{height:0;overflow:hidden}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  Hotspot,\n  HotspotAssignRequest,\n  HotspotComment,\n  HotspotResolution,\n  HotspotSearchResponse,\n  HotspotSetStatusRequest,\n  HotspotStatus\n} from '../types/security-hotspots';\n\nexport function assignSecurityHotspot(\n  hotspotKey: string,\n  data: HotspotAssignRequest\n): Promise<void> {\n  return post('/api/hotspots/assign', { hotspot: hotspotKey, ...data }).catch(throwGlobalError);\n}\n\nexport function setSecurityHotspotStatus(\n  hotspotKey: string,\n  data: HotspotSetStatusRequest\n): Promise<void> {\n  return post('/api/hotspots/change_status', { hotspot: hotspotKey, ...data }).catch(\n    throwGlobalError\n  );\n}\n\nexport function commentSecurityHotspot(hotspotKey: string, comment: string): Promise<void> {\n  return post('/api/hotspots/add_comment', { hotspot: hotspotKey, comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function deleteSecurityHotspotComment(commentKey: string): Promise<void> {\n  return post('/api/hotspots/delete_comment', { comment: commentKey }).catch(throwGlobalError);\n}\n\nexport function editSecurityHotspotComment(\n  commentKey: string,\n  comment: string\n): Promise<HotspotComment> {\n  return post('/api/hotspots/edit_comment', { comment: commentKey, text: comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspots(\n  data: {\n    projectKey: string;\n    p: number;\n    ps: number;\n    status?: HotspotStatus;\n    resolution?: HotspotResolution;\n    onlyMine?: boolean;\n    sinceLeakPeriod?: boolean;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', data).catch(throwGlobalError);\n}\n\nexport function getSecurityHotspotList(\n  hotspotKeys: string[],\n  data: {\n    projectKey: string;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', { ...data, hotspots: hotspotKeys.join() }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspotDetails(securityHotspotKey: string): Promise<Hotspot> {\n  return getJSON('/api/hotspots/show', { hotspot: securityHotspotKey })\n    .then((response: Hotspot & { users: T.UserBase[] }) => {\n      const { users, ...hotspot } = response;\n\n      if (users) {\n        if (hotspot.assignee) {\n          hotspot.assigneeUser = users.find(u => u.login === hotspot.assignee) || {\n            active: true,\n            login: hotspot.assignee\n          };\n        }\n        hotspot.authorUser = users.find(u => u.login === hotspot.author) || {\n          active: true,\n          login: hotspot.author\n        };\n        hotspot.comment.forEach(c => {\n          c.user = users.find(u => u.login === c.login) || { active: true, login: c.login };\n        });\n      }\n\n      return hotspot;\n    })\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RiskExposure {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH'\n}\n\nexport enum HotspotStatus {\n  TO_REVIEW = 'TO_REVIEW',\n  REVIEWED = 'REVIEWED'\n}\n\nexport enum HotspotResolution {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE'\n}\n\nexport enum HotspotStatusFilter {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport enum HotspotStatusOption {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport interface HotspotFilters {\n  assignedToMe: boolean;\n  sinceLeakPeriod: boolean;\n  status: HotspotStatusFilter;\n}\n\nexport interface RawHotspot {\n  assignee?: string;\n  author?: string;\n  component: string;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: string;\n  resolution?: HotspotResolution;\n  rule: string;\n  securityCategory: string;\n  status: HotspotStatus;\n  subProject?: string;\n  updateDate: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface Hotspot {\n  assignee?: string;\n  assigneeUser?: T.UserBase;\n  author: string;\n  authorUser: T.UserBase;\n  canChangeStatus: boolean;\n  changelog: T.IssueChangelog[];\n  comment: HotspotComment[];\n  component: T.Component;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: T.Component;\n  resolution?: HotspotResolution;\n  rule: HotspotRule;\n  status: HotspotStatus;\n  textRange?: T.TextRange;\n  updateDate: string;\n  users: T.UserBase[];\n}\n\nexport interface HotspotUpdateFields {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n}\n\nexport interface HotspotUpdate extends HotspotUpdateFields {\n  key: string;\n}\n\nexport interface HotspotRule {\n  fixRecommendations?: string;\n  key: string;\n  name: string;\n  riskDescription?: string;\n  securityCategory: string;\n  vulnerabilityDescription?: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface HotspotComment {\n  key: string;\n  htmlText: string;\n  markdown: string;\n  updatable: boolean;\n  createdAt: string;\n  login: string;\n  user: T.UserBase;\n}\n\nexport interface ReviewHistoryElement {\n  type: ReviewHistoryType;\n  date: string;\n  user: Pick<T.UserBase, 'active' | 'avatar' | 'name'>;\n  diffs?: T.IssueChangelogDiff[];\n  html?: string;\n  key?: string;\n  updatable?: boolean;\n  markdown?: string;\n}\n\nexport enum ReviewHistoryType {\n  Creation,\n  Diff,\n  Comment\n}\n\nexport interface HotspotSearchResponse {\n  components?: { key: string; qualifier: string; name: string }[];\n  hotspots: RawHotspot[];\n  paging: T.Paging;\n}\n\nexport interface HotspotSetStatusRequest {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n  comment?: string;\n}\n\nexport interface HotspotAssignRequest {\n  assignee: string;\n  comment?: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\n\nexport interface EmptyHotspotsPageProps {\n  filtered: boolean;\n  isStaticListOfHotspots: boolean;\n}\n\nexport default function EmptyHotspotsPage(props: EmptyHotspotsPageProps) {\n  const { filtered, isStaticListOfHotspots } = props;\n\n  let translationRoot;\n  if (isStaticListOfHotspots) {\n    translationRoot = 'no_hotspots_for_keys';\n  } else if (filtered) {\n    translationRoot = 'no_hotspots_for_filters';\n  } else {\n    translationRoot = 'no_hotspots';\n  }\n\n  return (\n    <div className=\"display-flex-column display-flex-center huge-spacer-top\">\n      <img\n        alt={translate('hotspots.page')}\n        className=\"huge-spacer-top\"\n        height={100}\n        src={`${getBaseUrl()}/images/${filtered ? 'filter-large' : 'hotspot-large'}.svg`}\n      />\n      <h1 className=\"huge-spacer-top\">{translate(`hotspots.${translationRoot}.title`)}</h1>\n      <div className=\"abs-width-400 text-center big-spacer-top\">\n        {translate(`hotspots.${translationRoot}.description`)}\n      </div>\n      {!(filtered || isStaticListOfHotspots) && (\n        <Link\n          className=\"big-spacer-top\"\n          target=\"_blank\"\n          to={{ pathname: '/documentation/user-guide/security-hotspots/' }}>\n          {translate('hotspots.learn_more')}\n        </Link>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport Measure from '../../../components/measure/Measure';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { HotspotFilters, HotspotStatusFilter } from '../../../types/security-hotspots';\n\nexport interface FilterBarProps {\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspotsReviewedMeasure?: string;\n  isStaticListOfHotspots: boolean;\n  loadingMeasure: boolean;\n  onBranch: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onShowAllHotspots: () => void;\n}\n\nconst statusOptions: Array<{ label: string; value: string }> = [\n  { value: HotspotStatusFilter.TO_REVIEW, label: translate('hotspot.filters.status.to_review') },\n  { value: HotspotStatusFilter.FIXED, label: translate('hotspot.filters.status.fixed') },\n  { value: HotspotStatusFilter.SAFE, label: translate('hotspot.filters.status.safe') }\n];\n\nconst periodOptions = [\n  { value: true, label: translate('hotspot.filters.period.since_leak_period') },\n  { value: false, label: translate('hotspot.filters.period.overall') }\n];\n\nexport enum AssigneeFilterOption {\n  ALL = 'all',\n  ME = 'me'\n}\n\nconst assigneeFilterOptions = [\n  { value: AssigneeFilterOption.ME, label: translate('hotspot.filters.assignee.assigned_to_me') },\n  { value: AssigneeFilterOption.ALL, label: translate('hotspot.filters.assignee.all') }\n];\n\nexport function FilterBar(props: FilterBarProps) {\n  const {\n    currentUser,\n    component,\n    filters,\n    hotspotsReviewedMeasure,\n    isStaticListOfHotspots,\n    loadingMeasure,\n    onBranch\n  } = props;\n  const isProject = component.qualifier === ComponentQualifier.Project;\n\n  return (\n    <div className=\"filter-bar-outer\">\n      <div className=\"filter-bar\">\n        <div className=\"filter-bar-inner display-flex-center\">\n          {isStaticListOfHotspots ? (\n            <a\n              id=\"show_all_hotspot\"\n              onClick={() => props.onShowAllHotspots()}\n              role=\"link\"\n              tabIndex={0}>\n              {translate('hotspot.filters.show_all')}\n            </a>\n          ) : (\n            <div className=\"display-flex-space-between width-100\">\n              <div className=\"display-flex-center\">\n                <h3 className=\"huge-spacer-right\">{translate('hotspot.filters.title')}</h3>\n\n                {isLoggedIn(currentUser) && (\n                  <RadioToggle\n                    className=\"huge-spacer-right\"\n                    name=\"assignee-filter\"\n                    onCheck={(value: AssigneeFilterOption) =>\n                      props.onChangeFilters({ assignedToMe: value === AssigneeFilterOption.ME })\n                    }\n                    options={assigneeFilterOptions}\n                    value={\n                      filters.assignedToMe ? AssigneeFilterOption.ME : AssigneeFilterOption.ALL\n                    }\n                  />\n                )}\n\n                <span className=\"spacer-right\">{translate('status')}</span>\n                <Select\n                  className=\"input-medium big-spacer-right\"\n                  clearable={false}\n                  onChange={(option: { value: HotspotStatusFilter }) =>\n                    props.onChangeFilters({ status: option.value })\n                  }\n                  options={statusOptions}\n                  searchable={false}\n                  value={filters.status}\n                />\n\n                {onBranch && (\n                  <Select\n                    className=\"input-medium big-spacer-right\"\n                    clearable={false}\n                    onChange={(option: { value: boolean }) =>\n                      props.onChangeFilters({ sinceLeakPeriod: option.value })\n                    }\n                    options={periodOptions}\n                    searchable={false}\n                    value={filters.sinceLeakPeriod}\n                  />\n                )}\n              </div>\n\n              {isProject && (\n                <div className=\"display-flex-center\">\n                  <span className=\"little-spacer-right\">\n                    {translate('metric.security_hotspots_reviewed.name')}\n                  </span>\n                  <HelpTooltip\n                    className=\"big-spacer-right\"\n                    overlay={translate('hotspots.reviewed.tooltip')}\n                  />\n                  <DeferredSpinner loading={loadingMeasure}>\n                    {hotspotsReviewedMeasure && <CoverageRating value={hotspotsReviewedMeasure} />}\n                    <Measure\n                      className=\"spacer-left huge\"\n                      metricKey={\n                        onBranch && !filters.sinceLeakPeriod\n                          ? 'security_hotspots_reviewed'\n                          : 'new_security_hotspots_reviewed'\n                      }\n                      metricType=\"PERCENT\"\n                      value={hotspotsReviewedMeasure}\n                    />\n                  </DeferredSpinner>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withCurrentUser(FilterBar);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport {\n  Hotspot,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusOption,\n  RawHotspot,\n  ReviewHistoryElement,\n  ReviewHistoryType,\n  RiskExposure\n} from '../../types/security-hotspots';\n\nexport const RISK_EXPOSURE_LEVELS = [RiskExposure.HIGH, RiskExposure.MEDIUM, RiskExposure.LOW];\n\nexport function mapRules(rules: Array<{ key: string; name: string }>): T.Dict<string> {\n  return rules.reduce((ruleMap: T.Dict<string>, r) => {\n    ruleMap[r.key] = r.name;\n    return ruleMap;\n  }, {});\n}\n\nexport function groupByCategory(\n  hotspots: RawHotspot[] = [],\n  securityCategories: T.StandardSecurityCategories\n) {\n  const groups = groupBy(hotspots, h => h.securityCategory);\n\n  return Object.keys(groups).map(key => ({\n    key,\n    title: getCategoryTitle(key, securityCategories),\n    hotspots: groups[key]\n  }));\n}\n\nexport function sortHotspots(\n  hotspots: RawHotspot[],\n  securityCategories: T.Dict<{ title: string }>\n) {\n  return sortBy(hotspots, [\n    h => RISK_EXPOSURE_LEVELS.indexOf(h.vulnerabilityProbability),\n    h => getCategoryTitle(h.securityCategory, securityCategories),\n    h => h.message\n  ]);\n}\n\nfunction getCategoryTitle(key: string, securityCategories: T.StandardSecurityCategories) {\n  return securityCategories[key] ? securityCategories[key].title : key;\n}\n\nexport function constructSourceViewerFile(\n  { component, project }: Hotspot,\n  lines?: number\n): T.SourceViewerFile {\n  return {\n    key: component.key,\n    measures: { lines: lines ? lines.toString() : undefined },\n    path: component.path || '',\n    project: project.key,\n    projectName: project.name,\n    q: component.qualifier,\n    uuid: ''\n  };\n}\n\nexport function getHotspotReviewHistory(hotspot: Hotspot): ReviewHistoryElement[] {\n  const history: ReviewHistoryElement[] = [];\n\n  if (hotspot.creationDate) {\n    history.push({\n      type: ReviewHistoryType.Creation,\n      date: hotspot.creationDate,\n      user: {\n        ...hotspot.authorUser,\n        name: hotspot.authorUser.name || hotspot.authorUser.login\n      }\n    });\n  }\n\n  if (hotspot.changelog && hotspot.changelog.length > 0) {\n    history.push(\n      ...hotspot.changelog.map(log => ({\n        type: ReviewHistoryType.Diff,\n        date: log.creationDate,\n        user: {\n          active: log.isUserActive,\n          avatar: log.avatar,\n          name: log.userName || log.user\n        },\n        diffs: log.diffs\n      }))\n    );\n  }\n\n  if (hotspot.comment && hotspot.comment.length > 0) {\n    history.push(\n      ...hotspot.comment.map(comment => ({\n        type: ReviewHistoryType.Comment,\n        date: comment.createdAt,\n        updatable: comment.updatable,\n        user: {\n          ...comment.user,\n          name: comment.user.name || comment.user.login\n        },\n        html: comment.htmlText,\n        key: comment.key,\n        markdown: comment.markdown\n      }))\n    );\n  }\n\n  return sortBy(history, elt => elt.date);\n}\n\nconst STATUS_AND_RESOLUTION_TO_STATUS_OPTION = {\n  [HotspotStatus.TO_REVIEW]: HotspotStatusOption.TO_REVIEW,\n  [HotspotStatus.REVIEWED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.FIXED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.SAFE]: HotspotStatusOption.SAFE\n};\n\nexport function getStatusOptionFromStatusAndResolution(\n  status: HotspotStatus,\n  resolution?: HotspotResolution\n) {\n  // Resolution is the most determinist info here, so we use it first to get the matching status option\n  // If not provided, we use the status (which will be TO_REVIEW)\n  return STATUS_AND_RESOLUTION_TO_STATUS_OPTION[resolution ?? status];\n}\n\nconst STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP = {\n  [HotspotStatusOption.TO_REVIEW]: { status: HotspotStatus.TO_REVIEW, resolution: undefined },\n  [HotspotStatusOption.FIXED]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.FIXED\n  },\n  [HotspotStatusOption.SAFE]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.SAFE\n  }\n};\n\nexport function getStatusAndResolutionFromStatusOption(statusOption: HotspotStatusOption) {\n  return STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP[statusOption];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../utils';\n\nexport interface HotspotListItemProps {\n  hotspot: RawHotspot;\n  onClick: (hotspot: RawHotspot) => void;\n  selected: boolean;\n}\n\nexport default function HotspotListItem(props: HotspotListItemProps) {\n  const { hotspot, selected } = props;\n  return (\n    <a\n      className={classNames('hotspot-item', { highlight: selected })}\n      href=\"#\"\n      onClick={() => !selected && props.onClick(hotspot)}>\n      <div className=\"little-spacer-left\">{hotspot.message}</div>\n      <div className=\"badge spacer-top\">\n        {translate(\n          'hotspots.status_option',\n          getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution)\n        )}\n      </div>\n    </a>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport ChevronUpIcon from 'sonar-ui-common/components/icons/ChevronUpIcon';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport HotspotListItem from './HotspotListItem';\n\nexport interface HotspotCategoryProps {\n  categoryKey: string;\n  expanded: boolean;\n  hotspots: RawHotspot[];\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onToggleExpand: (categoryKey: string, value: boolean) => void;\n  selectedHotspot: RawHotspot;\n  title: string;\n  isLastAndIncomplete: boolean;\n}\n\nexport default function HotspotCategory(props: HotspotCategoryProps) {\n  const { categoryKey, expanded, hotspots, selectedHotspot, title, isLastAndIncomplete } = props;\n\n  if (hotspots.length < 1) {\n    return null;\n  }\n\n  const risk = hotspots[0].vulnerabilityProbability;\n\n  return (\n    <div className={classNames('hotspot-category', risk)}>\n      <a\n        className={classNames(\n          'hotspot-category-header display-flex-space-between display-flex-center',\n          { 'contains-selected-hotspot': selectedHotspot.securityCategory === categoryKey }\n        )}\n        href=\"#\"\n        onClick={() => props.onToggleExpand(categoryKey, !expanded)}>\n        <strong className=\"flex-1 spacer-right break-word\">{title}</strong>\n        <span>\n          <span className=\"counter-badge\">\n            {hotspots.length}\n            {isLastAndIncomplete && '+'}\n          </span>\n          {expanded ? (\n            <ChevronUpIcon className=\"big-spacer-left\" />\n          ) : (\n            <ChevronDownIcon className=\"big-spacer-left\" />\n          )}\n        </span>\n      </a>\n      {expanded && (\n        <ul>\n          {hotspots.map(h => (\n            <li data-hotspot-key={h.key} key={h.key}>\n              <HotspotListItem\n                hotspot={h}\n                onClick={props.onHotspotClick}\n                selected={h.key === selectedHotspot.key}\n              />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { groupBy } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusFilter, RawHotspot, RiskExposure } from '../../../types/security-hotspots';\nimport { groupByCategory, RISK_EXPOSURE_LEVELS } from '../utils';\nimport HotspotCategory from './HotspotCategory';\nimport './HotspotList.css';\n\ninterface Props {\n  hotspots: RawHotspot[];\n  hotspotsTotal: number;\n  isStaticListOfHotspots: boolean;\n  loadingMore: boolean;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot;\n  statusFilter: HotspotStatusFilter;\n}\n\ninterface State {\n  expandedCategories: T.Dict<boolean>;\n  groupedHotspots: Array<{\n    risk: RiskExposure;\n    categories: Array<{ key: string; hotspots: RawHotspot[]; title: string }>;\n  }>;\n}\n\nexport default class HotspotList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      expandedCategories: { [props.selectedHotspot.securityCategory]: true },\n      groupedHotspots: this.groupHotspots(props.hotspots, props.securityCategories)\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Force open the category of selected hotspot\n    if (\n      this.props.selectedHotspot.securityCategory !== prevProps.selectedHotspot.securityCategory\n    ) {\n      this.handleToggleCategory(this.props.selectedHotspot.securityCategory, true);\n    }\n\n    // Compute the hotspot tree from the list\n    if (\n      this.props.hotspots !== prevProps.hotspots ||\n      this.props.securityCategories !== prevProps.securityCategories\n    ) {\n      const groupedHotspots = this.groupHotspots(\n        this.props.hotspots,\n        this.props.securityCategories\n      );\n      this.setState({ groupedHotspots });\n    }\n  }\n\n  groupHotspots = (hotspots: RawHotspot[], securityCategories: T.StandardSecurityCategories) => {\n    const risks = groupBy(hotspots, h => h.vulnerabilityProbability);\n\n    return RISK_EXPOSURE_LEVELS.map(risk => ({\n      risk,\n      categories: groupByCategory(risks[risk], securityCategories)\n    })).filter(risk => risk.categories.length > 0);\n  };\n\n  handleToggleCategory = (categoryKey: string, value: boolean) => {\n    this.setState(({ expandedCategories }) => ({\n      expandedCategories: { ...expandedCategories, [categoryKey]: value }\n    }));\n  };\n\n  render() {\n    const {\n      hotspots,\n      hotspotsTotal,\n      isStaticListOfHotspots,\n      loadingMore,\n      selectedHotspot,\n      statusFilter\n    } = this.props;\n\n    const { expandedCategories, groupedHotspots } = this.state;\n\n    return (\n      <div className=\"huge-spacer-bottom\">\n        <h1 className=\"hotspot-list-header bordered-bottom\">\n          <SecurityHotspotIcon className=\"spacer-right\" />\n          {translateWithParameters(\n            isStaticListOfHotspots ? 'hotspots.list_title' : `hotspots.list_title.${statusFilter}`,\n            hotspotsTotal\n          )}\n        </h1>\n        <ul className=\"big-spacer-bottom\">\n          {groupedHotspots.map((riskGroup, riskGroupIndex) => {\n            const isLastRiskGroup = riskGroupIndex === groupedHotspots.length - 1;\n\n            return (\n              <li className=\"big-spacer-bottom\" key={riskGroup.risk}>\n                <div className=\"hotspot-risk-header little-spacer-left\">\n                  <span>{translate('hotspots.risk_exposure')}:</span>\n                  <div className={classNames('hotspot-risk-badge', 'spacer-left', riskGroup.risk)}>\n                    {translate('risk_exposure', riskGroup.risk)}\n                  </div>\n                </div>\n                <ul>\n                  {riskGroup.categories.map((cat, categoryIndex) => {\n                    const isLastCategory = categoryIndex === riskGroup.categories.length - 1;\n\n                    return (\n                      <li className=\"spacer-bottom\" key={cat.key}>\n                        <HotspotCategory\n                          categoryKey={cat.key}\n                          expanded={expandedCategories[cat.key]}\n                          hotspots={cat.hotspots}\n                          onHotspotClick={this.props.onHotspotClick}\n                          onToggleExpand={this.handleToggleCategory}\n                          selectedHotspot={selectedHotspot}\n                          title={cat.title}\n                          isLastAndIncomplete={\n                            isLastRiskGroup && isLastCategory && hotspots.length < hotspotsTotal\n                          }\n                        />\n                      </li>\n                    );\n                  })}\n                </ul>\n              </li>\n            );\n          })}\n        </ul>\n        <ListFooter\n          count={hotspots.length}\n          loadMore={!loadingMore ? this.props.onLoadMore : undefined}\n          loading={loadingMore}\n          total={hotspotsTotal}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport './AssigneeSelection.css';\n\nexport interface HotspotAssigneeSelectRendererProps {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  onKeyDown: (event: React.KeyboardEvent) => void;\n  onSearch: (query: string) => void;\n  onSelect: (user: T.UserActive) => void;\n  open: boolean;\n  query?: string;\n  suggestedUsers?: T.UserActive[];\n}\n\nexport default function AssigneeSelectionRenderer(props: HotspotAssigneeSelectRendererProps) {\n  const { highlighted, loading, open, query, suggestedUsers } = props;\n  return (\n    <>\n      <div className=\"display-flex-center\">\n        <SearchBox\n          autoFocus={true}\n          onChange={props.onSearch}\n          onKeyDown={props.onKeyDown}\n          placeholder={translate('hotspots.assignee.select_user')}\n          value={query}\n        />\n\n        {loading && <DeferredSpinner className=\"spacer-left\" />}\n      </div>\n\n      {!loading && open && (\n        <div className=\"position-relative\">\n          <DropdownOverlay noPadding={true} placement={PopupPlacement.BottomLeft}>\n            {suggestedUsers && suggestedUsers.length > 0 ? (\n              <ul className=\"hotspot-assignee-search-results\">\n                {suggestedUsers.map(suggestion => (\n                  <li\n                    className={classNames('padded', {\n                      active: highlighted && highlighted.login === suggestion.login\n                    })}\n                    key={suggestion.login}\n                    onClick={() => props.onSelect(suggestion)}>\n                    <Avatar\n                      className=\"spacer-right\"\n                      hash={suggestion.avatar}\n                      name={suggestion.name}\n                      size={16}\n                    />\n                    {suggestion.name}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <div className=\"padded\">{translate('no_results')}</div>\n            )}\n          </DropdownOverlay>\n        </div>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { KeyCodes } from 'sonar-ui-common/helpers/keycodes';\nimport { searchUsers } from '../../../../api/users';\nimport { isUserActive } from '../../../../helpers/users';\nimport AssigneeSelectionRenderer from './AssigneeSelectionRenderer';\n\ninterface Props {\n  allowCurrentUserSelection: boolean;\n  loggedInUser: T.LoggedInUser;\n  onSelect: (user?: T.UserActive) => void;\n}\n\ninterface State {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  open: boolean;\n  query?: string;\n  suggestedUsers: T.UserActive[];\n}\n\nexport default class AssigneeSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      open: props.allowCurrentUserSelection,\n      suggestedUsers: props.allowCurrentUserSelection ? [props.loggedInUser] : []\n    };\n\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    if (this.mounted) {\n      if (query.length < 2) {\n        this.handleNoSearch(query);\n      } else {\n        this.handleActualSearch(query);\n      }\n    }\n  };\n\n  handleNoSearch = (query: string) => {\n    const { allowCurrentUserSelection, loggedInUser } = this.props;\n\n    this.setState({\n      loading: false,\n      open: allowCurrentUserSelection,\n      query,\n      suggestedUsers: allowCurrentUserSelection ? [loggedInUser] : []\n    });\n  };\n\n  handleActualSearch = (query: string) => {\n    this.setState({ loading: true, query });\n    searchUsers({ q: query })\n      .then(result => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            query,\n            open: true,\n            suggestedUsers: result.users.filter(isUserActive) as T.UserActive[]\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case KeyCodes.Enter:\n        event.preventDefault();\n        this.selectHighlighted();\n        break;\n      case KeyCodes.UpArrow:\n        event.preventDefault();\n        this.highlightPrevious();\n        break;\n      case KeyCodes.DownArrow:\n        event.preventDefault();\n        this.highlightNext();\n        break;\n    }\n  };\n\n  getCurrentIndex = () => {\n    const { highlighted, suggestedUsers } = this.state;\n\n    return highlighted\n      ? suggestedUsers.findIndex(suggestion => suggestion.login === highlighted.login)\n      : -1;\n  };\n\n  highlightIndex = (index: number) => {\n    const { suggestedUsers } = this.state;\n\n    if (suggestedUsers.length > 0) {\n      if (index < 0) {\n        index = suggestedUsers.length - 1;\n      } else if (index >= suggestedUsers.length) {\n        index = 0;\n      }\n\n      this.setState({ highlighted: suggestedUsers[index] });\n    }\n  };\n\n  highlightPrevious = () => {\n    this.highlightIndex(this.getCurrentIndex() - 1);\n  };\n\n  highlightNext = () => {\n    this.highlightIndex(this.getCurrentIndex() + 1);\n  };\n\n  selectHighlighted = () => {\n    const { highlighted } = this.state;\n\n    if (highlighted !== undefined) {\n      this.props.onSelect(highlighted);\n    }\n  };\n\n  render() {\n    const { highlighted, loading, open, query, suggestedUsers } = this.state;\n\n    return (\n      <AssigneeSelectionRenderer\n        highlighted={highlighted}\n        loading={loading}\n        onKeyDown={this.handleKeyDown}\n        onSearch={this.handleSearch}\n        onSelect={this.props.onSelect}\n        open={open}\n        query={query}\n        suggestedUsers={suggestedUsers}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport EscKeydownHandler from 'sonar-ui-common/components/controls/EscKeydownHandler';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport AssigneeSelection from './AssigneeSelection';\n\nexport interface AssigneeRendererProps {\n  canEdit: boolean;\n  editing: boolean;\n  loading: boolean;\n\n  assignee?: T.UserBase;\n  loggedInUser?: T.LoggedInUser;\n\n  onAssign: (user?: T.UserActive) => void;\n  onEnterEditionMode: () => void;\n  onExitEditionMode: () => void;\n}\n\nexport default function AssigneeRenderer(props: AssigneeRendererProps) {\n  const { assignee, canEdit, loggedInUser, editing, loading } = props;\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {!editing && (\n        <div className=\"display-flex-center\">\n          <strong className=\"nowrap\">\n            {assignee &&\n              (assignee.active\n                ? assignee.name ?? assignee.login\n                : translateWithParameters('user.x_deleted', assignee.name ?? assignee.login))}\n            {!assignee && translate('unassigned')}\n          </strong>\n          {loggedInUser && canEdit && (\n            <EditButton className=\"spacer-left\" onClick={props.onEnterEditionMode} />\n          )}\n        </div>\n      )}\n\n      {loggedInUser && editing && (\n        <EscKeydownHandler onKeydown={props.onExitEditionMode}>\n          <OutsideClickHandler onClickOutside={props.onExitEditionMode}>\n            <AssigneeSelection\n              allowCurrentUserSelection={loggedInUser.login !== assignee?.login}\n              loggedInUser={loggedInUser}\n              onSelect={props.onAssign}\n            />\n          </OutsideClickHandler>\n        </EscKeydownHandler>\n      )}\n    </DeferredSpinner>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { assignSecurityHotspot } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot, HotspotStatus } from '../../../../types/security-hotspots';\nimport AssigneeRenderer from './AssigneeRenderer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onAssigneeChange: () => void;\n}\n\ninterface State {\n  editing: boolean;\n  loading: boolean;\n}\n\nexport class Assignee extends React.PureComponent<Props, State> {\n  mounted = false;\n  state = {\n    editing: false,\n    loading: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleEnterEditionMode = () => {\n    this.setState({ editing: true });\n  };\n\n  handleExitEditionMode = () => {\n    this.setState({ editing: false });\n  };\n\n  handleAssign = (newAssignee?: T.UserActive) => {\n    if (newAssignee && newAssignee.login) {\n      this.setState({ loading: true });\n      assignSecurityHotspot(this.props.hotspot.key, {\n        assignee: newAssignee.login\n      })\n        .then(() => {\n          if (this.mounted) {\n            this.setState({ editing: false, loading: false });\n            this.props.onAssigneeChange();\n          }\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters('hotspots.assign.success', newAssignee.name)\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const {\n      currentUser,\n      hotspot: { assigneeUser, status }\n    } = this.props;\n    const { editing, loading } = this.state;\n\n    const canEdit = status === HotspotStatus.TO_REVIEW;\n\n    return (\n      <AssigneeRenderer\n        assignee={assigneeUser}\n        canEdit={canEdit}\n        editing={editing}\n        loading={loading}\n        loggedInUser={isLoggedIn(currentUser) ? currentUser : undefined}\n        onAssign={this.handleAssign}\n        onEnterEditionMode={this.handleEnterEditionMode}\n        onExitEditionMode={this.handleExitEditionMode}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(Assignee);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\n\nexport interface HotspotCommentPopupProps {\n  markdownComment: string;\n  onCommentEditSubmit: (comment: string) => void;\n  onCancelEdit: () => void;\n}\n\nexport default function HotspotCommentPopup(props: HotspotCommentPopupProps) {\n  const [comment, setComment] = React.useState(props.markdownComment);\n\n  return (\n    <div className=\"issue-comment-bubble-popup\">\n      <div className=\"issue-comment-form-text\">\n        <textarea\n          autoFocus={true}\n          onChange={event => setComment(event.target.value)}\n          rows={2}\n          value={comment}\n        />\n      </div>\n      <div className=\"spacer-top display-flex-space-between\">\n        <div className=\"issue-comment-form-tips\">\n          <MarkdownTips />\n        </div>\n        <div className=\"\">\n          <Button\n            className=\"little-spacer-right\"\n            onClick={() => props.onCommentEditSubmit(comment)}>\n            {translate('save')}\n          </Button>\n          <ResetButtonLink\n            onClick={() => {\n              setComment('');\n              props.onCancelEdit();\n            }}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { Button, DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown, { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport IssueChangelogDiff from '../../../components/issue/components/IssueChangelogDiff';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Hotspot, ReviewHistoryType } from '../../../types/security-hotspots';\nimport { getHotspotReviewHistory } from '../utils';\nimport HotspotCommentPopup from './HotspotCommentPopup';\n\nexport interface HotspotReviewHistoryProps {\n  hotspot: Hotspot;\n  onDeleteComment: (key: string) => void;\n  onEditComment: (key: string, comment: string) => void;\n}\n\nexport default function HotspotReviewHistory(props: HotspotReviewHistoryProps) {\n  const { hotspot } = props;\n  const reviewHistory = getHotspotReviewHistory(hotspot);\n  const [editedCommentKey, setEditedCommentKey] = React.useState('');\n\n  return (\n    <>\n      {reviewHistory.map((historyElt, historyIndex) => {\n        const { user, type, diffs, date, html, key, updatable, markdown } = historyElt;\n        return (\n          <div\n            className={classNames('padded', { 'bordered-top': historyIndex > 0 })}\n            key={historyIndex}>\n            <div className=\"display-flex-center\">\n              {user.name && (\n                <>\n                  <Avatar\n                    className=\"little-spacer-right\"\n                    hash={user.avatar}\n                    name={user.name}\n                    size={20}\n                  />\n                  <strong>\n                    {user.active ? user.name : translateWithParameters('user.x_deleted', user.name)}\n                  </strong>\n                  {type === ReviewHistoryType.Creation && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.created')}\n                    </span>\n                  )}\n                  {type === ReviewHistoryType.Comment && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.comment_added')}\n                    </span>\n                  )}\n                  <span className=\"little-spacer-left little-spacer-right\">-</span>\n                </>\n              )}\n              <DateTimeFormatter date={date} />\n            </div>\n\n            {type === ReviewHistoryType.Diff && diffs && (\n              <div className=\"spacer-top\">\n                {diffs.map((diff, diffIndex) => (\n                  <IssueChangelogDiff diff={diff} key={diffIndex} />\n                ))}\n              </div>\n            )}\n\n            {type === ReviewHistoryType.Comment && key && html && markdown && (\n              <div className=\"spacer-top display-flex-space-between\">\n                <div className=\"markdown\" dangerouslySetInnerHTML={{ __html: sanitize(html) }} />\n                {updatable && (\n                  <div>\n                    <div className=\"dropdown\">\n                      <Toggler\n                        onRequestClose={() => {\n                          setEditedCommentKey('');\n                        }}\n                        open={key === editedCommentKey}\n                        overlay={\n                          <DropdownOverlay placement={PopupPlacement.BottomRight}>\n                            <HotspotCommentPopup\n                              markdownComment={markdown}\n                              onCancelEdit={() => setEditedCommentKey('')}\n                              onCommentEditSubmit={comment => {\n                                setEditedCommentKey('');\n                                props.onEditComment(key, comment);\n                              }}\n                            />\n                          </DropdownOverlay>\n                        }>\n                        <EditButton\n                          className=\"it__hotspots-comment-edit button-small\"\n                          onClick={() => setEditedCommentKey(key)}\n                        />\n                      </Toggler>\n                    </div>\n                    <Dropdown\n                      onOpen={() => setEditedCommentKey('')}\n                      overlay={\n                        <div className=\"padded abs-width-150\">\n                          <p>{translate('issue.comment.delete_confirm_message')}</p>\n                          <Button\n                            className=\"button-red big-spacer-top pull-right\"\n                            onClick={() => props.onDeleteComment(key)}>\n                            {translate('delete')}\n                          </Button>\n                        </div>\n                      }\n                      overlayPlacement={PopupPlacement.BottomRight}>\n                      <DeleteButton className=\"it__hotspots-comment-delete button-small\" />\n                    </Dropdown>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  commentSecurityHotspot,\n  deleteSecurityHotspotComment,\n  editSecurityHotspotComment\n} from '../../../api/security-hotspots';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotReviewHistory from './HotspotReviewHistory';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  commentVisible: boolean;\n  onCommentUpdate: () => void;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n}\n\ninterface State {\n  comment: string;\n}\n\nexport default class HotspotReviewHistoryAndComments extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      comment: ''\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot !== this.props.hotspot) {\n      this.setState({\n        comment: ''\n      });\n    }\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ comment: event.target.value });\n  };\n\n  handleCloseComment = () => {\n    this.setState({ comment: '' });\n    this.props.onCloseComment();\n  };\n\n  handleSubmitComment = () => {\n    return commentSecurityHotspot(this.props.hotspot.key, this.state.comment).then(() => {\n      this.setState({ comment: '' });\n      this.props.onCloseComment();\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleDeleteComment = (key: string) => {\n    return deleteSecurityHotspotComment(key).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleEditComment = (key: string, comment: string) => {\n    return editSecurityHotspotComment(key, comment).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  render() {\n    const { currentUser, hotspot, commentTextRef, commentVisible } = this.props;\n    const { comment } = this.state;\n    return (\n      <>\n        <h1>{translate('hotspot.section.activity')}</h1>\n        <div className=\"padded\">\n          <HotspotReviewHistory\n            hotspot={hotspot}\n            onDeleteComment={this.handleDeleteComment}\n            onEditComment={this.handleEditComment}\n          />\n\n          {isLoggedIn(currentUser) && (\n            <>\n              <hr />\n              <div className=\"big-spacer-top\">\n                <Button\n                  className={classNames({ invisible: commentVisible })}\n                  id=\"hotspot-comment-box-display\"\n                  onClick={this.props.onOpenComment}>\n                  {translate('hotspots.comment.open')}\n                </Button>\n\n                <div className={classNames({ invisible: !commentVisible })}>\n                  <div className=\"little-spacer-bottom\">{translate('hotspots.comment.field')}</div>\n                  <textarea\n                    className=\"form-field fixed-width width-100 spacer-bottom\"\n                    onChange={this.handleCommentChange}\n                    ref={commentTextRef}\n                    rows={2}\n                    value={comment}\n                  />\n                  <div className=\"display-flex-space-between display-flex-center \">\n                    <MarkdownTips className=\"huge-spacer-bottom\" />\n                    <div>\n                      <Button\n                        className=\"huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-submit\"\n                        onClick={this.handleSubmitComment}>\n                        {translate('hotspots.comment.submit')}\n                      </Button>\n                      <ResetButtonLink\n                        className=\"spacer-left huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-cancel\"\n                        onClick={this.handleCloseComment}>\n                        {translate('cancel')}\n                      </ResetButtonLink>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { SourceViewerContext } from '../../../components/SourceViewer/SourceViewerContext';\nimport SourceViewerHeaderSlim from '../../../components/SourceViewer/SourceViewerHeaderSlim';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport SnippetViewer from '../../issues/crossComponentSourceViewer/SnippetViewer';\n\nexport interface HotspotSnippetContainerRendererProps {\n  branchLike?: BranchLike;\n  displayProjectName?: boolean;\n  highlightedSymbols: string[];\n  hotspot: Hotspot;\n  loading: boolean;\n  locations: { [line: number]: T.LinearIssueLocation[] };\n  onExpandBlock: (direction: T.ExpandDirection) => Promise<void>;\n  onSymbolClick: (symbols: string[]) => void;\n  sourceLines: T.SourceLine[];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nconst noop = () => undefined;\n\nexport default function HotspotSnippetContainerRenderer(\n  props: HotspotSnippetContainerRendererProps\n) {\n  const {\n    branchLike,\n    displayProjectName,\n    highlightedSymbols,\n    hotspot,\n    loading,\n    locations,\n    sourceLines,\n    sourceViewerFile\n  } = props;\n\n  return (\n    <>\n      {!loading && sourceLines.length === 0 && (\n        <p className=\"spacer-bottom\">{translate('hotspots.no_associated_lines')}</p>\n      )}\n      <div className=\"bordered big-spacer-bottom\">\n        <SourceViewerHeaderSlim\n          branchLike={branchLike}\n          expandable={false}\n          displayProjectName={displayProjectName}\n          linkToProject={false}\n          loading={loading}\n          onExpand={noop}\n          sourceViewerFile={sourceViewerFile}\n        />\n        <DeferredSpinner loading={loading}>\n          {sourceLines.length > 0 && (\n            <SourceViewerContext.Provider /* Used by LineOptionsPopup */\n              value={{ branchLike, file: sourceViewerFile }}>\n              <SnippetViewer\n                branchLike={branchLike}\n                component={sourceViewerFile}\n                displaySCM={false}\n                expandBlock={(_i, direction) => props.onExpandBlock(direction)}\n                handleCloseIssues={noop}\n                handleOpenIssues={noop}\n                handleSymbolClick={props.onSymbolClick}\n                highlightedLocationMessage={undefined}\n                highlightedSymbols={highlightedSymbols}\n                index={0}\n                issue={hotspot}\n                issuesByLine={{}}\n                lastSnippetOfLastGroup={false}\n                locations={[]}\n                locationsByLine={locations}\n                onIssueChange={noop}\n                onIssuePopupToggle={noop}\n                onLocationSelect={noop}\n                openIssuesByLine={{}}\n                renderDuplicationPopup={noop}\n                snippet={sourceLines}\n              />\n            </SourceViewerContext.Provider>\n          )}\n        </DeferredSpinner>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport BoxedTabs from 'sonar-ui-common/components/controls/BoxedTabs';\nimport Tab from 'sonar-ui-common/components/controls/Tabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Hotspot } from '../../../types/security-hotspots';\n\ninterface Props {\n  hotspot: Hotspot;\n}\n\ninterface State {\n  currentTab: Tab;\n  tabs: Tab[];\n}\n\ninterface Tab {\n  key: TabKeys;\n  label: React.ReactNode;\n  content: string;\n}\n\nexport enum TabKeys {\n  RiskDescription = 'risk',\n  VulnerabilityDescription = 'vulnerability',\n  FixRecommendation = 'fix'\n}\n\nexport default class HotspotViewerTabs extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const tabs = this.computeTabs();\n    this.state = {\n      currentTab: tabs[0],\n      tabs\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.hotspot.key !== prevProps.hotspot.key) {\n      const tabs = this.computeTabs();\n      this.setState({\n        currentTab: tabs[0],\n        tabs\n      });\n    }\n  }\n\n  handleSelectTabs = (tabKey: TabKeys) => {\n    const { tabs } = this.state;\n    const currentTab = tabs.find(tab => tab.key === tabKey)!;\n    this.setState({ currentTab });\n  };\n\n  computeTabs() {\n    const { hotspot } = this.props;\n    return [\n      {\n        key: TabKeys.RiskDescription,\n        label: translate('hotspots.tabs.risk_description'),\n        content: hotspot.rule.riskDescription || ''\n      },\n      {\n        key: TabKeys.VulnerabilityDescription,\n        label: translate('hotspots.tabs.vulnerability_description'),\n        content: hotspot.rule.vulnerabilityDescription || ''\n      },\n      {\n        key: TabKeys.FixRecommendation,\n        label: translate('hotspots.tabs.fix_recommendations'),\n        content: hotspot.rule.fixRecommendations || ''\n      }\n    ].filter(tab => Boolean(tab.content));\n  }\n\n  render() {\n    const { tabs, currentTab } = this.state;\n    if (tabs.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <BoxedTabs onSelect={this.handleSelectTabs} selected={currentTab.key} tabs={tabs} />\n        <div className=\"bordered huge-spacer-bottom\">\n          <div\n            className=\"markdown big-padded\"\n            dangerouslySetInnerHTML={{ __html: sanitize(currentTab.content) }}\n          />\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getSources } from '../../../api/components';\nimport { locationsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport { constructSourceViewerFile } from '../utils';\nimport HotspotSnippetContainerRenderer from './HotspotSnippetContainerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspot: Hotspot;\n}\n\ninterface State {\n  highlightedSymbols: string[];\n  lastLine?: number;\n  loading: boolean;\n  sourceLines: T.SourceLine[];\n}\n\nconst BUFFER_LINES = 5;\nconst EXPAND_BY_LINES = 50;\n\nexport default class HotspotSnippetContainer extends React.Component<Props, State> {\n  mounted = false;\n  state: State = {\n    highlightedSymbols: [],\n    loading: true,\n    sourceLines: []\n  };\n\n  componentWillMount() {\n    this.mounted = true;\n    this.fetchSources();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot.key !== this.props.hotspot.key) {\n      this.fetchSources();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkLastLine(lines: T.SourceLine[], target: number): number | undefined {\n    if (lines.length < 1) {\n      return undefined;\n    }\n    const lastLineReceived = lines[lines.length - 1].line;\n    if (lastLineReceived < target) {\n      return lastLineReceived;\n    }\n    return undefined;\n  }\n\n  async fetchSources() {\n    const {\n      branchLike,\n      hotspot: { component, textRange }\n    } = this.props;\n\n    if (!textRange) {\n      // Hotspot not associated to any loc\n      this.setState({ loading: false, lastLine: undefined, sourceLines: [] });\n      return;\n    }\n\n    const from = Math.max(1, textRange.startLine - BUFFER_LINES);\n    // Add 1 to check for end-of-file:\n    const to = textRange.endLine + BUFFER_LINES + 1;\n\n    this.setState({ loading: true });\n\n    let sourceLines = await getSources({\n      key: component.key,\n      from,\n      to,\n      ...getBranchLikeQuery(branchLike)\n    }).catch(() => [] as T.SourceLine[]);\n\n    if (this.mounted) {\n      const lastLine = this.checkLastLine(sourceLines, to);\n\n      // remove extra sourceline if we didn't reach the end:\n      sourceLines = lastLine ? sourceLines : sourceLines.slice(0, -1);\n      this.setState({ lastLine, loading: false, sourceLines });\n    }\n  }\n\n  handleExpansion = (direction: T.ExpandDirection) => {\n    const { branchLike, hotspot } = this.props;\n    const { sourceLines } = this.state;\n\n    const range =\n      direction === 'up'\n        ? {\n            from: Math.max(1, sourceLines[0].line - EXPAND_BY_LINES),\n            to: sourceLines[0].line - 1\n          }\n        : {\n            from: sourceLines[sourceLines.length - 1].line + 1,\n            // Add 1 to check for end-of-file:\n            to: sourceLines[sourceLines.length - 1].line + EXPAND_BY_LINES + 1\n          };\n\n    return getSources({\n      key: hotspot.component.key,\n      ...range,\n      ...getBranchLikeQuery(branchLike)\n    }).then(additionalLines => {\n      const { lastLine: previousLastLine } = this.state;\n\n      const lastLine =\n        direction === 'down' ? this.checkLastLine(additionalLines, range.to) : previousLastLine;\n\n      let concatSourceLines;\n      if (direction === 'up') {\n        concatSourceLines = additionalLines.concat(sourceLines);\n      } else {\n        // remove extra sourceline if we didn't reach the end:\n        concatSourceLines = sourceLines.concat(\n          lastLine ? additionalLines : additionalLines.slice(0, -1)\n        );\n      }\n\n      this.setState({\n        lastLine,\n        sourceLines: concatSourceLines\n      });\n    });\n  };\n\n  handleSymbolClick = (highlightedSymbols: string[]) => {\n    this.setState({ highlightedSymbols });\n  };\n\n  render() {\n    const { branchLike, component, hotspot } = this.props;\n    const { highlightedSymbols, lastLine, loading, sourceLines } = this.state;\n\n    const locations = locationsByLine([hotspot]);\n\n    const sourceViewerFile = constructSourceViewerFile(hotspot, lastLine);\n\n    return (\n      <HotspotSnippetContainerRenderer\n        branchLike={branchLike}\n        displayProjectName={component.qualifier === ComponentQualifier.Application}\n        highlightedSymbols={highlightedSymbols}\n        hotspot={hotspot}\n        loading={loading}\n        locations={locations}\n        onExpandBlock={this.handleExpansion}\n        onSymbolClick={this.handleSymbolClick}\n        sourceLines={sourceLines}\n        sourceViewerFile={sourceViewerFile}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\n\nexport interface StatusDescriptionProps {\n  statusOption: HotspotStatusOption;\n  showTitle?: boolean;\n}\n\nexport default function StatusDescription(props: StatusDescriptionProps) {\n  const { statusOption, showTitle } = props;\n\n  return (\n    <div>\n      <h3>\n        {showTitle && `${translate('status')}: `}\n        {translate('hotspots.status_option', statusOption)}\n      </h3>\n      <span>{translate('hotspots.status_option', statusOption, 'description')}</span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../../components/common/MarkdownTips';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\nimport StatusDescription from './StatusDescription';\n\nexport interface StatusSelectionRendererProps {\n  selectedStatus: HotspotStatusOption;\n  onStatusChange: (statusOption: HotspotStatusOption) => void;\n\n  comment?: string;\n  onCommentChange: (comment: string) => void;\n\n  onSubmit: () => void;\n\n  loading: boolean;\n  submitDisabled: boolean;\n}\n\nexport default function StatusSelectionRenderer(props: StatusSelectionRendererProps) {\n  const { comment, loading, selectedStatus, submitDisabled } = props;\n\n  const renderOption = (status: HotspotStatusOption) => {\n    return (\n      <Radio\n        checked={selectedStatus === status}\n        className=\"big-spacer-bottom\"\n        onCheck={props.onStatusChange}\n        value={status}>\n        <StatusDescription statusOption={status} />\n      </Radio>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"big-padded\">\n        {renderOption(HotspotStatusOption.TO_REVIEW)}\n        {renderOption(HotspotStatusOption.FIXED)}\n        {renderOption(HotspotStatusOption.SAFE)}\n      </div>\n\n      <hr />\n      <div className=\"big-padded display-flex-column\">\n        <label className=\"text-bold\" htmlFor=\"comment-textarea\">\n          {translate('hotspots.status.add_comment')}\n        </label>\n        <textarea\n          className=\"spacer-top form-field fixed-width spacer-bottom\"\n          id=\"comment-textarea\"\n          onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.onCommentChange(event.currentTarget.value)\n          }\n          rows={4}\n          value={comment}\n        />\n        <MarkdownTips />\n\n        <div className=\"big-spacer-top display-flex-justify-end display-flex-center\">\n          <SubmitButton disabled={submitDisabled || loading} onClick={props.onSubmit}>\n            {translate('hotspots.status.change_status')}\n          </SubmitButton>\n\n          {loading && <i className=\"spacer-left spinner\" />}\n        </div>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setSecurityHotspotStatus } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { Hotspot, HotspotStatusOption } from '../../../../types/security-hotspots';\nimport {\n  getStatusAndResolutionFromStatusOption,\n  getStatusOptionFromStatusAndResolution\n} from '../../utils';\nimport StatusSelectionRenderer from './StatusSelectionRenderer';\n\ninterface Props {\n  hotspot: Hotspot;\n  onStatusOptionChange: (statusOption: HotspotStatusOption) => void;\n}\n\ninterface State {\n  comment?: string;\n  loading: boolean;\n  initialStatus: HotspotStatusOption;\n  selectedStatus: HotspotStatusOption;\n}\n\nexport default class StatusSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    const initialStatus = getStatusOptionFromStatusAndResolution(\n      props.hotspot.status,\n      props.hotspot.resolution\n    );\n\n    this.state = {\n      loading: false,\n      initialStatus,\n      selectedStatus: initialStatus\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleStatusChange = (selectedStatus: HotspotStatusOption) => {\n    this.setState({ selectedStatus });\n  };\n\n  handleCommentChange = (comment: string) => {\n    this.setState({ comment });\n  };\n\n  handleSubmit = () => {\n    const { hotspot } = this.props;\n    const { comment, initialStatus, selectedStatus } = this.state;\n\n    if (selectedStatus && selectedStatus !== initialStatus) {\n      this.setState({ loading: true });\n      setSecurityHotspotStatus(hotspot.key, {\n        ...getStatusAndResolutionFromStatusOption(selectedStatus),\n        comment: comment || undefined\n      })\n        .then(() => {\n          this.setState({ loading: false });\n          this.props.onStatusOptionChange(selectedStatus);\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters(\n              'hotspots.update.success',\n              translate('hotspots.status_option', selectedStatus)\n            )\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const { comment, initialStatus, loading, selectedStatus } = this.state;\n    const submitDisabled = selectedStatus === initialStatus;\n\n    return (\n      <StatusSelectionRenderer\n        comment={comment}\n        loading={loading}\n        onCommentChange={this.handleCommentChange}\n        onStatusChange={this.handleStatusChange}\n        onSubmit={this.handleSubmit}\n        selectedStatus={selectedStatus}\n        submitDisabled={submitDisabled}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot } from '../../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../../utils';\nimport './Status.css';\nimport StatusDescription from './StatusDescription';\nimport StatusSelection from './StatusSelection';\n\nexport interface StatusProps {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onStatusChange: () => void;\n}\n\nexport function Status(props: StatusProps) {\n  const { currentUser, hotspot } = props;\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const statusOption = getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution);\n  const readonly = !hotspot.canChangeStatus || !isLoggedIn(currentUser);\n\n  const trigger = (\n    <div\n      aria-expanded={isOpen}\n      aria-haspopup={true}\n      className={classNames('padded bordered display-flex-column display-flex-justify-center', {\n        readonly\n      })}\n      id=\"status-trigger\"\n      onClick={() => !readonly && setIsOpen(true)}\n      role=\"button\"\n      tabIndex={0}>\n      <div className=\"display-flex-center display-flex-space-between\">\n        {isOpen ? (\n          <span className=\"h3\">{translate('hotspots.status.select_status')}</span>\n        ) : (\n          <StatusDescription showTitle={true} statusOption={statusOption} />\n        )}\n        {!readonly && <ChevronDownIcon className=\"big-spacer-left\" />}\n      </div>\n    </div>\n  );\n\n  const actionableTrigger = (\n    <Toggler\n      closeOnClickOutside={true}\n      closeOnEscape={true}\n      onRequestClose={() => setIsOpen(false)}\n      open={isOpen}\n      overlay={\n        <DropdownOverlay noPadding={true} placement={PopupPlacement.Bottom}>\n          <StatusSelection\n            hotspot={hotspot}\n            onStatusOptionChange={() => {\n              setIsOpen(false);\n              props.onStatusChange();\n            }}\n          />\n        </DropdownOverlay>\n      }>\n      {trigger}\n    </Toggler>\n  );\n\n  return (\n    <div className=\"dropdown\">\n      {readonly ? (\n        <Tooltip overlay={translate('hotspots.status.cannot_change_status')} placement=\"bottom\">\n          {trigger}\n        </Tooltip>\n      ) : (\n        actionableTrigger\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(Status);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentSecurityHotspotsUrl } from '../../../helpers/urls';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport Assignee from './assignee/Assignee';\nimport HotspotReviewHistoryAndComments from './HotspotReviewHistoryAndComments';\nimport HotspotSnippetContainer from './HotspotSnippetContainer';\nimport './HotspotViewer.css';\nimport HotspotViewerTabs from './HotspotViewerTabs';\nimport Status from './status/Status';\n\nexport interface HotspotViewerRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n  onUpdateHotspot: () => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport function HotspotViewerRenderer(props: HotspotViewerRendererProps) {\n  const {\n    branchLike,\n    component,\n    currentUser,\n    hotspot,\n    loading,\n    securityCategories,\n    commentTextRef,\n    commentVisible\n  } = props;\n\n  const permalink = getPathUrlAsString(\n    getComponentSecurityHotspotsUrl(component.key, {\n      ...getBranchLikeQuery(branchLike),\n      hotspots: hotspot?.key\n    }),\n    false\n  );\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {hotspot && (\n        <div className=\"big-padded hotspot-content\">\n          <div className=\"huge-spacer-bottom display-flex-space-between\">\n            <strong className=\"big big-spacer-right\">{hotspot.message}</strong>\n            <div className=\"display-flex-row flex-0\">\n              {isLoggedIn(currentUser) && (\n                <div className=\"dropdown spacer-right flex-1-0-auto\">\n                  <Button onClick={props.onOpenComment}>\n                    {translate('hotspots.comment.open')}\n                  </Button>\n                </div>\n              )}\n              <ClipboardButton className=\"flex-1-0-auto\" copyValue={permalink}>\n                <LinkIcon className=\"spacer-right\" />\n                <span>{translate('hotspots.get_permalink')}</span>\n              </ClipboardButton>\n            </div>\n          </div>\n\n          <div className=\"huge-spacer-bottom display-flex-row\">\n            <div className=\"hotspot-information display-flex-column display-flex-space-between\">\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('category')}</span>\n                <strong className=\"nowrap\">\n                  {securityCategories[hotspot.rule.securityCategory].title}\n                </strong>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('hotspots.risk_exposure')}</span>\n                <div\n                  className={classNames(\n                    'hotspot-risk-badge',\n                    hotspot.rule.vulnerabilityProbability\n                  )}>\n                  {translate('risk_exposure', hotspot.rule.vulnerabilityProbability)}\n                </div>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('assignee')}</span>\n                <div>\n                  <Assignee hotspot={hotspot} onAssigneeChange={props.onUpdateHotspot} />\n                </div>\n              </div>\n            </div>\n            <div className=\"huge-spacer-left\">\n              <Status hotspot={hotspot} onStatusChange={props.onUpdateHotspot} />\n            </div>\n          </div>\n\n          <HotspotSnippetContainer\n            branchLike={branchLike}\n            component={component}\n            hotspot={hotspot}\n          />\n          <HotspotViewerTabs hotspot={hotspot} />\n          <HotspotReviewHistoryAndComments\n            commentTextRef={commentTextRef}\n            commentVisible={commentVisible}\n            currentUser={currentUser}\n            hotspot={hotspot}\n            onCloseComment={props.onCloseComment}\n            onCommentUpdate={props.onUpdateHotspot}\n            onOpenComment={props.onOpenComment}\n          />\n        </div>\n      )}\n    </DeferredSpinner>\n  );\n}\n\nexport default withCurrentUser(HotspotViewerRenderer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSecurityHotspotDetails } from '../../../api/security-hotspots';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotViewerRenderer from './HotspotViewerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspotKey: string;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\ninterface State {\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n}\n\nexport default class HotspotViewer extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.commentTextRef = React.createRef<HTMLTextAreaElement>();\n    this.state = { loading: false, commentVisible: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHotspot();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (prevProps.hotspotKey !== this.props.hotspotKey) {\n      this.fetchHotspot();\n    }\n    if (this.commentTextRef.current && !prevState.commentVisible && this.state.commentVisible) {\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHotspot = () => {\n    this.setState({ loading: true });\n    return getSecurityHotspotDetails(this.props.hotspotKey)\n      .then(hotspot => {\n        if (this.mounted) {\n          this.setState({ hotspot, loading: false });\n        }\n        return hotspot;\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  };\n\n  handleHotspotUpdate = () => {\n    return this.fetchHotspot().then((hotspot?: Hotspot) => {\n      if (hotspot) {\n        return this.props.onUpdateHotspot(hotspot.key);\n      }\n    });\n  };\n\n  handleOpenComment = () => {\n    this.setState({ commentVisible: true });\n    if (this.commentTextRef.current) {\n      // Edge case when the comment is already open and unfocus.\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n    if (this.commentTextRef.current) {\n      scrollToElement(this.commentTextRef.current, {\n        bottomOffset: 100\n      });\n    }\n  };\n\n  handleCloseComment = () => {\n    this.setState({ commentVisible: false });\n  };\n\n  render() {\n    const { branchLike, component, securityCategories } = this.props;\n    const { hotspot, loading, commentVisible } = this.state;\n\n    return (\n      <HotspotViewerRenderer\n        branchLike={branchLike}\n        component={component}\n        commentTextRef={this.commentTextRef}\n        commentVisible={commentVisible}\n        hotspot={hotspot}\n        loading={loading}\n        onCloseComment={this.handleCloseComment}\n        onOpenComment={this.handleOpenComment}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={securityCategories}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport A11ySkipTarget from '../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../components/common/ScreenPositionHelper';\nimport { isBranch } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { HotspotFilters, HotspotStatusFilter, RawHotspot } from '../../types/security-hotspots';\nimport EmptyHotspotsPage from './components/EmptyHotspotsPage';\nimport FilterBar from './components/FilterBar';\nimport HotspotList from './components/HotspotList';\nimport HotspotViewer from './components/HotspotViewer';\nimport './styles.css';\n\nexport interface SecurityHotspotsAppRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspots: RawHotspot[];\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal: number;\n  isStaticListOfHotspots: boolean;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  onShowAllHotspots: () => void;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  selectedHotspot: RawHotspot | undefined;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport default function SecurityHotspotsAppRenderer(props: SecurityHotspotsAppRendererProps) {\n  const {\n    branchLike,\n    component,\n    hotspots,\n    hotspotsReviewedMeasure,\n    hotspotsTotal,\n    isStaticListOfHotspots,\n    loading,\n    loadingMeasure,\n    loadingMore,\n    securityCategories,\n    selectedHotspot,\n    filters\n  } = props;\n\n  const scrollableRef = React.useRef(null);\n\n  React.useEffect(() => {\n    const parent = scrollableRef.current;\n    const element =\n      selectedHotspot && document.querySelector(`[data-hotspot-key=\"${selectedHotspot.key}\"]`);\n    if (parent && element) {\n      scrollToElement(element, { parent, smooth: true, topOffset: 150, bottomOffset: 400 });\n    }\n  }, [selectedHotspot]);\n\n  return (\n    <div id=\"security_hotspots\">\n      <Suggestions suggestions=\"security_hotspots\" />\n      <Helmet title={translate('hotspots.page')} />\n      <A11ySkipTarget anchor=\"security_hotspots_main\" />\n\n      <FilterBar\n        component={component}\n        filters={filters}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        isStaticListOfHotspots={isStaticListOfHotspots}\n        loadingMeasure={loadingMeasure}\n        onBranch={isBranch(branchLike)}\n        onChangeFilters={props.onChangeFilters}\n        onShowAllHotspots={props.onShowAllHotspots}\n      />\n\n      {loading && <DeferredSpinner className=\"huge-spacer-left big-spacer-top\" />}\n\n      {!loading &&\n        (hotspots.length === 0 || !selectedHotspot ? (\n          <EmptyHotspotsPage\n            filtered={\n              filters.assignedToMe ||\n              (isBranch(branchLike) && filters.sinceLeakPeriod) ||\n              filters.status !== HotspotStatusFilter.TO_REVIEW\n            }\n            isStaticListOfHotspots={isStaticListOfHotspots}\n          />\n        ) : (\n          <div className=\"layout-page\">\n            <ScreenPositionHelper className=\"layout-page-side-outer\">\n              {({ top }) => (\n                <div className=\"layout-page-side\" ref={scrollableRef} style={{ top }}>\n                  <div className=\"layout-page-side-inner\">\n                    <HotspotList\n                      hotspots={hotspots}\n                      hotspotsTotal={hotspotsTotal}\n                      isStaticListOfHotspots={isStaticListOfHotspots}\n                      loadingMore={loadingMore}\n                      onHotspotClick={props.onHotspotClick}\n                      onLoadMore={props.onLoadMore}\n                      securityCategories={securityCategories}\n                      selectedHotspot={selectedHotspot}\n                      statusFilter={filters.status}\n                    />\n                  </div>\n                </div>\n              )}\n            </ScreenPositionHelper>\n\n            <div className=\"layout-page-main\">\n              <HotspotViewer\n                branchLike={branchLike}\n                component={component}\n                hotspotKey={selectedHotspot.key}\n                onUpdateHotspot={props.onUpdateHotspot}\n                securityCategories={securityCategories}\n              />\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport * as key from 'keymaster';\nimport { flatMap, range } from 'lodash';\nimport * as React from 'react';\nimport { addSideBarClass, removeSideBarClass } from 'sonar-ui-common/helpers/pages';\nimport { getMeasures } from '../../api/measures';\nimport { getSecurityHotspotList, getSecurityHotspots } from '../../api/security-hotspots';\nimport { withCurrentUser } from '../../components/hoc/withCurrentUser';\nimport { Router } from '../../components/hoc/withRouter';\nimport { getLeakValue } from '../../components/measure/utils';\nimport { getBranchLikeQuery, isPullRequest, isSameBranchLike } from '../../helpers/branch-like';\nimport { getStandards } from '../../helpers/security-standard';\nimport { isLoggedIn } from '../../helpers/users';\nimport { BranchLike } from '../../types/branch-like';\nimport {\n  HotspotFilters,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusFilter,\n  RawHotspot\n} from '../../types/security-hotspots';\nimport SecurityHotspotsAppRenderer from './SecurityHotspotsAppRenderer';\nimport './styles.css';\n\nconst HOTSPOT_KEYMASTER_SCOPE = 'hotspots-list';\nconst PAGE_SIZE = 500;\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  location: Location;\n  router: Router;\n}\n\ninterface State {\n  hotspotKeys?: string[];\n  hotspots: RawHotspot[];\n  hotspotsPageIndex: number;\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal: number;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot | undefined;\n  filters: HotspotFilters;\n}\n\nexport class SecurityHotspotsApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      loadingMeasure: false,\n      loadingMore: false,\n      hotspots: [],\n      hotspotsTotal: 0,\n      hotspotsPageIndex: 1,\n      securityCategories: {},\n      selectedHotspot: undefined,\n      filters: {\n        ...this.constructFiltersFromProps(props),\n        status: HotspotStatusFilter.TO_REVIEW\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addSideBarClass();\n    this.fetchInitialData();\n    this.registerKeyboardEvents();\n  }\n\n  componentDidUpdate(previous: Props) {\n    if (\n      this.props.component.key !== previous.component.key ||\n      this.props.location.query.hotspots !== previous.location.query.hotspots\n    ) {\n      this.fetchInitialData();\n    }\n\n    if (\n      !isSameBranchLike(this.props.branchLike, previous.branchLike) ||\n      isLoggedIn(this.props.currentUser) !== isLoggedIn(previous.currentUser) ||\n      this.props.location.query.assignedToMe !== previous.location.query.assignedToMe ||\n      this.props.location.query.sinceLeakPeriod !== previous.location.query.sinceLeakPeriod\n    ) {\n      this.setState(({ filters }) => ({\n        filters: { ...this.constructFiltersFromProps, ...filters }\n      }));\n    }\n  }\n\n  componentWillUnmount() {\n    removeSideBarClass();\n    this.unregisterKeyboardEvents();\n    this.mounted = false;\n  }\n\n  registerKeyboardEvents() {\n    key.setScope(HOTSPOT_KEYMASTER_SCOPE);\n    key('up', HOTSPOT_KEYMASTER_SCOPE, () => {\n      this.selectNeighboringHotspot(-1);\n      return false;\n    });\n    key('down', HOTSPOT_KEYMASTER_SCOPE, () => {\n      this.selectNeighboringHotspot(+1);\n      return false;\n    });\n  }\n\n  selectNeighboringHotspot = (shift: number) => {\n    this.setState(({ hotspots, selectedHotspot }) => {\n      const index = selectedHotspot && hotspots.findIndex(h => h.key === selectedHotspot.key);\n\n      if (index !== undefined && index > -1) {\n        const newIndex = Math.max(0, Math.min(hotspots.length - 1, index + shift));\n        return {\n          selectedHotspot: hotspots[newIndex]\n        };\n      }\n\n      return { selectedHotspot };\n    });\n  };\n\n  unregisterKeyboardEvents() {\n    key.deleteScope(HOTSPOT_KEYMASTER_SCOPE);\n  }\n\n  constructFiltersFromProps(\n    props: Props\n  ): Pick<HotspotFilters, 'assignedToMe' | 'sinceLeakPeriod'> {\n    return {\n      assignedToMe: props.location.query.assignedToMe === 'true' && isLoggedIn(props.currentUser),\n      sinceLeakPeriod:\n        isPullRequest(props.branchLike) || props.location.query.sinceLeakPeriod === 'true'\n    };\n  }\n\n  handleCallFailure = () => {\n    if (this.mounted) {\n      this.setState({ loading: false, loadingMore: false });\n    }\n  };\n\n  fetchInitialData() {\n    return Promise.all([\n      getStandards(),\n      this.fetchSecurityHotspots(),\n      this.fetchSecurityHotspotsReviewed()\n    ])\n      .then(([{ sonarsourceSecurity }, { hotspots, paging }]) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        const requestedCategory = this.props.location.query.category;\n\n        let selectedHotspot;\n        if (hotspots.length > 0) {\n          const hotspotForCategory = requestedCategory\n            ? hotspots.find(h => h.securityCategory === requestedCategory)\n            : undefined;\n          selectedHotspot = hotspotForCategory ?? hotspots[0];\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsTotal: paging.total,\n          loading: false,\n          securityCategories: sonarsourceSecurity,\n          selectedHotspot\n        });\n      })\n      .catch(this.handleCallFailure);\n  }\n\n  fetchSecurityHotspotsReviewed = () => {\n    const { branchLike, component } = this.props;\n    const { filters } = this.state;\n\n    const reviewedHotspotsMetricKey = filters.sinceLeakPeriod\n      ? 'new_security_hotspots_reviewed'\n      : 'security_hotspots_reviewed';\n\n    this.setState({ loadingMeasure: true });\n    return getMeasures({\n      component: component.key,\n      metricKeys: reviewedHotspotsMetricKey,\n      ...getBranchLikeQuery(branchLike)\n    })\n      .then(measures => {\n        if (!this.mounted) {\n          return;\n        }\n        const measure = measures && measures.length > 0 ? measures[0] : undefined;\n        const hotspotsReviewedMeasure = filters.sinceLeakPeriod\n          ? getLeakValue(measure)\n          : measure?.value;\n\n        this.setState({ hotspotsReviewedMeasure, loadingMeasure: false });\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingMeasure: false });\n        }\n      });\n  };\n\n  fetchSecurityHotspots(page = 1) {\n    const { branchLike, component, location } = this.props;\n    const { filters } = this.state;\n\n    const hotspotKeys = location.query.hotspots\n      ? (location.query.hotspots as string).split(',')\n      : undefined;\n\n    this.setState({ hotspotKeys });\n\n    if (hotspotKeys && hotspotKeys.length > 0) {\n      return getSecurityHotspotList(hotspotKeys, {\n        projectKey: component.key,\n        ...getBranchLikeQuery(branchLike)\n      });\n    }\n\n    const status =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? HotspotStatus.TO_REVIEW\n        : HotspotStatus.REVIEWED;\n\n    const resolution =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? undefined\n        : HotspotResolution[filters.status];\n\n    return getSecurityHotspots({\n      projectKey: component.key,\n      p: page,\n      ps: PAGE_SIZE,\n      status,\n      resolution,\n      onlyMine: filters.assignedToMe,\n      sinceLeakPeriod: filters.sinceLeakPeriod,\n      ...getBranchLikeQuery(branchLike)\n    });\n  }\n\n  reloadSecurityHotspotList = () => {\n    this.setState({ loading: true });\n\n    return this.fetchSecurityHotspots()\n      .then(({ hotspots, paging }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsPageIndex: 1,\n          hotspotsTotal: paging.total,\n          loading: false,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  handleChangeFilters = (changes: Partial<HotspotFilters>) => {\n    this.setState(\n      ({ filters }) => ({ filters: { ...filters, ...changes } }),\n      () => {\n        this.reloadSecurityHotspotList();\n        if (changes.sinceLeakPeriod !== undefined) {\n          this.fetchSecurityHotspotsReviewed();\n        }\n      }\n    );\n  };\n\n  handleHotspotClick = (selectedHotspot: RawHotspot) => this.setState({ selectedHotspot });\n\n  handleHotspotUpdate = (hotspotKey: string) => {\n    const { hotspots, hotspotsPageIndex } = this.state;\n    const index = hotspots.findIndex(h => h.key === hotspotKey);\n\n    return Promise.all(\n      range(hotspotsPageIndex).map(p => this.fetchSecurityHotspots(p + 1 /* pages are 1-indexed */))\n    )\n      .then(hotspotPages => {\n        const allHotspots = flatMap(hotspotPages, 'hotspots');\n\n        const { paging } = hotspotPages[hotspotPages.length - 1];\n\n        const nextHotspot = allHotspots[Math.min(index, allHotspots.length - 1)];\n\n        this.setState({\n          hotspots: allHotspots,\n          hotspotsPageIndex: paging.pageIndex,\n          hotspotsTotal: paging.total,\n          selectedHotspot: nextHotspot\n        });\n      })\n      .then(this.fetchSecurityHotspotsReviewed);\n  };\n\n  handleShowAllHotspots = () => {\n    this.props.router.push({\n      ...this.props.location,\n      query: { ...this.props.location.query, hotspots: undefined }\n    });\n  };\n\n  handleLoadMore = () => {\n    const { hotspots, hotspotsPageIndex: hotspotPages } = this.state;\n\n    this.setState({ loadingMore: true });\n\n    return this.fetchSecurityHotspots(hotspotPages + 1)\n      .then(({ hotspots: additionalHotspots }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots: [...hotspots, ...additionalHotspots],\n          hotspotsPageIndex: hotspotPages + 1,\n          loadingMore: false\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  render() {\n    const { branchLike, component } = this.props;\n    const {\n      hotspotKeys,\n      hotspots,\n      hotspotsReviewedMeasure,\n      hotspotsTotal,\n      loading,\n      loadingMeasure,\n      loadingMore,\n      securityCategories,\n      selectedHotspot,\n      filters\n    } = this.state;\n\n    return (\n      <SecurityHotspotsAppRenderer\n        branchLike={branchLike}\n        component={component}\n        filters={filters}\n        hotspots={hotspots}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        hotspotsTotal={hotspotsTotal}\n        isStaticListOfHotspots={Boolean(hotspotKeys && hotspotKeys.length > 0)}\n        loading={loading}\n        loadingMeasure={loadingMeasure}\n        loadingMore={loadingMore}\n        onChangeFilters={this.handleChangeFilters}\n        onHotspotClick={this.handleHotspotClick}\n        onLoadMore={this.handleLoadMore}\n        onShowAllHotspots={this.handleShowAllHotspots}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={securityCategories}\n        selectedHotspot={selectedHotspot}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(SecurityHotspotsApp);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar HelpIcon_1 = require(\"../icons/HelpIcon\");\nvar theme_1 = require(\"../theme\");\nrequire(\"./HelpTooltip.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nfunction HelpTooltip(props) {\n    var _a = props.tagName, tagName = _a === void 0 ? 'div' : _a;\n    return React.createElement(tagName, { className: classNames('help-tooltip', props.className) }, React.createElement(Tooltip_1.default, { mouseLeaveDelay: 0.25, onShow: props.onShow, overlay: props.overlay, placement: props.placement },\n        React.createElement(\"span\", { className: \"display-inline-flex-center\" }, props.children || (React.createElement(theme_1.ThemeConsumer, null, function (theme) { return React.createElement(HelpIcon_1.default, { fill: theme.colors.gray71, size: 12 }); })))));\n}\nexports.default = HelpTooltip;\n//# sourceMappingURL=HelpTooltip.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nvar qualifierIcons = {\n    app: ApplicationIcon,\n    brc: SubProjectIcon,\n    dev: DeveloperIcon,\n    dir: DirectoryIcon,\n    fil: FileIcon,\n    svw: SubPortfolioIcon,\n    trk: ProjectIcon,\n    uts: UnitTestIcon,\n    vw: PortfolioIcon,\n    cla: UnitTestIcon,\n    dev_prj: ProjectIcon,\n    lib: LibraryIcon,\n    pac: DirectoryIcon,\n};\nfunction QualifierIcon(props) {\n    if (!props.qualifier) {\n        return null;\n    }\n    var qualifier = props.qualifier.toLowerCase();\n    var FoundIcon = qualifierIcons[qualifier];\n    return FoundIcon ? React.createElement(FoundIcon, { className: props.className, fill: props.fill }) : null;\n}\nexports.default = QualifierIcon;\nfunction ApplicationIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction DeveloperIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction DirectoryIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\", style: { fill: fill || theme.colors.orange } }));\n    }));\n}\nfunction FileIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction LibraryIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction PortfolioIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction ProjectIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction SubPortfolioIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction SubProjectIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction UnitTestIcon(_a) {\n    var fill = _a.fill, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({}, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\n//# sourceMappingURL=QualifierIcon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nvar buttons_1 = require(\"./buttons\");\nfunction ListFooter(props) {\n    var className = props.className, count = props.count, loading = props.loading, needReload = props.needReload, total = props.total, _a = props.ready, ready = _a === void 0 ? true : _a;\n    var hasMore = total && total > count;\n    var button;\n    if (needReload && props.reload) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", \"data-test\": \"reload\", disabled: loading, onClick: props.reload }, l10n_1.translate('reload')));\n    }\n    else if (hasMore && props.loadMore) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", disabled: loading, \"data-test\": \"show-more\", onClick: props.loadMore }, l10n_1.translate('show_more')));\n    }\n    return (React.createElement(\"footer\", { className: classNames('spacer-top note text-center', { 'new-loading': !ready }, className) },\n        l10n_1.translateWithParameters('x_of_y_shown', measures_1.formatMeasure(count, 'INT', null), measures_1.formatMeasure(total, 'INT', null)),\n        button,\n        loading && React.createElement(DeferredSpinner_1.default, { className: \"text-bottom spacer-left position-absolute\" })));\n}\nexports.default = ListFooter;\n//# sourceMappingURL=ListFooter.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar measures_1 = require(\"../../helpers/measures\");\nrequire(\"./Level.css\");\nfunction Level(props) {\n    var formatted = measures_1.formatMeasure(props.level, 'LEVEL');\n    var className = classNames(props.className, 'level', 'level-' + props.level, {\n        'level-small': props.small,\n        'level-muted': props.muted,\n    });\n    return (React.createElement(\"span\", { \"aria-label\": props['aria-label'], \"aria-labelledby\": props['aria-labelledby'], className: className }, formatted));\n}\nexports.default = Level;\n//# sourceMappingURL=Level.js.map","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nrequire(\"./Rating.css\");\nfunction Rating(_a) {\n    var className = _a.className, _b = _a.muted, muted = _b === void 0 ? false : _b, _c = _a.small, small = _c === void 0 ? false : _c, value = _a.value, ariaAttrs = __rest(_a, [\"className\", \"muted\", \"small\", \"value\"]);\n    if (value === undefined) {\n        return (React.createElement(\"span\", __assign({ \"aria-label\": l10n_1.translate('metric.no_rating') }, ariaAttrs), \"\\u2013\"));\n    }\n    var formatted = measures_1.formatMeasure(value, 'RATING');\n    return (React.createElement(\"span\", __assign({ \"aria-label\": l10n_1.translateWithParameters('metric.has_rating_X', formatted), className: classNames('rating', \"rating-\" + formatted, { 'rating-small': small, 'rating-muted': muted }, className) }, ariaAttrs), formatted));\n}\nexports.default = Rating;\n//# sourceMappingURL=Rating.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction ChevronDownIcon(_a) {\n    var _b = _a.fill, fill = _b === void 0 ? 'currentColor' : _b, iconProps = __rest(_a, [\"fill\"]);\n    return (React.createElement(Icon_1.default, __assign({}, iconProps),\n        React.createElement(\"path\", { d: \"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\", style: { fill: fill } })));\n}\nexports.default = ChevronDownIcon;\n//# sourceMappingURL=ChevronDownIcon.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Level.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./RadioToggle.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nvar RadioToggle = (function (_super) {\n    __extends(RadioToggle, _super);\n    function RadioToggle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderOption = function (option) {\n            var checked = option.value === _this.props.value;\n            var htmlId = _this.props.name + '__' + option.value;\n            return (React.createElement(\"li\", { key: option.value.toString() },\n                React.createElement(\"input\", { checked: checked, disabled: option.disabled, id: htmlId, name: _this.props.name, onChange: function () { return _this.props.onCheck(option.value); }, type: \"radio\" }),\n                React.createElement(Tooltip_1.default, { overlay: option.tooltip || undefined },\n                    React.createElement(\"label\", { htmlFor: htmlId }, option.label))));\n        };\n        return _this;\n    }\n    RadioToggle.prototype.render = function () {\n        return (React.createElement(\"ul\", { className: classNames('radio-toggle', this.props.className) }, this.props.options.map(this.renderOption)));\n    };\n    RadioToggle.defaultProps = {\n        disabled: false,\n        value: null,\n    };\n    return RadioToggle;\n}(React.PureComponent));\nexports.default = RadioToggle;\n//# sourceMappingURL=RadioToggle.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./RadioToggle.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer;font-weight:600}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./Radio.css\");\nvar Radio = (function (_super) {\n    __extends(Radio, _super);\n    function Radio() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            event.preventDefault();\n            if (!_this.props.disabled) {\n                _this.props.onCheck(_this.props.value);\n            }\n        };\n        return _this;\n    }\n    Radio.prototype.render = function () {\n        var _a = this.props, className = _a.className, checked = _a.checked, children = _a.children, disabled = _a.disabled;\n        return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames('display-inline-flex-center link-radio', className, { disabled: disabled }), href: \"#\", onClick: this.handleClick, role: \"radio\" },\n            React.createElement(\"i\", { className: classNames('icon-radio', 'spacer-right', { 'is-checked': checked }) }),\n            children));\n    };\n    return Radio;\n}(React.PureComponent));\nexports.default = Radio;\n//# sourceMappingURL=Radio.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Radio.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CLASS_SIDEBAR_PAGE = 'sidebar-page';\nvar CLASS_WHITE_PAGE = 'white-page';\nvar CLASS_NO_FOOTER_PAGE = 'no-footer-page';\nfunction addSideBarClass() {\n    toggleBodyClass(CLASS_SIDEBAR_PAGE, true);\n}\nexports.addSideBarClass = addSideBarClass;\nfunction addWhitePageClass() {\n    toggleBodyClass(CLASS_WHITE_PAGE, true);\n}\nexports.addWhitePageClass = addWhitePageClass;\nfunction addNoFooterPageClass() {\n    console.warn('DEPRECATED: addNoFooterPageClass() was deprecated.');\n    toggleBodyClass(CLASS_NO_FOOTER_PAGE, true);\n}\nexports.addNoFooterPageClass = addNoFooterPageClass;\nfunction removeSideBarClass() {\n    toggleBodyClass(CLASS_SIDEBAR_PAGE, false);\n}\nexports.removeSideBarClass = removeSideBarClass;\nfunction removeWhitePageClass() {\n    toggleBodyClass(CLASS_WHITE_PAGE, false);\n}\nexports.removeWhitePageClass = removeWhitePageClass;\nfunction removeNoFooterPageClass() {\n    console.warn('DEPRECATED: removeNoFooterPageClass() was deprecated.');\n    toggleBodyClass(CLASS_NO_FOOTER_PAGE, false);\n}\nexports.removeNoFooterPageClass = removeNoFooterPageClass;\nfunction toggleBodyClass(className, force) {\n    document.body.classList.toggle(className, force);\n    if (document.documentElement) {\n        document.documentElement.classList.toggle(className, force);\n    }\n}\n//# sourceMappingURL=pages.js.map","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-radio{position:relative;display:inline-block;vertical-align:top;width:14px;height:14px;margin:1px;border:1px solid #cdcdcd;border-radius:12px;box-sizing:border-box;transition:border-color .3s ease;flex-shrink:0}.icon-radio:after{position:absolute;top:2px;left:2px;display:block;width:8px;height:8px;border-radius:8px;background-color:#236a97;content:\\\"\\\";opacity:0;transition:opacity .3s ease}.link-radio .icon-radio.is-checked:after{opacity:1}.link-radio{border-bottom:none}.link-radio,.link-radio:not(.disabled):active,.link-radio:not(.disabled):focus,.link-radio:not(.disabled):hover{color:inherit}.link-radio:not(.disabled):hover>.icon-radio{border-color:#4b9fd5}.link-radio.disabled,.link-radio.disabled:hover,.link-radio.disabled label{color:#bbb;cursor:not-allowed}.link-radio.disabled .icon-radio:after{background-color:#ebebeb}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Rating.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar theme_1 = require(\"../theme\");\nvar TabContainer = theme_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n\"])));\nvar baseBorder = function (_a) {\n    var theme = _a.theme;\n    return \"1px solid \" + theme.colors.barBorderColor;\n};\nvar highlightHoverMixin = function (_a) {\n    var theme = _a.theme;\n    return \"\\n  &:hover {\\n    background-color: \" + theme.colors.barBackgroundColorHighlight + \";\\n  }\\n\";\n};\nvar StyledTab = theme_1.styled.button(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  position: relative;\\n  background-color: \", \";\\n  border-top: \", \";\\n  border-left: \", \";\\n  border-right: none;\\n  border-bottom: none;\\n  margin-bottom: -1px;\\n  min-width: 128px;\\n  min-height: 56px;\\n  \", \"\\n  outline: 0;\\n  padding: calc(2 * \", \");\\n\\n  \", \"\\n\\n  &:last-child {\\n    border-right: \", \";\\n  }\\n\"], [\"\\n  position: relative;\\n  background-color: \", \";\\n  border-top: \", \";\\n  border-left: \", \";\\n  border-right: none;\\n  border-bottom: none;\\n  margin-bottom: -1px;\\n  min-width: 128px;\\n  min-height: 56px;\\n  \", \"\\n  outline: 0;\\n  padding: calc(2 * \", \");\\n\\n  \", \"\\n\\n  &:last-child {\\n    border-right: \", \";\\n  }\\n\"])), function (props) { return (props.active ? 'white' : props.theme.colors.barBackgroundColor); }, baseBorder, baseBorder, function (props) { return !props.active && 'cursor: pointer;'; }, theme_1.themeSize('gridSize'), function (props) { return (!props.active ? highlightHoverMixin : null); }, baseBorder);\nvar ActiveBorder = theme_1.styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: \", \";\\n  background-color: \", \";\\n  height: 3px;\\n  width: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: -1px;\\n\"], [\"\\n  display: \", \";\\n  background-color: \", \";\\n  height: 3px;\\n  width: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: -1px;\\n\"])), function (props) { return (props.active ? 'block' : 'none'); }, theme_1.themeColor('blue'));\nfunction BoxedTabs(props) {\n    var className = props.className, tabs = props.tabs, selected = props.selected;\n    return (React.createElement(TabContainer, { className: className }, tabs.map(function (_a, i) {\n        var key = _a.key, label = _a.label;\n        return (React.createElement(StyledTab, { active: selected === key, key: i, onClick: function () { return selected !== key && props.onSelect(key); }, type: \"button\" },\n            React.createElement(ActiveBorder, { active: selected === key }),\n            label));\n    })));\n}\nexports.default = BoxedTabs;\nvar templateObject_1, templateObject_2, templateObject_3;\n//# sourceMappingURL=BoxedTabs.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n"],"sourceRoot":""}