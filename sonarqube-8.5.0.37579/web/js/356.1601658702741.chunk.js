(window.webpackJsonp=window.webpackJsonp||[]).push([[356],{1171:function(e,t,a){var n=a(837),r=a(750),i=a(683),o=a(779),s=a(792),c=a(1026),l=o((function(e,t){var a=c(t);return s(a)&&(a=void 0),s(e)?n(e,r(t,1,s,!0),i(a,2)):[]}));e.exports=l},2226:function(e,t,a){"use strict";a.r(t),a.d(t,"PullRequestOverview",(function(){return A}));var n=a(760),r=a.n(n),i=a(1171),o=a.n(i),s=a(660),c=a(13),l=a(671),m=a(673),u=a.n(m),d=a(672),p=a(176),v=a(736),f=a(881),h=a(676),b=a(697),g=a(817),y=a(674),w=a(993),E=a(1483),N=a(1484),O=a(1482),_=a(1506),j=(a(1481),a(979)),k=a(669);var x=c.memo((function(e){var t=e.className,a=e.measures,n=e.type,r=Object(j.i)(n),i=Object(b.findMeasure)(a,r);return i&&void 0!==i.value?c.createElement("div",{className:s(t,"display-flex-center")},c.createElement("span",{className:"huge"},Object(k.formatMeasure)(i.value,"PERCENT")),c.createElement("span",{className:"label flex-1 spacer-left text-right"},Object(p.translate)("component_measures.facet_category.overall_category.estimated"))):null})),D=a(668),q=a(665),B=a(721),C=a.n(B),M=a(690),R=a(670);var L,S=c.memo((function(e){var t=e.component,a=e.level,n="OK"===a,r=void 0===t.qualityGate?Object(R.x)():Object(R.w)(t.qualityGate.key);return c.createElement("div",{className:s("overview-quality-gate-badge-large small",{failed:!n,success:n})},c.createElement("div",{className:"display-flex-center"},c.createElement("span",null,Object(p.translate)("overview.on_new_code_long")),c.createElement(u.a,{className:"little-spacer-left",overlay:c.createElement(D.FormattedMessage,{defaultMessage:Object(p.translate)("overview.quality_gate.conditions_on_new_code"),id:"overview.quality_gate.conditions_on_new_code",values:{link:c.createElement(q.Link,{to:r},Object(p.translate)("overview.quality_gate"))}})},c.createElement(C.a,{fill:M.colors.transparentWhite,size:12}))),void 0!==a&&c.createElement("h3",{className:"huge-spacer-top huge"},Object(p.translate)("metric.level",a)))})),P=(L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),W=function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)n[r]=i[o];return n},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1,measures:[]},t.conditionsHaveChanged=function(e){var a,n,r=null!==(a=e.conditions)&&void 0!==a?a:[],i=null!==(n=t.props.conditions)&&void 0!==n?n:[],s=o()(r.filter((function(e){return"ERROR"===e.level})),i.filter((function(e){return"ERROR"===e.level})),(function(e){return e.metric}));return void 0===e.conditions&&void 0!==t.props.conditions||s.length>0},t.fetchBranchStatusData=function(){var e=t.props,a=e.branchLike,n=e.component.key;t.props.fetchBranchStatus(a,n)},t.fetchBranchData=function(){var e=t.props,a=e.branchLike,n=e.component.key,i=e.conditions;t.setState({loading:!0});var o=void 0!==i?r()(W(j.d,i.filter((function(e){return"OK"!==e.level})).map((function(e){return e.metric})))):j.d;Object(f.f)(n,o,Object(h.d)(a)).then((function(e){var a=e.component,n=e.metrics;t.mounted&&a.measures&&t.setState({loading:!1,measures:Object(b.enhanceMeasuresWithMetrics)(a.measures||[],n)})}),(function(){t.mounted&&t.setState({loading:!1})}))},t}return P(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,void 0===this.props.conditions?this.fetchBranchStatusData():this.fetchBranchData()},t.prototype.componentDidUpdate=function(e){this.conditionsHaveChanged(e)&&this.fetchBranchData()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.branchLike,a=e.component,n=e.conditions,r=e.ignoredConditions,i=e.status,o=this.state,l=o.loading,m=o.measures;if(l)return c.createElement("div",{className:"page page-limited"},c.createElement("i",{className:"spinner"}));if(void 0===n)return null;var f=n.filter((function(e){return"ERROR"===e.level})).map((function(e){return Object(b.enhanceConditionWithMeasure)(e,m)})).filter(v.isDefined);return c.createElement("div",{className:"page page-limited"},c.createElement("div",{className:s("pr-overview",{"has-conditions":f.length>0})},r&&c.createElement(d.Alert,{className:"big-spacer-bottom",display:"inline",variant:"info"},c.createElement("span",{className:"text-middle"},Object(p.translate)("overview.quality_gate.ignored_conditions")),c.createElement(u.a,{className:"spacer-left",overlay:Object(p.translate)("overview.quality_gate.ignored_conditions.tooltip")})),c.createElement("div",{className:"display-flex-row"},c.createElement("div",{className:"big-spacer-right"},c.createElement("h2",{className:"overview-panel-title spacer-bottom small display-inline-flex-center"},Object(p.translate)("overview.quality_gate"),c.createElement(u.a,{className:"little-spacer-left",overlay:c.createElement("div",{className:"big-padded-top big-padded-bottom"},Object(p.translate)("overview.quality_gate.help"))})),c.createElement(S,{component:a,level:i})),f.length>0&&c.createElement("div",{className:"pr-overview-failed-conditions big-spacer-right"},c.createElement("h2",{className:"overview-panel-title spacer-bottom small"},Object(p.translate)("overview.failed_conditions")),c.createElement(_.b,{branchLike:t,collapsible:!0,component:a,failedConditions:f})),c.createElement("div",{className:"flex-1"},c.createElement("h2",{className:"overview-panel-title spacer-bottom small"},Object(p.translate)("overview.measures")),c.createElement("div",{className:"overview-panel-content"},[w.b.Bug,w.b.Vulnerability,w.b.SecurityHotspot,w.b.CodeSmell].map((function(e){return c.createElement("div",{className:"overview-measures-row display-flex-row",key:e},c.createElement("div",{className:"overview-panel-big-padded flex-1 small display-flex-center"},c.createElement(E.a,{branchLike:t,component:a,measures:m,type:e,useDiffMetric:!0})),c.createElement("div",{className:"overview-panel-big-padded overview-measures-aside display-flex-center"},c.createElement(N.a,{branchLike:t,component:a,measures:m,type:e,useDiffMetric:!0})))})),[j.c.Coverage,j.c.Duplication].map((function(e){return c.createElement("div",{className:"overview-measures-row display-flex-row",key:e},c.createElement("div",{className:"overview-panel-big-padded flex-1 small display-flex-center"},c.createElement(O.a,{branchLike:t,component:a,measures:m,type:e,useDiffMetric:!0})),c.createElement(x,{className:"overview-panel-big-padded overview-measures-aside text-right overview-measures-emphasis",measures:m,type:e}))})))))))},t}(c.PureComponent),H={fetchBranchStatus:g.c};t.default=Object(l.connect)((function(e,t){var a=t.branchLike,n=t.component,r=Object(y.getBranchStatusByBranchLike)(e,n.key,a);return{conditions:r.conditions,ignoredConditions:r.ignoredConditions,status:r.status}}),H)(A)}}]);
//# sourceMappingURL=356.1601658702741.chunk.js.map