(window.webpackJsonp=window.webpackJsonp||[]).push([[320],{2229:function(t,e,n){"use strict";n.r(e);var o,r=n(13),a=n(681),i=n(176),s=n(822),l=n(704),u=n(684),c=n(785),p=n(956),d=n(693),f=n.n(d),g=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mounted=!1,e.state={loading:!1},e.stopLoading=function(){e.mounted&&e.setState({loading:!1})},e.handleChange=function(t){var n=e.props.gate,o=null==n&&null!=t.value,r=null!=n&&null==t.value,a=null!=n&&n.id!==t.value;(o||r||a)&&(e.setState({loading:!0}),e.props.onChange(n&&n.id,t.value).then(e.stopLoading,e.stopLoading))},e.renderGateName=function(t){return t.isDefault?r.createElement("span",null,r.createElement("strong",null,Object(i.translate)("default")),": ",t.label):r.createElement("span",null,t.label)},e}return g(e,t),e.prototype.componentDidMount=function(){this.mounted=!0},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.renderSelect=function(){var t=this.props,e=t.gate,n=t.allGates.map((function(t){return{value:String(t.id),label:t.name,isDefault:t.isDefault}}));return r.createElement(f.a,{clearable:!1,disabled:this.state.loading,onChange:this.handleChange,optionRenderer:this.renderGateName,options:n,style:{width:300},value:e&&String(e.id),valueRenderer:this.renderGateName})},e.prototype.render=function(){return r.createElement("div",null,this.renderSelect(),this.state.loading&&r.createElement("i",{className:"spinner spacer-left"}))},e}(r.PureComponent),m=n(673),y=n.n(m);function v(){return r.createElement("header",{className:"page-header"},r.createElement("div",{className:"page-title display-flex-center"},r.createElement("h1",null,Object(i.translate)("project_quality_gate.page")),r.createElement(y.a,{className:"spacer-left",overlay:r.createElement("div",{className:"big-padded-top big-padded-bottom"},Object(i.translate)("quality_gates.projects.help"))})),r.createElement("div",{className:"page-description"},Object(i.translate)("project_quality_gate.page.description")))}var _=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mounted=!1,e.state={loading:!0},e.handleChangeGate=function(t,n){var o=e.state.allGates;if(!t&&!n||!o)return Promise.resolve();var r=e.props.component,a={gateId:n||t,organization:r.organization,projectKey:r.key};return(n?Object(s.a)(a):Object(s.g)(a)).then((function(){if(e.mounted)if(Object(c.a)(Object(i.translate)("project_quality_gate.successfully_updated")),n){var t=o.find((function(t){return t.id===n}));t&&(e.setState({gate:t}),e.props.onComponentChange({qualityGate:t}))}else e.setState({gate:void 0})}))},e}return _(e,t),e.prototype.componentDidMount=function(){this.mounted=!0,this.checkPermissions()?this.fetchQualityGates():Object(p.a)()},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.checkPermissions=function(){var t=this.props.component.configuration;return!!(t&&t.showQualityGates)},e.prototype.fetchQualityGates=function(){var t=this,e=this.props.component;this.setState({loading:!0}),Promise.all([Object(s.i)({organization:e.organization}),Object(s.k)({organization:e.organization,project:e.key})]).then((function(e){var n=e[0],o=e[1];t.mounted&&t.setState({allGates:null==n?void 0:n.qualitygates,gate:o,loading:!1})}),(function(){t.mounted&&t.setState({loading:!1})}))},e.prototype.render=function(){if(!this.checkPermissions())return null;var t=this.state,e=t.allGates,n=t.gate,o=t.loading;return r.createElement("div",{className:"page page-limited",id:"project-quality-gate"},r.createElement(u.a,{suggestions:"project_quality_gate"}),r.createElement(a.a,{defer:!1,title:Object(i.translate)("project_quality_gate.page")}),r.createElement(l.a,{anchor:"qg_main"}),r.createElement(v,null),o?r.createElement("i",{className:"spinner"}):e&&r.createElement(h,{allGates:e,gate:n,onChange:this.handleChangeGate}))},e}(r.PureComponent);e.default=b},673:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(660),r=n(13),a=n(721),i=n(687);n(688);var s=n(667);e.default=function(t){var e=t.tagName,n=void 0===e?"div":e;return r.createElement(n,{className:o("help-tooltip",t.className)},r.createElement(s.default,{mouseLeaveDelay:.25,onShow:t.onShow,overlay:t.overlay,placement:t.placement},r.createElement("span",{className:"display-inline-flex-center"},t.children||r.createElement(i.ThemeConsumer,null,(function(t){return r.createElement(a.default,{fill:t.colors.gray71,size:12})})))))}},684:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o,r=n(13),a=n(716),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function s(t){var e=t.suggestions;return r.createElement(a.a.Consumer,null,(function(t){var n=t.addSuggestions,o=t.removeSuggestions;return r.createElement(l,{addSuggestions:n,removeSuggestions:o,suggestions:e})}))}var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){this.props.addSuggestions(this.props.suggestions)},e.prototype.componentDidUpdate=function(t){t.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(t.suggestions))},e.prototype.componentWillUnmount=function(){this.props.removeSuggestions(this.props.suggestions)},e.prototype.render=function(){return null},e}(r.PureComponent)},688:function(t,e,n){var o=n(662),r=n(689);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1},i=(o(r,a),r.locals?r.locals:{});t.exports=i},689:function(t,e,n){(e=n(663)(!1)).push([t.i,".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}",""]),t.exports=e},704:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o,r=n(13),a=n(176),i=n(751),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function u(t){return r.createElement(i.a.Consumer,null,(function(e){var n=e.addA11ySkipLink,o=e.removeA11ySkipLink;return r.createElement(c,l({addA11ySkipLink:n,removeA11ySkipLink:o},t))}))}var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getLink=function(){var t=e.props,n=t.anchor,o=t.label;return{key:n,label:void 0===o?Object(a.translate)("skip_to_content"):o,weight:t.weight}},e}return s(e,t),e.prototype.componentDidMount=function(){this.props.addA11ySkipLink(this.getLink())},e.prototype.componentWillUnmount=function(){this.props.removeA11ySkipLink(this.getLink())},e.prototype.render=function(){var t=this.props.anchor;return r.createElement("span",{id:"a11y_target__"+t})},e}(r.PureComponent)},785:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(742),r=n(741);function a(t){Object(r.default)().dispatch(o.b(t))}},956:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(182),r=n.n(o),a=n(894),i=n(741);function s(){var t=Object(i.default)(),e=r()(),n=window.location.pathname+window.location.search+window.location.hash;t.dispatch(Object(a.c)()),e.replace({pathname:"/sessions/new",query:{return_to:n}})}}}]);
//# sourceMappingURL=320.1601658702741.chunk.js.map