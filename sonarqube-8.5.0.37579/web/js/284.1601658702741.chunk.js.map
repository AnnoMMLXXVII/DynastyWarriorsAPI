{"version":3,"sources":["webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/apps/issues/sidebar/StandardFacet.tsx","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css?3321","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx","webpack:///./src/main/js/components/facet/ListStyleFacetFooter.tsx","webpack:///./src/main/js/components/facet/ListStyleFacet.tsx","webpack:///./src/main/js/components/controls/DateInput.tsx","webpack:///./src/main/js/components/controls/DayPicker.css?d7e1","webpack:///./src/main/js/components/controls/DayPicker.css","webpack:///./src/main/js/components/controls/styles.css?5633","webpack:///./src/main/js/components/controls/styles.css","webpack:///./src/main/js/components/facet/MultipleSelectionHint.tsx","webpack:///./src/main/js/components/search-navigator.css?9a2e","webpack:///./src/main/js/components/search-navigator.css","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/components/common/DocumentationTooltip.tsx"],"names":["BuiltInQualityProfileBadge","className","tooltip","badge","overlay","FiltersHeader","displayReset","onReset","id","onClick","mounted","property","state","standards","owaspTop10","sansTop25","cwe","sonarsourceSecurity","loadStandards","then","setState","getValues","props","map","item","handleHeaderClick","onToggle","handleOwaspTop10HeaderClick","handleSansTop25HeaderClick","handleSonarSourceSecurityHeaderClick","handleClear","onChange","handleItemClick","prop","itemValue","multiple","items","newValue","includes","length","handleOwaspTop10ItemClick","handleSansTop25ItemClick","handleSonarSourceSecurityItemClick","handleCWESearch","query","Promise","resolve","results","Object","keys","filter","toLowerCase","loadCWESearchResultCount","categories","loadSearchResultCount","renderList","statsProp","valuesProp","renderName","stats","values","key","renderFacetItemsList","renderTooltip","getStat","category","undefined","active","name","stat","value","renderHint","options","componentDidMount","this","open","componentDidUpdate","prevProps","componentWillUnmount","renderOwaspTop10List","renderOwaspTop10Hint","renderSansTop25List","renderSansTop25Hint","renderSonarSourceSecurityList","renderSonarSourceSecurityHint","renderSubFacets","fetching","fetchingSonarSourceSecurity","sonarsourceSecurityOpen","fetchingOwaspTop10","owaspTop10Open","fetchingSansTop25","sansTop25Open","facetHeader","fetchingCwe","getFacetItemText","getSearchResultKey","getSearchResultText","onSearch","cweOpen","renderFacetItem","renderSearchResult","searchPlaceholder","cweStats","render","onClear","api","content","__esModule","default","module","i","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","PageCounter","current","label","total","TypeHelper","type","getParams","activation","rule","params","param","defaultValue","getQualityProfilesWithDepth","profiles","profile","isBuiltIn","actions","edit","language","lang","depth","handleFormSubmit","event","preventDefault","submitting","data","organization","severity","onDone","onClose","handleParameterChange","handleProfileChange","handleSeverityChange","renderSeverityOption","profilesWithDepth","isCustomRule","templateKey","activeInAllProfiles","isUpdateMode","contentLabel","modalHeader","onRequestClose","size","onSubmit","variant","clearable","disabled","repeat","optionRenderer","searchable","valueRenderer","title","placeholder","rows","dangerouslySetInnerHTML","__html","htmlDesc","hasPrivateAccess","currentUser","userOrganizations","Boolean","subscription","isPaidOrganization","admin","some","org","isCurrentUserMemberOf","handleProfileSelect","selectedProfiles","option","getAvailableQualityProfiles","referencedProfiles","languages","processResponse","response","failed","succeeded","sendRequests","looper","method","action","targetKey","finished","renderResult","result","profileKey","Alert","renderProfileSelect","languageName","multi","availableProfiles","header","htmlFor","modal","getSelectedProfile","closeModal","handleActivateClick","currentTarget","blur","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","overlayPlacement","BottomLeft","href","singleSelection","renderItem","renderTextName","FacetItem","halfWidth","FacetBox","FacetHeader","disabledHelper","children","FacetItemsList","renderFooter","defaultRenderName","SeverityHelper","availableSince","handlePeriodChange","date","intl","formatDate","DateInput","getLanguageName","languageKey","installedLanguages","find","l","handleSearch","getAllPossibleOptions","paging","pageIndex","pageSize","term","ListStyleFacet","minSearchLength","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","getTooltip","base","renderActivation","isCompare","role","tabIndex","DocumentationTooltip","links","referencedLanguages","repositoryKey","repository","referencedRepositories","facetProps","status","ps","q","tags","handleSelect","getTagName","tag","renderTag","fill","gray60","handleChange","changes","template","Array","isArray","String","FacetsList","languageDisabled","hideProfileFacet","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFilterChange","onFacetToggle","openFacets","facets","types","repositories","severities","statuses","StandardFacet","owaspTop10Stats","sansTop25Stats","sonarsourceSecurityStats","organizationsEnabled","PageActions","Shortcuts","loading","onReload","selectedIndex","prepareRequest","customRule","templateRule","csv","join","ruleData","markdown_description","description","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","handleNameChange","keyModifiedByUser","replace","handleKeyChange","handleDescriptionChange","handleTypeChange","handleStatusChange","renderNameField","autoFocus","required","renderKeyField","renderDescriptionField","MarkdownTips","renderTypeOption","renderTypeField","renderSeverityField","renderStatusField","renderParameterField","mdDesc","submit","handleClick","handleModalClose","handleDone","fetchRules","f","ruleDetails","rules","handleRuleCreate","handleRuleDelete","ruleKey","renderRule","to","canChange","confirmButtonText","confirmData","isDestructive","modalBody","onConfirm","fetchIssues","resolved","facet","components","projects","project","component","count","renderTotal","path","totalItem","appState","branchesEnabled","renderProject","colSpan","withAppState","renderParameter","handleButtonClick","handleCloseModal","buttonText","ActivationFormModal","RuleInheritanceIcon","red","baseFontColor","height","version","viewBox","width","xmlSpace","xmlnsXlink","other","d","style","fillRule","handleActivate","handleDeactivate","onDeactivate","handleRevert","reset","onActivate","renderInheritedProfile","parentName","profilePath","inherit","renderSeverity","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","parentKey","isTemplate","activations","qProfile","x","canActivate","InstanceMessage","message","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","catch","handleDelete","onDelete","allowCustomRules","canWrite","hideQualityProfiles","isCustom","isEditable","RuleDetailsMeta","onTagsChange","RuleDetailsDescription","handleNameClick","isLeftClickEvent","button","metaKey","altKey","ctrlKey","shiftKey","onOpen","isLoggedIn","canCopy","copy","renderDeactivateButton","overlayTranslationKey","allTags","sysTags","langName","TagsList","allowUpdate","SimilarRulesFilter","attachShortcuts","selectPreviousRule","selectNextRule","openSelectedRule","handleBack","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","s","stopLoading","fetchInitialData","all","fetchQualityProfiles","fetchFirstRules","makeFetchRequest","rawActives","entries","parseActives","rawFacets","rawFacet","rawValue","val","parseFacets","openRule","usingPermalink","fetchMoreRules","nextPage","fetchFacet","getSelectedIndex","index","findIndex","getRulePath","pathname","router","closeRule","scrollToSelectedRule","smooth","element","document","querySelector","topOffset","bottomOffset","getRuleActivation","closeFacet","handleRuleOpen","handleReset","handleFilterChange","handleFacetToggle","willOpenProperty","newState","handleReload","pickRuleAround","handleRuleActivate","handleRuleDeactivate","newRule","searchQuery","isFiltered","renderBulkButton","componentWillReceiveProps","nextProps","prevState","Suggestions","suggestions","defer","ScreenPositionHelper","top","A11ySkipTarget","anchor","weight","minLength","loadMore","ready","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","searchQualityProfiles","parameters","getQualityProfile","compareToSonarWay","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","qualityProfile","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","encodeURIComponent","getQualityProfileExporterUrl","exporterKey","getImporters","r","getExporters","getProfileChangelog","since","page","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","deactivateRule","renderHelper","helper","renderValueIndicator","showClearButton","renderValue","defaultProps","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","addEventListener","removeEventListener","ref","handleShowMoreClick","showMore","handleShowLessClick","showLess","hasMore","allShown","searching","searchResultsCounts","showFullList","onItemClick","stopSearching","search","loadCountsForSearchResults","maxResults","searchMaxResults","searchResults","searchPaging","searchMore","resultsToLoad","hideFullList","maxInitialItems","sortedItems","getSortedItems","limitedList","slice","selectedBelowLimit","mightHaveMoreResults","maxItems","formatFacetStat","renderSearch","renderSearchResults","loadingResults","showList","MultipleSelectionHint","DayPicker","focus","input","openCalendar","handleResetClick","closeCalendar","currentMonth","Date","lastHovered","handleDayClick","day","modifiers","handleDayMouseEnter","handleCurrentMonthChange","handleCurrentYearChange","handlePreviousMonthClick","handleNextMonthClick","highlightFrom","highlightTo","minDate","after","maxDate","months","years","getFullYear","selectedDays","lastHoveredOrValue","highlighted","from","weekdaysLong","weekdaysShort","onClickOutside","InputWrapper","inputClassName","innerRef","node","onFocus","readOnly","iconProps","month","getMonth","year","captionElement","NullComponent","disabledDays","before","firstDayOfWeek","navbarElement","onDayClick","onDayMouseEnter","formattedValue","navigator","userAgent","indexOf","getStandards","renderCWECategory","record","renderOwaspTop10Category","withPrefix","addPrefix","toUpperCase","renderSansTop25Category","renderSonarSourceSecurityCategory","prefix","rel","target"],"mappings":"6FAAA,kFA6Bc,SAAUA,EAA2B,G,IAAEC,EAAA,EAAAA,UAAW,IAAAC,eAAA,IAAU,GAAV,EACxDC,EACJ,uBAAKF,UAAW,EAAW,mBAAoBA,IAC5C,oBAAU,8BAIf,OAAIC,EACK,gBAAC,IAAO,CAACE,QAAS,oBAAU,0CAA2CD,GAGzEA,I,kCCxCT,gEA4Bc,SAAUE,EAAc,G,IAAEC,EAAA,EAAAA,aAAcC,EAAA,EAAAA,QACpD,OACE,uBAAKN,UAAU,mCACZK,GACC,uBAAKL,UAAU,cACb,gBAAC,SAAM,CAACA,UAAU,aAAaO,GAAG,iCAAiCC,QAASF,GACzE,oBAAU,uBAKjB,0BAAK,oBAAU,e,4qBC8BrB,yE,OACE,EAAAG,SAAU,EACV,EAAAC,SAAW,IACX,EAAAC,MAAe,CACbC,UAAW,CAAEC,WAAY,GAAIC,UAAW,GAAIC,IAAK,GAAIC,oBAAqB,KA4B5E,EAAAC,cAAgB,WACd,cAAeC,MACb,SAAC,G,IAAEL,EAAA,EAAAA,WAAYC,EAAA,EAAAA,UAAWC,EAAA,EAAAA,IAAKC,EAAA,EAAAA,oBACzB,EAAKP,SACP,EAAKU,SAAS,CAAEP,UAAW,CAAEC,WAAU,EAAEC,UAAS,EAAEC,IAAG,EAAEC,oBAAmB,QAGhF,gBAIJ,EAAAI,UAAY,WACV,SACK,EAAKC,MAAML,oBAAoBM,KAAI,SAAAC,GACpC,mBAAkC,EAAKZ,MAAMC,UAAWW,GAAM,MAE7D,EAAKF,MAAMR,WAAWS,KAAI,SAAAC,GAC3B,mBAAyB,EAAKZ,MAAMC,UAAWW,GAAM,MAEpD,EAAKF,MAAMP,UAAUQ,KAAI,SAAAC,GAC1B,mBAAwB,EAAKZ,MAAMC,UAAWW,GAAM,MAEnD,EAAKF,MAAMN,IAAIO,KAAI,SAAAC,GAAQ,mBAAkB,EAAKZ,MAAMC,UAA7B,QAIlC,EAAAY,kBAAoB,WAClB,EAAKH,MAAMI,SAAS,EAAKf,WAG3B,EAAAgB,4BAA8B,WAC5B,EAAKL,MAAMI,SAAS,eAGtB,EAAAE,2BAA6B,WAC3B,EAAKN,MAAMI,SAAS,cAGtB,EAAAG,qCAAuC,WACrC,EAAKP,MAAMI,SAAS,wBAGtB,EAAAI,YAAc,W,MACZ,EAAKR,MAAMS,WAAQ,MAChB,EAAKpB,UAAW,GACjB,EAAAG,WAAY,GACZ,EAAAC,UAAW,GACX,EAAAC,IAAK,GACL,EAAAC,oBAAqB,GACrB,KAGJ,EAAAe,gBAAkB,SAACC,EAAkBC,EAAmBC,G,QAChDC,EAAQ,EAAKd,MAAMW,GACzB,GAAIE,EAAU,CACZ,IAAME,EAAW,IACfD,EAAME,SAASJ,GAAa,IAAQE,EAAOF,GAAY,EAAKE,EAAK,CAAEF,KAErE,EAAKZ,MAAMS,WAAQ,MAAIE,GAAOI,EAAQ,SAEtC,EAAKf,MAAMS,WAAQ,MAChBE,GAAOG,EAAME,SAASJ,IAAcE,EAAMG,OAAS,EAAI,GAAK,CAACL,GAC9D,KAIN,EAAAM,0BAA4B,SAACN,EAAmBC,GAC9C,EAAKH,gBAAgB,aAAcE,EAAWC,IAGhD,EAAAM,yBAA2B,SAACP,EAAmBC,GAC7C,EAAKH,gBAAgB,YAAaE,EAAWC,IAG/C,EAAAO,mCAAqC,SAACR,EAAmBC,GACvD,EAAKH,gBAAgB,sBAAuBE,EAAWC,IAGzD,EAAAQ,gBAAkB,SAACC,GACjB,OAAOC,QAAQC,QAAQ,CACrBC,QAASC,OAAOC,KAAK,EAAKrC,MAAMC,UAAUG,KAAKkC,QAAO,SAAAlC,GACpD,mBAAkB,EAAKJ,MAAMC,UAAWG,GACrCmC,cACAb,SAASM,EAAMO,qBAKxB,EAAAC,yBAA2B,SAACC,GAClB,IAAAC,EAAA,QAAAA,sBACR,OAAOA,EACHA,EAAsB,MAAO,CAAEtC,IAAKqC,IACpCR,QAAQC,QAAQ,KAGtB,EAAAS,WAAa,SACXC,EACAC,EACAC,EACAjD,GAEA,IAAMkD,EAAQ,EAAKrC,MAAMkC,GACnBI,EAAS,EAAKtC,MAAMmC,GAC1B,IAAKE,EACH,OAAO,KAET,IAAMN,EAAa,IAAOL,OAAOC,KAAKU,IAAQ,SAAAE,GAAO,OAACF,EAAD,MACrD,OAAO,EAAKG,qBAAqBH,EAAOC,EAAQP,EAAYK,EAAYA,EAAYjD,IAItF,EAAAqD,qBAAuB,SACrBH,EACAC,EACAP,EACAK,EACAK,EACAtD,GAEA,IAAK4C,EAAWd,OACd,OACE,uBAAKtC,UAAU,kDACZ,oBAAU,eAKjB,IAAM+D,EAAU,SAACC,GACf,OAAON,EAAQA,EAAMM,QAAYC,GAGnC,OACE,gBAAC,IAAc,KACZb,EAAW9B,KAAI,SAAA0C,GAAY,OAC1B,gBAAC,IAAS,CACRE,OAAQP,EAAOtB,SAAS2B,GACxBJ,IAAKI,EACLG,KAAMV,EAAW,EAAK9C,MAAMC,UAAWoD,GACvCxD,QAASA,EACT4D,KAAM,YAAgBL,EAAQC,IAC9B/D,QAAS6D,EAAc,EAAKnD,MAAMC,UAAWoD,GAC7CK,MARwB,SAelC,EAAAC,WAAa,SAACf,EAAsBC,GAClC,IAAME,EAAQ,EAAKrC,MAAMkC,IAAc,GACjCI,EAAS,EAAKtC,MAAMmC,GAC1B,OAAO,gBAAC,IAAqB,CAACe,QAASxB,OAAOC,KAAKU,GAAOpB,OAAQqB,OAAQA,EAAOrB,U,EAyIrF,OAhU2C,OAOzC,YAAAkC,kBAAA,WACEC,KAAKhE,SAAU,GAIbgE,KAAKpD,MAAMqD,MACXD,KAAKpD,MAAMR,WAAWyB,OAAS,GAC/BmC,KAAKpD,MAAMN,IAAIuB,OAAS,GACxBmC,KAAKpD,MAAMP,UAAUwB,OAAS,GAC9BmC,KAAKpD,MAAML,oBAAoBsB,OAAS,IAExCmC,KAAKxD,iBAIT,YAAA0D,mBAAA,SAAmBC,IACZA,EAAUF,MAAQD,KAAKpD,MAAMqD,MAChCD,KAAKxD,iBAIT,YAAA4D,qBAAA,WACEJ,KAAKhE,SAAU,GA6JjB,YAAAqE,qBAAA,WACE,OAAOL,KAAKnB,WACV,kBACA,aACA,IACAmB,KAAKlC,4BAIT,YAAAwC,qBAAA,WACE,OAAON,KAAKH,WAAW,kBAAmB,eAG5C,YAAAU,oBAAA,WACE,OAAOP,KAAKnB,WACV,iBACA,YACA,IACAmB,KAAKjC,2BAIT,YAAAyC,oBAAA,WACE,OAAOR,KAAKH,WAAW,iBAAkB,cAG3C,YAAAY,8BAAA,WACE,OAAOT,KAAKnB,WACV,2BACA,sBACA,IACAmB,KAAKhC,qCAIT,YAAA0C,8BAAA,WACE,OAAOV,KAAKH,WAAW,2BAA4B,wBAGrD,YAAAc,gBAAA,sBACE,OACE,gCACE,gBAAC,IAAQ,CAACpF,UAAU,WAAWU,SAAS,uBACtC,gBAAC,IAAW,CACV2E,SAAUZ,KAAKpD,MAAMiE,4BACrBnB,KAAM,oBAAU,oCAChB3D,QAASiE,KAAK7C,qCACd8C,KAAMD,KAAKpD,MAAMkE,wBACjB5B,OAAQc,KAAKpD,MAAML,oBAAoBM,KAAI,SAAAC,GACzC,mBAAkC,EAAKZ,MAAMC,UAAWW,QAG3DkD,KAAKpD,MAAMkE,yBACV,gCACGd,KAAKS,gCACLT,KAAKU,kCAIZ,gBAAC,IAAQ,CAACnF,UAAU,WAAWU,SAAS,cACtC,gBAAC,IAAW,CACV2E,SAAUZ,KAAKpD,MAAMmE,mBACrBrB,KAAM,oBAAU,2BAChB3D,QAASiE,KAAK/C,4BACdgD,KAAMD,KAAKpD,MAAMoE,eACjB9B,OAAQc,KAAKpD,MAAMR,WAAWS,KAAI,SAAAC,GAChC,mBAAyB,EAAKZ,MAAMC,UAAWW,QAGlDkD,KAAKpD,MAAMoE,gBACV,gCACGhB,KAAKK,uBACLL,KAAKM,yBAIZ,gBAAC,IAAQ,CAAC/E,UAAU,WAAWU,SAAS,aACtC,gBAAC,IAAW,CACV2E,SAAUZ,KAAKpD,MAAMqE,kBACrBvB,KAAM,oBAAU,0BAChB3D,QAASiE,KAAK9C,2BACd+C,KAAMD,KAAKpD,MAAMsE,cACjBhC,OAAQc,KAAKpD,MAAMP,UAAUQ,KAAI,SAAAC,GAC/B,mBAAwB,EAAKZ,MAAMC,UAAWW,QAGjDkD,KAAKpD,MAAMsE,eACV,gCACGlB,KAAKO,sBACLP,KAAKQ,wBAIZ,gBAAC,IAAc,CACbjF,UAAU,WACV4F,YAAa,oBAAU,oBACvBP,SAAUZ,KAAKpD,MAAMwE,YACrBC,iBAAkB,SAAAvE,GAAQ,mBAAkB,EAAKZ,MAAMC,UAA7B,IAC1BmF,mBAAoB,SAAAxE,GAAQ,OAAAA,GAC5ByE,oBAAqB,SAAAzE,GAAQ,mBAAkB,EAAKZ,MAAMC,UAA7B,IAC7ByC,sBAAuBoB,KAAKtB,yBAC5BrB,SAAU2C,KAAKpD,MAAMS,SACrBmE,SAAUxB,KAAK/B,gBACfjB,SAAUgD,KAAKpD,MAAMI,SACrBiD,KAAMD,KAAKpD,MAAM6E,QACjBxF,SAAS,MACTiC,MAAO,IAAK8B,KAAKpD,MAAMsB,MAAO,OAC9BwD,gBAAiB,SAAA5E,GAAQ,mBAAkB,EAAKZ,MAAMC,UAA7B,IACzBwF,mBAAoB,SAAC7E,EAAMoB,GACzB,+BAAc,YAAkB,EAAKhC,MAAMC,UAAWW,GAAOoB,IAE/D0D,kBAAmB,oBAAU,yBAC7B3C,MAAOe,KAAKpD,MAAMiF,SAClB3C,OAAQc,KAAKpD,MAAMN,QAM3B,YAAAwF,OAAA,WACE,OACE,gBAAC,IAAQ,CAAC7F,SAAU+D,KAAK/D,UACvB,gBAAC,IAAW,CACVyD,KAAM,oBAAU,eAAgBM,KAAK/D,UACrC8F,QAAS/B,KAAK5C,YACdrB,QAASiE,KAAKjD,kBACdkD,KAAMD,KAAKpD,MAAMqD,KACjBf,OAAQc,KAAKrD,cAGdqD,KAAKpD,MAAMqD,MAAQD,KAAKW,oBAIjC,EAhUA,CAA2C,iB,4BCrE3C,IAAIqB,EAAM,EAAQ,KACFC,EAAU,EAAQ,MAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAInC,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBwC,GAFSN,EAAIC,EAASnC,GAEXmC,EAAQM,OAASN,EAAQM,OAAS,IAIjDH,EAAOI,QAAUF,G,sBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACN,EAAOC,EAAI,2PAA4P,KAErRD,EAAOI,QAAUA,G,kCCNjB,gEA8Bc,SAAUG,EAAY,G,IAAEpH,EAAA,EAAAA,UAAWqH,EAAA,EAAAA,QAASC,EAAA,EAAAA,MAAOC,EAAA,EAAAA,MAC/D,OACE,uBAAKvH,UAAW,EAAW,uBAAwBA,IACjD,0BAAQA,UAAU,4BACHiE,IAAZoD,GAAyB,wBAAcA,EAAU,EAAG,OAAS,MAC9D,wBAAMrH,UAAU,yBAAyB,wBAAcuH,EAAO,SAE/DD,K,kCCrCP,yEA4Bc,SAAUE,EAAWnG,GACjC,OACE,wBAAMrB,UAAWqB,EAAMrB,WACrB,gBAAC,IAAa,CAACA,UAAU,sBAAsB2C,MAAOtB,EAAMoG,OAC3D,oBAAU,aAAcpG,EAAMoG,S,+qBCiBrC,cAGE,WAAYpG,GAAZ,MACE,YAAMA,IAAM,KAHd,EAAAZ,SAAU,EAqBV,EAAAiH,UAAY,SAAC,G,IAAA,uBAAEC,EAAA,EAAAA,WAAYC,EAAA,EAAAA,KACnBC,EAAyB,GAC/B,GAAID,GAAQA,EAAKC,OAAQ,CACvB,IAAoB,UAAAD,EAAKC,OAAL,eAAa,CAC/BA,GADSC,EAAK,MACDlE,KAAOkE,EAAMC,cAAgB,GAE5C,GAAIJ,GAAcA,EAAWE,OAC3B,IAAoB,UAAAF,EAAWE,OAAX,eAAmB,CAAlC,IAAMC,EACTD,GADSC,EAAK,MACDlE,KAAOkE,EAAMzD,OAIhC,OAAOwD,GAIT,EAAAG,4BAA8B,SAAC,G,IAAEC,QAAA,iBAAAA,SAC/B,OAAO,YACLA,EAAShF,QACP,SAAAiF,GACE,OAACA,EAAQC,WACTD,EAAQE,SACRF,EAAQE,QAAQC,MAChBH,EAAQI,WAAa,EAAKjH,MAAMuG,KAAKW,SAEzCjH,KAAI,SAAA4G,GAAW,cACZA,GAAO,CAEVM,MAAON,EAAQM,MAHA,QAOnB,EAAAC,iBAAmB,SAACC,GAClBA,EAAMC,iBACN,EAAKxH,SAAS,CAAEyH,YAAY,IAC5B,IAAMC,EAAO,CACXjF,IAAK,EAAKjD,MAAMuH,QAChBY,aAAc,EAAKzH,MAAMyH,aACzBjB,OAAQ,EAAKlH,MAAMkH,OACnBD,KAAM,EAAKvG,MAAMuG,KAAKhE,IACtBmF,SAAU,EAAKpI,MAAMoI,UAEvB,YAAaF,GACV3H,MAAK,WAAM,SAAKG,MAAM2H,OAAOH,EAAlB,aACX3H,MACC,WACM,EAAKT,UACP,EAAKU,SAAS,CAAEyH,YAAY,IAC5B,EAAKvH,MAAM4H,cAGf,WACM,EAAKxI,SACP,EAAKU,SAAS,CAAEyH,YAAY,QAMtC,EAAAM,sBAAwB,SAACR,GACjB,sBAAEvE,EAAA,EAAAA,KAAME,EAAA,EAAAA,MACd,EAAKlD,UAAS,SAACR,G,MAAiB,MAAC,CAAEkH,OAAQ,EAAF,KAAOlH,EAAMkH,SAAM,OAAG1D,GAAOE,EAAK,SAG7E,EAAA8E,oBAAsB,SAAC,G,IAAE9E,EAAA,EAAAA,MACvB,EAAKlD,SAAS,CAAE+G,QAAS7D,KAG3B,EAAA+E,qBAAuB,SAAC,G,IAAE/E,EAAA,EAAAA,MACxB,EAAKlD,SAAS,CAAE4H,SAAU1E,KAG5B,EAAAgF,qBAAuB,SAAC,G,IAAEhF,EAAA,EAAAA,MACxB,OAAO,gBAAC,IAAc,CAAC0E,SAAU1E,KA1FjC,IAAMiF,EAAoB,EAAKtB,4BAA4B3G,G,OAC3D,EAAKV,MAAQ,CACXkH,OAAQ,EAAKH,UAAUrG,GACvB6G,QAASoB,EAAkBhH,OAAS,EAAIgH,EAAkB,GAAG1F,IAAM,GACnEmF,SAAU1H,EAAMsG,WAAatG,EAAMsG,WAAWoB,SAAW1H,EAAMuG,KAAKmB,SACpEH,YAAY,G,EA8LlB,OAxMiD,OAc/C,YAAApE,kBAAA,WACEC,KAAKhE,SAAU,GAGjB,YAAAoE,qBAAA,WACEJ,KAAKhE,SAAU,GA+EjB,YAAA8F,OAAA,sBACQ,aAAEoB,EAAA,EAAAA,WAAYC,EAAA,EAAAA,KACd,aAAEM,EAAA,EAAAA,QAASa,EAAA,EAAAA,SAAUH,EAAA,EAAAA,WACnB,IAAAf,cAAA,WACFyB,EAAoB7E,KAAKuD,8BACzBuB,IAAkB3B,EAAuB4B,YACzCC,EAAsBH,EAAkBhH,QAAU,EAClDoH,IAAiB/B,EAEvB,OACE,gBAAC,IAAK,CAACgC,aAAclF,KAAKpD,MAAMuI,YAAaC,eAAgBpF,KAAKpD,MAAM4H,QAASa,KAAK,SACpF,wBAAMC,SAAUtF,KAAKgE,kBACnB,uBAAKzI,UAAU,cACb,0BAAKyE,KAAKpD,MAAMuI,cAGlB,uBAAK5J,UAAW,EAAW,aAAc,CAAE,kBAAmB6H,EAAOvF,OAAS,MAC1EoH,GAAgBD,GAChB,gBAAC,QAAK,CAACO,QAAQ,QAAQ,oBAAU,wCAGnC,uBAAKhK,UAAU,eACb,6BAAQ,oBAAU,iCAClB,gBAAC,IAAM,CACLA,UAAU,aACViK,WAAW,EACXC,SAAUtB,GAA2C,IAA7BU,EAAkBhH,OAC1CR,SAAU2C,KAAK0E,oBACf5E,QAAS+E,EAAkBhI,KAAI,SAAA4G,GAAW,MAAC,CACzCZ,MAAO,MAAM6C,OAAOjC,EAAQM,OAASN,EAAQ/D,KAC7CE,MAAO6D,EAAQtE,QAEjBS,MAAO6D,KAGX,uBAAKlI,UAAU,eACb,6BAAQ,oBAAU,aAClB,gBAAC,IAAM,CACLA,UAAU,cACViK,WAAW,EACXC,SAAUtB,EACV9G,SAAU2C,KAAK2E,qBACfgB,eAAgB3F,KAAK4E,qBACrB9E,QAAS,IAAWjD,KAAI,SAAAyH,GAAY,MAAC,CACnCzB,MAAO,oBAAU,WAAYyB,GAC7B1E,MAAO0E,MAETsB,YAAY,EACZhG,MAAO0E,EACPuB,cAAe7F,KAAK4E,wBAGvBE,EACC,uBAAKvJ,UAAU,eACb,qBAAGA,UAAU,QAAQ,oBAAU,gDAGjC6H,EAAOvG,KAAI,SAAAwG,GAAS,OAClB,uBAAK9H,UAAU,cAAc4D,IAAKkE,EAAMlE,KACtC,yBAAO2G,MAAOzC,EAAMlE,KAAMkE,EAAMlE,KAChB,SAAfkE,EAAML,KACL,4BACEyC,SAAUtB,EACVzE,KAAM2D,EAAMlE,IACZ9B,SAAU,EAAKoH,sBACfsB,YAAa1C,EAAMC,aACnB0C,KAAM,EACNpG,MAAO,EAAK1D,MAAMkH,OAAOC,EAAMlE,MAAQ,KAGzC,yBACEsG,SAAUtB,EACVzE,KAAM2D,EAAMlE,IACZ9B,SAAU,EAAKoH,sBACfsB,YAAa1C,EAAMC,aACnBN,KAAK,OACLpD,MAAO,EAAK1D,MAAMkH,OAAOC,EAAMlE,MAAQ,KAG3C,uBACE5D,UAAU,OAEV0K,wBAAyB,CAAEC,OAAQ,mBAAS7C,EAAM8C,UAzBpC,YAgCxB,0BAAQ5K,UAAU,cACf4I,GAAc,qBAAG5I,UAAU,yBAC5B,gBAAC,eAAY,CAACkK,SAAUtB,GAAca,GACnCC,EAAe,oBAAU,QAAU,oBAAU,0BAEhD,gBAAC,kBAAe,CAACQ,SAAUtB,EAAYpI,QAASiE,KAAKpD,MAAM4H,SACxD,oBAAU,eAOzB,EAxMA,CAAiD,iB,wTCxB3C,SAAU4B,EACdC,EACAhC,EACAiC,GAEA,OATI,SAA6BjC,GACjC,OAAOkC,QAAQlC,GAA8C,SAA9BA,EAAamC,cASzCC,CAAmBpC,IAKlB,SACJgC,EACAhC,EACAiC,GAEA,OAAOC,QACLlC,GACE,YAAWgC,KACThC,EAAaV,SAAWU,EAAaV,QAAQ+C,OAC7CJ,EAAkBK,MAAK,SAAAC,GAAO,OAAAA,EAAIzH,MAAQkF,EAAZ,SAblCwC,CAAsBR,EAAahC,EAAciC,G,o1BCqBrD,YAGE,WAAY1J,GAAZ,MACE,YAAMA,IAAM,KAHd,EAAAZ,SAAU,EAuBV,EAAA8K,oBAAsB,SAAChH,GACrB,IAAMiH,EAAmBjH,EAAQjD,KAAI,SAAAmK,GAAU,OAAAA,EAAA,SAC/C,EAAKtK,SAAS,CAAEqK,iBAAgB,KAGlC,EAAAE,4BAA8B,SAAC,G,IAAA,uBAAE/I,EAAA,EAAAA,MAAOgJ,EAAA,EAAAA,mBAClC1D,EAAWlF,OAAOY,OAAOgI,GAI7B,OAHIhJ,EAAMiJ,UAAUtJ,OAAS,IAC3B2F,EAAWA,EAAShF,QAAO,SAAAiF,GAAW,OAAAvF,EAAMiJ,UAAUvJ,SAAS6F,EAAzB,cAEjCD,EACJhF,QAAO,SAAAiF,GAAW,OAAAA,EAAQE,SAAWF,EAAQE,QAA3B,QAClBnF,QAAO,SAAAiF,GAAW,OAACA,EAAD,cAGvB,EAAA2D,gBAAkB,SAAC3D,EAAiB4D,GAClC,GAAI,EAAKrL,QAAS,CAChB,IAAM,EAA2B,CAC/BsL,OAAQD,EAASC,QAAU,EAC3B7D,QAAO,EACP8D,UAAWF,EAASE,WAAa,GAEnC,EAAK7K,UAAS,SAAAR,GAAS,MAAC,CAAEmC,QAAS,EAAInC,EAAMmC,QAAO,CAA7B,UAI3B,EAAAmJ,aAAe,WACb,IAAIC,EAAStJ,QAAQC,UAGfgG,EAAO,YAAe,EAAKxH,MAAMsB,cAChCkG,EAAKX,QAUZ,IARA,IAAMiE,EAA+B,aAAtB,EAAK9K,MAAM+K,OAAwB,IAAoB,I,WAQ3DlE,GACTgE,EAASA,EAAOhL,MAAK,WACnB,OAAAiL,EAAO,EAAD,KACDtD,GAAI,CACPC,aAAc,EAAKzH,MAAMyH,aACzBuD,UAAWnE,KACVhH,MAAK,SAAA4K,GAAY,SAAKD,gBAAgB3D,EAArB,UANF,MAJK,EAAK7G,MAAM6G,QAClC,CAAC,EAAK7G,MAAM6G,QAAQtE,KACpB,EAAKjD,MAAM6K,iBAEO,eAAQ,C,EAAZ,MASlB,OAAOU,GAGT,EAAAzD,iBAAmB,SAACC,GAClBA,EAAMC,iBACN,EAAKxH,SAAS,CAAEyH,YAAY,IAC5B,EAAKqD,eAAe/K,MAClB,WACM,EAAKT,SACP,EAAKU,SAAS,CAAEmL,UAAU,EAAM1D,YAAY,OAGhD,WACM,EAAKnI,SACP,EAAKU,SAAS,CAAEyH,YAAY,QAMpC,EAAA2D,aAAe,SAACC,GACN,QAAAtE,QACFA,EAAU,EAAK7G,MAAMsK,mBAAmBc,GAC9C,IAAKvE,EACH,OAAO,KAED,IAAA0D,EAAA,QAAAA,UACFtD,EAAWsD,EAAU1D,EAAQI,UAC/BsD,EAAU1D,EAAQI,UAAUnE,KAC5B+D,EAAQI,SACZ,OACE,gBAACoE,EAAA,MAAK,CAAC9I,IAAK4I,EAAOtE,QAAS8B,QAA2B,IAAlBwC,EAAOT,OAAe,UAAY,WACpES,EAAOT,OACJ,kCACE,mCACA7D,EAAQ/D,KACRmE,EACAkE,EAAOR,UACPQ,EAAOT,QAET,kCACE,mCACA7D,EAAQ/D,KACRmE,EACAkE,EAAOR,aAMnB,EAAAW,oBAAsB,WACpB,IACMpI,EADW,EAAKmH,8BACGpK,KAAI,SAAA4G,GAAW,MAAC,CACvCZ,MAAUY,EAAQ/D,KAAI,MAAM+D,EAAQ0E,aACpCvI,MAAO6D,EAAQtE,QAEjB,OACE,gBAAC,IAAM,CACLiJ,OAAO,EACP/K,SAAU,EAAKyJ,oBACfhH,QAASA,EACTF,MAAO,EAAK1D,MAAM6K,oBAhItB,IAAMA,EAAmB,GACnBsB,EAAoB,EAAKpB,4BAA4BrK,G,OAC1B,IAA7ByL,EAAkBxK,QACpBkJ,EAAiBrE,KAAK2F,EAAkB,GAAGlJ,KAG7C,EAAKjD,MAAQ,CAAE2L,UAAU,EAAOxJ,QAAS,GAAI0I,iBAAgB,EAAE5C,YAAY,G,EA2L/E,OAxM6C,OAgB3C,YAAApE,kBAAA,WACEC,KAAKhE,SAAU,GAGjB,YAAAoE,qBAAA,WACEJ,KAAKhE,SAAU,GAuHjB,YAAA8F,OAAA,WACQ,iBAAE6F,EAAA,EAAAA,OAAQlE,EAAA,EAAAA,QAASX,EAAA,EAAAA,MACnBwF,EACO,aAAXX,EACO,oBAAU,4CAA2C,KAAK,wBAC3D7E,EACA,OACD,IAAI,oBAAU,uBAAsB,IAClC,oBAAU,8CAA6C,KAAK,wBAC7DA,EACA,OACD,IAAI,oBAAU,uBAAsB,IAE3C,OACE,gBAAC,IAAK,CAACoC,aAAcoD,EAAQlD,eAAgBpF,KAAKpD,MAAM4H,QAASa,KAAK,SACpE,wBAAMC,SAAUtF,KAAKgE,kBACnB,0BAAQzI,UAAU,cAChB,0BAAK+M,IAGP,uBAAK/M,UAAU,cACZyE,KAAK9D,MAAMmC,QAAQxB,IAAImD,KAAK8H,eAE3B9H,KAAK9D,MAAM2L,WAAa7H,KAAK9D,MAAMiI,YACnC,uBAAK5I,UAAU,eACb,0BACE,yBAAOgN,QAAQ,oCACD,aAAXZ,EACG,oBAAU,4BACV,oBAAU,gCAGjBlE,EACC,4BACGA,EAAQ/D,KACR,MACA,oBAAU,iBAGbM,KAAKkI,wBAMb,0BAAQ3M,UAAU,cACfyE,KAAK9D,MAAMiI,YAAc,qBAAG5I,UAAU,0BACrCyE,KAAK9D,MAAM2L,UACX,gBAAC,eAAY,CAACpC,SAAUzF,KAAK9D,MAAMiI,WAAYrI,GAAG,mCAC/C,oBAAU,UAGf,gBAAC,kBAAe,CAACC,QAASiE,KAAKpD,MAAM4H,SAClCxE,KAAK9D,MAAM2L,SAAW,oBAAU,SAAW,oBAAU,eAOpE,EAxMA,CAA6C,iB,sVCV7C,uE,OACE,EAAA3L,MAAe,CAAEsM,OAAO,GAExB,EAAAC,mBAAqB,WACX,IAAAhF,EAAA,cAAAA,QACR,OAAQA,GAAW,EAAK7G,MAAMsK,mBAAmBzD,SAAajE,GAGhE,EAAAkJ,WAAa,WAAM,SAAKhM,SAAS,CAAEiL,YAAQnI,EAAWgJ,OAAO,EAAO/E,aAAjD,KAEnB,EAAAkF,oBAAsB,SAAC1E,GACrBA,EAAMC,iBACND,EAAM2E,cAAcC,OACpB,EAAKnM,SAAS,CAAEiL,OAAQ,WAAYa,OAAO,EAAM/E,aAASjE,KAG5D,EAAAsJ,6BAA+B,SAAC7E,GAC9BA,EAAMC,iBACND,EAAM2E,cAAcC,OACpB,EAAKnM,SAAS,CAAEiL,OAAQ,WAAYa,OAAO,EAAM/E,QAAS,EAAKgF,wBAGjE,EAAAM,sBAAwB,SAAC9E,GACvBA,EAAMC,iBACND,EAAM2E,cAAcC,OACpB,EAAKnM,SAAS,CAAEiL,OAAQ,aAAca,OAAO,EAAM/E,aAASjE,KAG9D,EAAAwJ,+BAAiC,SAAC/E,GAChCA,EAAMC,iBACND,EAAM2E,cAAcC,OACpB,EAAKnM,SAAS,CAAEiL,OAAQ,aAAca,OAAO,EAAM/E,QAAS,EAAKgF,wB,EA4ErE,OA3GwC,OAkCtC,YAAA3G,OAAA,WAKE,IAHsBxD,OAAOY,OAAOc,KAAKpD,MAAMsK,oBAAoBP,MAAK,SAAAlD,GACtE,OAAA8C,QAAQ9C,EAAQE,SAAWF,EAAQE,QAAQC,SAG3C,OACE,gBAAC,IAAO,CAAClI,QAAS,oBAAU,qCAC1B,gBAAC,SAAM,CAACH,UAAU,iBAAiBkK,UAAU,GAC1C,oBAAU,iBAMX,IAAAvC,EAAA,iBAAAA,WACFO,EAAUzD,KAAKyI,qBACfQ,EAAmB1C,QACvB9C,IAAYA,EAAQC,WAAaD,EAAQE,SAAWF,EAAQE,QAAQC,MAEhEsF,EAAyBD,IAAmC,IAAf/F,EAC7CiG,EAA2BF,IAAmC,IAAf/F,EAErD,OACE,gCACE,gBAAC,IAAQ,CACP3H,UAAU,YACV6N,iBAAkB,iBAAeC,WACjC3N,QACE,sBAAIH,UAAU,QACZ,0BACE,qBAAG+N,KAAK,IAAIvN,QAASiE,KAAK2I,qBACvB,oBAAU,4BACT,MAELO,GAA0BzF,GACzB,0BACE,qBAAG6F,KAAK,IAAIvN,QAASiE,KAAK8I,8BACvB,oBAAU,4B,IAA6B,8BAASrF,EAAQ/D,QAI/D,0BACE,qBAAG4J,KAAK,IAAIvN,QAASiE,KAAK+I,uBACvB,oBAAU,8BACT,MAELI,GAA4B1F,GAC3B,0BACE,qBAAG6F,KAAK,IAAIvN,QAASiE,KAAKgJ,gCACvB,oBAAU,8B,IAA+B,8BAASvF,EAAQ/D,UAMrE,gBAAC,SAAM,CAACnE,UAAU,kBAAkB,oBAAU,iBAE/CyE,KAAK9D,MAAMsM,OAASxI,KAAK9D,MAAMyL,QAC9B,gBAAC,EAAe,CACdA,OAAQ3H,KAAK9D,MAAMyL,OACnBR,UAAWnH,KAAKpD,MAAMuK,UACtB3C,QAASxE,KAAK0I,WACdrE,aAAcrE,KAAKpD,MAAMyH,aACzBZ,QAASzD,KAAK9D,MAAMuH,QACpBvF,MAAO8B,KAAKpD,MAAMsB,MAClBgJ,mBAAoBlH,KAAKpD,MAAMsK,mBAC/BpE,MAAO9C,KAAKpD,MAAMkG,UAM9B,EA3GA,CAAwC,iB,mpBCSxC,uE,OACE,EAAAxF,gBAAkB,SAACE,EAAmBC,G,MAEhCE,EADIuB,EAAA,QAAAA,OAEJ,EAAKtC,MAAM2M,gBAEb5L,EAAWH,KADG0B,EAAOrB,OAASqB,EAAO,QAAKM,QACTA,EAAYhC,EAE7CG,EADSF,EACE,KACTyB,EAAOtB,SAASJ,GAAa,KAAQ0B,EAAQ1B,GAAY,GAAK0B,EAAM,CAAE1B,KAG7D0B,EAAOtB,SAASJ,IAAc0B,EAAOrB,OAAS,EAAI,GAAK,CAACL,GAErE,EAAKZ,MAAMS,WAAQ,MAAI,EAAKT,MAAMX,UAAW0B,EAAQ,KAGvD,EAAAZ,kBAAoB,WAAM,SAAKH,MAAMI,SAAS,EAAKJ,MAAzB,WAE1B,EAAAQ,YAAc,W,MAAM,SAAKR,MAAMS,WAAQ,MAAI,EAAKT,MAAMX,UAAW,GAAE,KAEnE,EAAAqD,QAAU,SAACM,GAAkB,SAAKhD,MAAMqC,OAAS,EAAKrC,MAAMqC,MAA/B,IAE7B,EAAAuK,WAAa,SAAC5J,GACZ,IAAMH,EAAS,EAAK7C,MAAMsC,OAAOtB,SAASgC,GACpCD,EAAO,EAAKL,QAAQM,GACpB,UAAE,IAAAZ,kBAAA,IAAa,EAAb,KAAgC,IAAAyK,sBAAA,IAAiB,EAAjB,KAExC,OACE,gBAACC,GAAA,EAAS,CACRjK,OAAQA,EACRgG,SAAmB,IAAT9F,IAAeF,EACzBkK,UAAW,EAAK/M,MAAM+M,UACtBxK,IAAKS,EACLF,KAAMV,EAAWY,GACjB7D,QAAS,EAAKuB,gBACdqC,KAAMA,GAAQ,wBAAcA,EAAM,aAClCnE,QAASiO,EAAe7J,GACxBA,MAAOA,K,EA0Cf,OAhFmC,QA2CjC,YAAAkC,OAAA,WACQ,iBAAE2D,EAAA,EAAAA,SAAU,IAAAgE,sBAAA,IAAiB,EAAjB,KAAoCxK,EAAA,EAAAA,MAChDC,EAASc,KAAKpD,MAAMsC,OAAOrC,IAAI4M,GAC/B/L,EACJsC,KAAKpD,MAAMkD,SACVb,GACC,KACEX,OAAOC,KAAKU,IACZ,SAAAE,GAAO,OAACF,EAAD,MACP,SAAAE,GAAO,OAAAsK,EAAetK,GAAf,iBAGb,OACE,gBAACyK,GAAA,EAAQ,CACPrO,UAAW,GAAW,CAAE,uCAAwCkK,IAChExJ,SAAU+D,KAAKpD,MAAMX,UACrB,gBAAC4N,GAAA,EAAW,CACVnK,KACE,gBAAC,IAAO,CAAChE,QAAS+J,EAAWzF,KAAKpD,MAAMkN,oBAAiBtK,GACvD,4BAAO,oBAAU,qBAAsBQ,KAAKpD,MAAMX,YAGtD8F,QAAS/B,KAAK5C,YACdrB,QAAS0J,OAAWjG,EAAYQ,KAAKjD,kBACrCkD,KAAMD,KAAKpD,MAAMqD,OAASwF,EAC1BvG,OAAQA,GACPc,KAAKpD,MAAMmN,UAGb/J,KAAKpD,MAAMqD,WAAkBT,IAAV9B,GAClB,gBAACsM,GAAA,EAAc,KAAEtM,EAAMb,IAAImD,KAAKwJ,aAGjCxJ,KAAKpD,MAAMqD,WAAoCT,IAA5BQ,KAAKpD,MAAMqN,cAA8BjK,KAAKpD,MAAMqN,iBAIhF,EAhFA,CAAmC,iBAkFnC,SAASC,GAAkBtK,GACzB,OAAOA,E,oiBC1GT,uE,OACE,EAAAZ,WAAa,SAACsF,GAAqB,uBAAC6F,EAAA,EAAc,CAAC7F,SAAhB,KAEnC,EAAAmF,eAAiB,SAACnF,GAAqB,2BAAU,WAAV,I,EAgBzC,OAnBqD,QAKnD,YAAAxC,OAAA,WACE,OACE,gBAAC,GAAK,MACA9B,KAAKpD,MAAK,CACd6I,SAAUzF,KAAKpD,MAAM6I,SACrBqE,eAAgB,oBAAU,iDAC1BH,WAAW,EACX7J,QAAS,IACT7D,SAAS,uBACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKyJ,mBAI7B,EAnBA,CAAqD,iB,0WCMrD,0E,OACE,EAAA1M,kBAAoB,WAClB,EAAKH,MAAMI,SAAS,mBAGtB,EAAAI,YAAc,WACZ,EAAKR,MAAMS,SAAS,CAAE+M,oBAAgB5K,KAGxC,EAAA6K,mBAAqB,SAACC,GACpB,EAAK1N,MAAMS,SAAS,CAAE+M,eAAgBE,KAGxC,EAAA3N,UAAY,WACV,SAAKC,MAAMgD,MACP,CAAC,EAAKhD,MAAM2N,KAAKC,WAAW,EAAK5N,MAAMgD,MAAO,8BAC9CJ,G,EAwBR,OAxCkC,QAkBhC,YAAAsC,OAAA,WACE,OACE,gBAAC8H,GAAA,EAAQ,CAAC3N,SAAS,kBACjB,gBAAC4N,GAAA,EAAW,CACVnK,KAAM,oBAAU,sCAChBqC,QAAS/B,KAAK5C,YACdrB,QAASiE,KAAKjD,kBACdkD,KAAMD,KAAKpD,MAAMqD,KACjBf,OAAQc,KAAKrD,cAGdqD,KAAKpD,MAAMqD,MACV,gBAACwK,GAAA,EAAS,CACR/K,KAAK,kBACLrC,SAAU2C,KAAKqK,mBACftE,YAAa,oBAAU,QACvBnG,MAAOI,KAAKpD,MAAMgD,UAM9B,EAxCA,CAAkC,iBA0CnB,yBAAW,I,giBCpD1B,uE,OACE,EAAAZ,WAAa,SAACsF,GAAqB,uBAAC6F,EAAA,EAAc,CAAC7F,SAAhB,KAEnC,EAAAmF,eAAiB,SAACnF,GAAqB,2BAAU,WAAV,I,EAczC,OAjBkD,QAKhD,YAAAxC,OAAA,WACE,OACE,gBAAC,GAAK,MACA9B,KAAKpD,MAAK,CACd+M,WAAW,EACX7J,QAAS,IACT7D,SAAS,aACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKyJ,mBAI7B,EAjBA,CAAkD,iB,62BCGlD,uE,OACE,EAAAzK,WAAa,SAACY,GACZ,2BAAU,mCAAoCA,EAAMnB,gB,EAmBxD,OArB8C,QAI5C,YAAAqD,OAAA,WACE,IAAM,aAAElC,EAAA,EAAAA,MAAO,kBAEf,OACE,gBAAC,GAAK,MACAhD,EAAK,CACT6I,SAAUzF,KAAKpD,MAAM6I,SACrBqE,eAAgB,oBAAU,6CAC1BhK,QAAS,CAAC,OAAQ,YAAa,aAC/B7D,SAAS,cACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKhB,WACrBuK,iBAAiB,EACjBrK,OAAQU,EAAQ,CAACA,GAAS,OAIlC,EArBA,CAA8C,iB,8iBCU9C,0E,OACE,EAAA8K,gBAAkB,SAACC,GACjB,IAAM9G,EAAW,EAAKjH,MAAMgO,mBAAmBC,MAAK,SAAAC,GAAK,OAAAA,EAAE3L,MAAF,KACzD,OAAO0E,EAAWA,EAASnE,KAAOiL,GAGpC,EAAAI,aAAe,SAAC7M,GACd,IACMG,EADU,EAAK2M,wBACGxM,QAAO,SAAAqF,GAC7B,OAAAA,EAASnE,KAAKjB,cAAcb,SAASM,EAAMO,kBAEvCwM,EAAS,CAAEC,UAAW,EAAGC,SAAU9M,EAAQR,OAAQiF,MAAOzE,EAAQR,QACxE,OAAOM,QAAQC,QAAQ,CAAE6M,OAAM,EAAE5M,QAAO,KAG1C,EAAA2M,sBAAwB,WAChB,cAAEJ,EAAA,EAAAA,mBAAoB,IAAA3L,aAAA,IAAQ,EAAR,KAK5B,OAAO,KAAM,GACP2L,EAAuBtM,OAAOC,KAAKU,GAAOpC,KAAI,SAAAsC,GAAO,MAAC,CAAEA,IAAG,EAAEO,KAAR,QACzD,SAAAmE,GAAY,OAAAA,EAAA,QAIhB,EAAAlC,mBAAqB,SAAC,EAA6ByJ,G,IAA3B1L,EAAA,EAAAA,KACtB,OAAO,yBAAcA,EAAM0L,I,EA2B/B,OAvD4B,QA+B1B,YAAAtJ,OAAA,WACE,OACE,gBAACuJ,GAAA,EAAc,CACb5F,SAAUzF,KAAKpD,MAAM6I,SACrBqE,eAAgB,oBAAU,0CAC1B3I,YAAa,oBAAU,gCACvBP,UAAU,EACVS,iBAAkBrB,KAAK0K,gBACvBpJ,mBAAoB,SAAAuC,GAAY,OAAAA,EAAA,KAChCtC,oBAAqB,SAAAsC,GAAY,OAAAA,EAAA,MACjCyH,gBAAiB,EACjBjO,SAAU2C,KAAKpD,MAAMS,SACrBmE,SAAUxB,KAAK+K,aACf/N,SAAUgD,KAAKpD,MAAMI,SACrBiD,KAAMD,KAAKpD,MAAMqD,KACjBhE,SAAS,YACTyF,gBAAiB1B,KAAK0K,gBACtB/I,mBAAoB3B,KAAK2B,mBACzBC,kBAAmB,oBAAU,+BAC7B3C,MAAOe,KAAKpD,MAAMqC,MAClBC,OAAQc,KAAKpD,MAAMsC,UAI3B,EAvDA,CAA4B,iBA6Db,sBAJS,SAAChD,GAAiB,MAAC,CACzC0O,mBAAoBtM,OAAOY,OAAO,uBAAahD,OAGlC,CAAyB,I,yVCzDxC,uE,OACE,EAAAoB,gBAAkB,SAACiO,GACjB,IAAM5N,EAAW,EAAKf,MAAMgD,QAAU2L,EAAW,GAAKA,EACtD,EAAK3O,MAAMS,SAAS,CAClB6F,gBAAsC1D,IAA1B,EAAK5C,MAAMsG,YAAkC,EAAKtG,MAAMsG,WACpEsI,sBAAkBhM,EAClBiE,QAAS9F,KAIb,EAAAZ,kBAAoB,WAAM,SAAKH,MAAMI,SAAX,YAE1B,EAAAI,YAAc,WACZ,SAAKR,MAAMS,SAAS,CAClB6F,gBAAY1D,EACZiM,qBAAsB,GACtBD,sBAAkBhM,EAClBkM,iBAAalM,EACbiE,aAASjE,KAGb,EAAAmM,kBAAoB,SAAC1H,GACnB,EAAK2H,gBAAgB3H,GACrB,EAAKrH,MAAMS,SAAS,CAAE6F,YAAY,EAAMsI,sBAAkBhM,KAG5D,EAAAqM,oBAAsB,SAAC5H,GACrB,EAAK2H,gBAAgB3H,GACrB,EAAKrH,MAAMS,SAAS,CAAE6F,YAAY,EAAOsI,sBAAkBhM,KAG7D,EAAAoM,gBAAkB,SAAC3H,GACjBA,EAAMC,iBACND,EAAM2H,kBACN3H,EAAM2E,cAAcC,QAGtB,EAAAiD,aAAe,WACP,cAAE5E,EAAA,EAAAA,mBAAoBtH,EAAA,EAAAA,MAC5B,GAAIA,EAAO,CACT,IAAM6D,EAAUyD,EAAmBtH,GAEnC,MAAO,CADO6D,GAAcA,EAAQ/D,KAAI,IAAI+D,EAAQ0E,cAAmBvI,GAGvE,MAAO,IAIX,EAAAmM,WAAa,SAACtI,GACZ,IAAMuI,EAAUvI,EAAQ/D,KAAI,IAAI+D,EAAQ0E,aACxC,OAAO1E,EAAQC,UAAesI,EAAI,KAAK,oBAAU,6BAA4B,IAAMA,GAGrF,EAAAhN,WAAa,SAACyE,GAAqB,OACjC,gCACGA,EAAQ/D,KACT,wBAAMnE,UAAU,2BACbkI,EAAQ0E,aACR1E,EAAQC,WAAa,KAAK,oBAAU,6BALR,OAUnC,EAAAuI,iBAAmB,SAACxI,GAClB,IAAMyI,EAAYzI,EAAQtE,MAAQ,EAAKvC,MAAM4O,iBACvCtI,IAAagJ,GAAmB,EAAKtP,MAAMsG,WACjD,OACE,gCACE,uCACgBA,EACd3H,UAAW,GAAW,YAAa,eAAgB,qBAAsB,CACvE,sBAAuB2H,IAEzBnH,QAASmQ,EAAY,EAAKN,gBAAkB,EAAKD,kBACjDQ,KAAK,QACLC,UAAW,GAAC,UAGd,wCACiBlJ,EACf3H,UAAW,GAAW,cAAe,eAAgB,mBAAoB,CACvE,uBAAwB2H,IAE1BnH,QAASmQ,EAAY,EAAKN,gBAAkB,EAAKC,oBACjDM,KAAK,QACLC,UAAW,GAAC,cAOpB,EAAA5C,WAAa,SAAC/F,GACZ,IAAMhE,EAAS,CAAC,EAAK7C,MAAMgD,MAAO,EAAKhD,MAAM4O,kBAAkB5N,SAAS6F,EAAQtE,KAEhF,OACE,gBAACuK,GAAA,EAAS,CACRjK,OAAQA,EACRlE,UAAW,EAAKqB,MAAM4O,mBAAqB/H,EAAQtE,IAAM,eAAYK,EACrEL,IAAKsE,EAAQtE,IACbO,KAAM,EAAKV,WAAWyE,GACtB1H,QAAS,EAAKuB,gBACdqC,KAAM,EAAKsM,iBAAiBxI,GAC5BjI,QAAS,EAAKuQ,WAAWtI,GACzB7D,MAAO6D,EAAQtE,O,EAyCvB,OAjJ0C,QA6GxC,YAAA2C,OAAA,WACQ,iBAAEqF,EAAA,EAAAA,UAAWD,EAAA,EAAAA,mBACf1D,EAAWlF,OAAOY,OAAOgI,GAU7B,OATIC,EAAUtJ,OAAS,IACrB2F,EAAWA,EAAShF,QAAO,SAAAiF,GAAW,OAAA0D,EAAUvJ,SAAS6F,EAAnBI,cAExCL,EAAW,KACTA,GACA,SAAAC,GAAW,OAAAA,EAAQ/D,KAAR,iBACX,SAAA+D,GAAW,OAAAA,EAAA,gBAIX,gBAACmG,GAAA,EAAQ,CAAC3N,SAAS,WACjB,gBAAC4N,GAAA,EAAW,CACVnK,KAAM,oBAAU,+BAChBqC,QAAS/B,KAAK5C,YACdrB,QAASiE,KAAKjD,kBACdkD,KAAMD,KAAKpD,MAAMqD,KACjBf,OAAQc,KAAK8L,gBACb,gBAACO,GAAA,EAAoB,CACnB9Q,UAAU,cACV0G,QAAS,oBAAU,oCACnBqK,MAAO,CACL,CACEhD,KAAM,2DACNzG,MAAO,oBAAU,yCAMxB7C,KAAKpD,MAAMqD,MAAQ,gBAAC+J,GAAA,EAAc,KAAExG,EAAS3G,IAAImD,KAAKwJ,eAI/D,EAjJA,CAA0C,iB,02BCV1C,0E,OACE,EAAAkB,gBAAkB,SAACC,GACT,IACF9G,EADE,QAAA0I,oBAC6B5B,GACrC,OAAQ9G,GAAYA,EAASnE,MAASiL,GAGxC,EAAA3L,WAAa,SAACwN,GACJ,IACFC,EADE,QAAAC,uBACkCF,GAC1C,OAAOC,EACL,gCACGA,EAAW/M,KACZ,wBAAMnE,UAAU,2BAA2B,EAAKmP,gBAAgB+B,EAAW5I,YAG7E2I,GAIJ,EAAA/C,eAAiB,SAAC+C,GACR,IACFC,EADE,QAAAC,uBACkCF,GAC1C,OAAQC,GAAcA,EAAW/M,MAAS8M,G,EAc9C,OArC8B,QA0B5B,YAAA1K,OAAA,WACE,IAAM,aAA+C,GAA7C,EAAAyK,oBAAqB,EAAAG,uBAAwB,wDACrD,OACE,gBAAC,GAAK,MACAC,EAAU,CACd1Q,SAAS,eACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKyJ,mBAI7B,EArCA,CAA8B,iBA2Cf,sBAJS,SAACvN,GAA6B,MAAC,CACrDqQ,oBAAqB,uBAAarQ,MAGrB,CAAyB,I,giBCnDxC,uE,OACE,EAAA8C,WAAa,SAAC4N,GAAmB,2BAAU,eAAgBA,EAA1B,gB,EAanC,OAdyC,QAGvC,YAAA9K,OAAA,WACE,OACE,gBAAC,GAAK,MACA9B,KAAKpD,MAAK,CACdkD,QAAS,IACT7D,SAAS,WACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKhB,eAI7B,EAdA,CAAyC,iB,4jBCSzC,uE,OACE,EAAA+L,aAAe,SAAC7M,GACd,OAAO,YAAY,CAAEmG,aAAc,EAAKzH,MAAMyH,aAAcwI,GAAI,GAAIC,EAAG5O,IAASzB,MAAK,SAAAsQ,GAAQ,MAAC,CAC5F9B,OAAQ,CAAEC,UAAW,EAAGC,SAAU4B,EAAKlP,OAAQiF,MAAOiK,EAAKlP,QAC3DQ,QAAS0O,OAIb,EAAAC,aAAe,SAAChG,GACd,EAAKpK,MAAMS,SAAS,CAAE0P,KAAM,KAAI,GAAK,EAAKnQ,MAAMsC,OAAM,CAAE8H,EAAOpH,YAGjE,EAAAqN,WAAa,SAACC,GACZ,OAAOA,GAGT,EAAAC,UAAY,SAACD,GAAgB,OAC3B,gCACE,gBAAC,KAAQ,CAAC3R,UAAU,sBAAsB6R,KAAM,UAAOC,SAF9B,IAO7B,EAAA1L,mBAAqB,SAACuL,EAAa9B,GAAiB,OAClD,gCACE,gBAAC,KAAQ,CAAC7P,UAAU,sBAAsB6R,KAAM,UAAOC,SACtD,yBAAcH,EAHiC,K,EA4BtD,OAnDsC,QA8BpC,YAAApL,OAAA,WACE,OACE,gBAACuJ,GAAA,EAAc,CACblK,YAAa,oBAAU,2BACvBP,UAAU,EACVS,iBAAkBrB,KAAKiN,WACvB3L,mBAAoB,SAAA4L,GAAO,OAAAA,GAC3B3L,oBAAqB,SAAA2L,GAAO,OAAAA,GAC5B7P,SAAU2C,KAAKpD,MAAMS,SACrBmE,SAAUxB,KAAK+K,aACf/N,SAAUgD,KAAKpD,MAAMI,SACrBiD,KAAMD,KAAKpD,MAAMqD,KACjBhE,SAAS,OACTyF,gBAAiB1B,KAAKmN,UACtBxL,mBAAoB3B,KAAK2B,mBACzBC,kBAAmB,oBAAU,0BAC7B3C,MAAOe,KAAKpD,MAAMqC,MAClBC,OAAQc,KAAKpD,MAAMsC,UAI3B,EAnDA,CAAsC,iB,k4BCJtC,uE,OACE,EAAAoO,aAAe,SAACC,GACd,IAAMC,EAGJC,MAAMC,QAAQH,EAAQC,gBAAkChO,IAArB+N,EAAQC,cACvChO,EACqB,SAArB+N,EAAQC,SACd,EAAK5Q,MAAMS,SAAQ,SAAMkQ,GAAO,CAAEC,SAAQ,MAG5C,EAAAxO,WAAa,SAACwO,GACZ,MAAa,SAAbA,EACI,oBAAU,6CACV,oBAAU,kD,EA0BlB,OAxC2C,QAgBzC,YAAA1L,OAAA,WACE,IAAM,aAAYlC,GAAV,EAAAvC,SAAU,EAAAuC,OAAO,6BAEzB,OACE,gBAAC,GAAK,MACAhD,EAAK,CACTS,SAAU2C,KAAKsN,aACfxN,QAAS,CAAC,OAAQ,SAClB7D,SAAS,WACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKhB,WACrBuK,iBAAiB,EACjBrK,YAAkBM,IAAVI,EAAsB,CAAC+N,OAAO/N,IAAU,KAChD,gBAAC,KAAW,CACVrE,UAAU,cACVG,QACE,uBAAKH,UAAU,oCACZ,oBAAU,wCAOzB,EAxCA,CAA2C,iB,qjBCL3C,uE,OACE,EAAAyD,WAAa,SAACgE,GAAiB,OAC7B,gCACE,gBAAC,KAAa,CAACzH,UAAU,sBAAsB2C,MAAO8E,IACrD,oBAAU,aAHgB,KAO/B,EAAAyG,eAAiB,SAACzG,GAAiB,2BAAU,aAAV,I,EAerC,OAvBuC,QAUrC,YAAAlB,OAAA,WAGE,OACE,gBAAC,GAAK,MACA9B,KAAKpD,MAAK,CACdkD,QALY,CAAC,MAAO,gBAAiB,aAAc,oBAMnD7D,SAAS,QACT+C,WAAYgB,KAAKhB,WACjByK,eAAgBzJ,KAAKyJ,mBAI7B,EAvBA,CAAuC,iBCyBzB,SAAUmE,GAAWhR,GACjC,IAAMiR,GAAoBjR,EAAMkR,uBAA4CtO,IAAxB5C,EAAMsB,MAAMuF,QAE1DsK,OAC6BvO,IAAjC5C,EAAMsB,MAAMsN,uBACchM,IAA1B5C,EAAMoR,kBACLpR,EAAMoR,gBAAgBC,YAEnBC,OAC6B1O,IAAjC5C,EAAMsB,MAAMsN,uBACchM,IAA1B5C,EAAMoR,kBACLpR,EAAMsB,MAAMgF,WACf,OACE,gCACE,gBAAC,GAAa,CACZuC,SAAUoI,EACVxQ,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWlH,UACzBlI,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAOnH,UACpCjI,OAAQtC,EAAMsB,MAAMiJ,YAEtB,gBAAC,GAAS,CACR9J,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWE,MACzBtP,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAOC,MACpCrP,OAAQtC,EAAMsB,MAAMqQ,QAEtB,gBAAC,GAAQ,CACPlR,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWtB,KACzB1I,aAAczH,EAAMyH,aACpBpF,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAOvB,KACpC7N,OAAQtC,EAAMsB,MAAM6O,OAEtB,gBAAC,GAAe,CACd1P,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWG,aACzB9B,uBAAwB9P,EAAM8P,uBAC9BzN,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAOE,aACpCtP,OAAQtC,EAAMsB,MAAMsQ,eAEtB,gBAAC,GAAoB,CACnBnR,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWI,WACzBxP,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAOG,WACpCvP,OAAQtC,EAAMsB,MAAMuQ,aAEtB,gBAAC,GAAW,CACVpR,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWK,SACzBzP,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAOI,SACpCxP,OAAQtC,EAAMsB,MAAMwQ,WAEtB,gBAACC,EAAA,EAAa,CACZrS,IAAKM,EAAMsB,MAAM5B,IACjBmF,UAAW7E,EAAMyR,WAAW/R,IAC5BuF,SAAUjF,EAAM0R,QAAU1R,EAAM0R,OAAOhS,IACvC8E,aAAa,EACbL,oBAAoB,EACpBE,mBAAmB,EACnBJ,6BAA6B,EAC7BxD,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWlS,UACzBC,WAAYQ,EAAMsB,MAAM9B,WACxB4E,iBAAkBpE,EAAMyR,WAAWjS,WACnCwS,gBAAiBhS,EAAM0R,QAAU1R,EAAM0R,OAAOlS,WAC9C8B,MAAOtB,EAAMsB,MACb7B,UAAWO,EAAMsB,MAAM7B,UACvB6E,gBAAiBtE,EAAMyR,WAAWhS,UAClCwS,eAAgBjS,EAAM0R,QAAU1R,EAAM0R,OAAOjS,UAC7CE,oBAAqBK,EAAMsB,MAAM3B,oBACjCuE,0BAA2BlE,EAAMyR,WAAW9R,oBAC5CuS,yBAA0BlS,EAAM0R,QAAU1R,EAAM0R,OAAO/R,sBAEzD,gBAAC,GAAmB,CAClBc,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWjE,eACzBxK,MAAOhD,EAAMsB,MAAMkM,kBAEnBxN,EAAMmS,sBACN,gBAAC,GAAa,CACZ1R,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAWb,SACzB5N,MAAOhD,EAAMsB,MAAMsP,YAGrB5Q,EAAMkR,kBACN,gCACE,gBAAC,GAAY,CACX5K,WAAYtG,EAAMsB,MAAMgF,WACxBsI,iBAAkB5O,EAAMsB,MAAMsN,iBAC9BrE,UAAWvK,EAAMsB,MAAMiJ,UACvB9J,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAW5K,QACzByD,mBAAoBtK,EAAMsK,mBAC1BtH,MAAOhD,EAAMsB,MAAMuF,UAErB,gBAAC,GAAgB,CACfgC,SAAUsI,EACV1Q,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAW3C,YACzB9L,MAAOhD,EAAMsB,MAAMwN,cAErB,gBAAC,GAAuB,CACtBjG,SAAUyI,EACV7Q,SAAUT,EAAMuR,eAChBnR,SAAUJ,EAAMwR,cAChBnO,OAAQrD,EAAMyR,WAAW5C,qBACzBxM,MAAOrC,EAAM0R,QAAU1R,EAAM0R,OAAO7C,qBACpCvM,OAAQtC,EAAMsB,MAAMuN,yB,0DCzIlB,SAAUuD,GAAYpS,GAClC,OACE,uBAAKrB,UAAU,cACb,gBAAC0T,GAAS,MAEV,gBAAC,KAAe,CAACC,QAAStS,EAAMsS,SAC9B,gBAAC,KAAY,CAACnT,QAASa,EAAMuS,YAG9BvS,EAAMqO,QACL,gBAACtI,GAAA,EAAW,CACVpH,UAAU,cACVqH,QAAShG,EAAMwS,cACfvM,MAAO,oBAAU,uBACjBC,MAAOlG,EAAMqO,OAAOnI,SAO9B,SAASmM,KACP,OACE,wBAAM1T,UAAU,yBACd,wBAAMA,UAAU,oBACd,wBAAMA,UAAU,uCAAqC,KACrD,wBAAMA,UAAU,uCAAqC,KACpD,oBAAU,iCAGb,4BACE,wBAAMA,UAAU,uCAAqC,KACrD,wBAAMA,UAAU,uCAAqC,KACpD,oBAAU,wB,6mBCVnB,YAGE,WAAYqB,GAAZ,MACE,YAAMA,IAAM,KAHd,EAAAZ,SAAU,EAgCV,EAAAqT,eAAiB,WACT,cAAEC,EAAA,EAAAA,WAAYjL,EAAA,EAAAA,aAAckL,EAAA,EAAAA,aAC5BnM,EAAS9E,OAAOC,KAAK,EAAKrC,MAAMkH,QACnCvG,KAAI,SAAAsC,GAAO,OAAGA,EAAG,IAAI,OAAAqQ,GAAA,WAAU,EAAKtT,MAAMkH,OAA/B,OACXqM,KAAK,KACFC,EAAW,CACfC,qBAAsB,EAAKzT,MAAM0T,YACjClQ,KAAM,EAAKxD,MAAMwD,KACjB2E,aAAY,EACZjB,OAAM,EACNkB,SAAU,EAAKpI,MAAMoI,SACrBsI,OAAQ,EAAK1Q,MAAM0Q,QAErB,OAAO0C,EACH,YAAW,GAAD,MAAMI,GAAQ,CAAEvQ,IAAKmQ,EAAWnQ,OAC1C,YAAW,GAAD,MACLuQ,GAAQ,CACXG,WAAY,EAAK3T,MAAMiD,IACvB2Q,sBAAuB,EAAK5T,MAAM6T,aAClCC,aAAcT,EAAapQ,IAC3B6D,KAAM,EAAK9G,MAAM8G,SAIzB,EAAAgB,iBAAmB,SAACC,GAClBA,EAAMC,iBACN,EAAKxH,SAAS,CAAEyH,YAAY,IAC5B,EAAKkL,iBAAiB5S,MACpB,SAAAwT,GACM,EAAKjU,UACP,EAAKU,SAAS,CAAEyH,YAAY,IAC5B,EAAKvH,MAAM2H,OAAO0L,OAGtB,SAAC5I,GACK,EAAKrL,SACP,EAAKU,SAAS,CAAEqT,aAAkC,MAApB1I,EAASuF,OAAgBzI,YAAY,QAM3E,EAAA+L,iBAAmB,SAACjM,GACV,sBAAArE,MACR,EAAKlD,UAAS,SAAAR,GAAS,MAAC,CACtBwD,KAAI,EACJP,IAAKjD,EAAMiU,kBAAoBjU,EAAMiD,IAAM,oBAASO,GAAM0Q,QAAQ,gBAAiB,UAIvF,EAAAC,gBAAkB,SAACpM,GACjB,SAAKvH,SAAS,CAAEyC,IAAK8E,EAAM2E,cAAchJ,MAAOuQ,mBAAmB,KAErE,EAAAG,wBAA0B,SAACrM,GACzB,SAAKvH,SAAS,CAAEkT,YAAa3L,EAAM2E,cAAchJ,SAEnD,EAAA2Q,iBAAmB,SAAC,G,IAAE3Q,EAAA,EAAAA,MAA+B,SAAKlD,SAAS,CAAEsG,KAAMpD,KAE3E,EAAA+E,qBAAuB,SAAC,G,IAAE/E,EAAA,EAAAA,MAA+B,SAAKlD,SAAS,CAAE4H,SAAU1E,KAEnF,EAAA4Q,mBAAqB,SAAC,G,IAAE5Q,EAAA,EAAAA,MAA+B,SAAKlD,SAAS,CAAEkQ,OAAQhN,KAE/E,EAAA6E,sBAAwB,SAACR,GACjB,sBAAEvE,EAAA,EAAAA,KAAME,EAAA,EAAAA,MACd,EAAKlD,UAAS,SAACR,G,MAAiB,MAAC,CAAEkH,OAAQ,GAAF,MAAOlH,EAAMkH,SAAM,OAAG1D,GAAOE,EAAK,SAG7E,EAAA6Q,gBAAkB,WAAM,OACtB,uBAAKlV,UAAU,eACb,yBAAOgN,QAAQ,0CACZ,oBAAU,Q,IAAS,sBAAIhN,UAAU,aAAW,MAE/C,yBACEmV,WAAW,EACXjL,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAG,yCACHuB,SAAU,EAAK6S,iBACfS,UAAU,EACV3N,KAAK,OACLpD,MAAO,EAAK1D,MAZM,SAiBxB,EAAA0U,eAAiB,WAAM,OACrB,uBAAKrV,UAAU,eACb,yBAAOgN,QAAQ,yCACZ,oBAAU,O,KAAU,EAAK3L,MAAM0S,YAAc,sBAAI/T,UAAU,aAAW,MAGxE,EAAKqB,MAAM0S,WACV,wBAAM/T,UAAU,sCAAsCuK,MAAO,EAAKlJ,MAAM0S,WAAWnQ,KAChF,EAAKvC,MAAM0S,WAAWnQ,KAGzB,yBACEsG,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAG,wCACHuB,SAAU,EAAKgT,gBACfM,UAAU,EACV3N,KAAK,OACLpD,MAAO,EAAK1D,MAjBG,QAuBvB,EAAA2U,uBAAyB,WAAM,OAC7B,uBAAKtV,UAAU,eACb,yBAAOgN,QAAQ,sDACZ,oBAAU,e,IAAgB,sBAAIhN,UAAU,aAAW,MAEtD,4BACEkK,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAG,qDACHuB,SAAU,EAAKiT,wBACfK,UAAU,EACV3K,KAAM,EACNpG,MAAO,EAAK1D,MAAM0T,cAEpB,gBAACkB,GAAA,EAAY,CAACvV,UAba,wCAiB/B,EAAAwV,iBAAmB,SAAC,G,IAAEnR,EAAA,EAAAA,MACpB,OAAO,gBAACmD,GAAA,EAAU,CAACC,KAAMpD,KAG3B,EAAAoR,gBAAkB,WAAM,OACtB,uBAAKzV,UAAU,mCACb,yBAAOgN,QAAQ,iCAAiC,oBAAU,SAC1D,gBAAC,IAAM,CACL/C,WAAW,EACXC,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAG,gCACHuB,SAAU,EAAKkT,iBACf5K,eAAgB,EAAKoL,iBACrBjR,QAAS,IAAWjD,KAAI,SAAAmG,GAAQ,MAAC,CAC/BH,MAAO,oBAAU,aAAcG,GAC/BpD,MAAOoD,MAET4C,YAAY,EACZhG,MAAO,EAAK1D,MAAM8G,KAClB6C,cAAe,EAfG,qBAoBxB,EAAAjB,qBAAuB,SAAC,G,IAAEhF,EAAA,EAAAA,MAA+B,uBAACuK,EAAA,EAAc,CAAC7F,SAAU1E,KAEnF,EAAAqR,oBAAsB,WAAM,OAC1B,uBAAK1V,UAAU,mCACb,yBAAOgN,QAAQ,qCAAqC,oBAAU,aAC9D,gBAAC,IAAM,CACL/C,WAAW,EACXC,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAG,oCACHuB,SAAU,EAAKsH,qBACfgB,eAAgB,EAAKf,qBACrB9E,QAAS,IAAWjD,KAAI,SAAAyH,GAAY,MAAC,CACnCzB,MAAO,oBAAU,WAAYyB,GAC7B1E,MAAO0E,MAETsB,YAAY,EACZhG,MAAO,EAAK1D,MAAMoI,SAClBuB,cAAe,EAfO,yBAoB5B,EAAAqL,kBAAoB,WAAM,OACxB,uBAAK3V,UAAU,sBACb,yBAAOgN,QAAQ,mCACZ,oBAAU,gCAEb,gBAAC,IAAM,CACL/C,WAAW,EACXC,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAG,kCACHuB,SAAU,EAAKmT,mBACf1Q,QAAS,IAAcjD,KAAI,SAAA+P,GAAU,MAAC,CACpC/J,MAAO,oBAAU,eAAgB+J,GACjChN,MAAOgN,MAEThH,YAAY,EACZhG,MAAO,EAAK1D,MAfQ,WAoB1B,EAAAiV,qBAAuB,SAAC9N,GAA2B,OACjD,uBAAK9H,UAAU,cAAc4D,IAAKkE,EAAMlE,KACtC,yBAAO5D,UAAU,aAAagN,QAASlF,EAAMlE,KAC1CkE,EAAMlE,KAGO,SAAfkE,EAAML,KACL,4BACEyC,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAIuH,EAAMlE,IACVO,KAAM2D,EAAMlE,IACZ9B,SAAU,EAAKoH,sBACfsB,YAAa1C,EAAMC,aACnB0C,KAAM,EACNpG,MAAO,EAAK1D,MAAMkH,OAAOC,EAAMlE,MAAQ,KAGzC,yBACEsG,SAAU,EAAKvJ,MAAMiI,WACrBrI,GAAIuH,EAAMlE,IACVO,KAAM2D,EAAMlE,IACZ9B,SAAU,EAAKoH,sBACfsB,YAAa1C,EAAMC,aACnBN,KAAK,OACLpD,MAAO,EAAK1D,MAAMkH,OAAOC,EAAMlE,MAAQ,KAG3C,uBACE5D,UAAU,0BAEV0K,wBAAyB,CAAEC,OAAQ,oBAAS7C,EAAM8C,UA9BL,SA1NjD,IAAM/C,EAAyB,GAC/B,GAAIxG,EAAM0S,YAAc1S,EAAM0S,WAAWlM,OACvC,IAAoB,UAAAxG,EAAM0S,WAAWlM,OAAjB,eAAyB,CAAxC,IAAMC,EAAK,KACdD,EAAOC,EAAMlE,KAAOkE,EAAMC,cAAgB,G,OAG9C,EAAKpH,MAAQ,CACX0T,YAAchT,EAAM0S,YAAc1S,EAAM0S,WAAW8B,QAAW,GAC9DjS,IAAK,GACLgR,mBAAmB,EACnBzQ,KAAO9C,EAAM0S,YAAc1S,EAAM0S,WAAW5P,MAAS,GACrD0D,OAAM,EACN2M,cAAc,EACdzL,SAAW1H,EAAM0S,YAAc1S,EAAM0S,WAAWhL,UAAa1H,EAAM2S,aAAajL,SAChFsI,OAAShQ,EAAM0S,YAAc1S,EAAM0S,WAAW1C,QAAWhQ,EAAM2S,aAAa3C,OAC5EzI,YAAY,EACZnB,KAAOpG,EAAM0S,YAAc1S,EAAM0S,WAAWtM,MAASpG,EAAM2S,aAAavM,M,EA8R9E,OAnTiD,QAyB/C,YAAAjD,kBAAA,WACEC,KAAKhE,SAAU,GAGjB,YAAAoE,qBAAA,WACEJ,KAAKhE,SAAU,GAoOjB,YAAA8F,OAAA,WACQ,iBAAEwN,EAAA,EAAAA,WAAYC,EAAA,EAAAA,aACd,aAAEQ,EAAA,EAAAA,aAAc5L,EAAA,EAAAA,WACd,IAAAf,cAAA,WACFkF,EAASgH,EACX,oBAAU,mCACV,oBAAU,mCACV+B,EAASrR,KAAKpD,MAAM0S,WAAa,oBAAU,QAAU,oBAAU,UAInE,OAHItP,KAAK9D,MAAM6T,eACbsB,EAAS,oBAAU,4BAGnB,gBAAC,IAAK,CAACnM,aAAcoD,EAAQlD,eAAgBpF,KAAKpD,MAAM4H,SACtD,wBAAMc,SAAUtF,KAAKgE,kBACnB,uBAAKzI,UAAU,cACb,0BAAK+M,IAGP,uBAAK/M,UAAU,8BACZwU,GACC,gBAAC9H,EAAA,MAAK,CAAC1C,QAAQ,WAAW,oBAAU,iCAGrCvF,KAAKyQ,kBACLzQ,KAAK4Q,iBACN,uBAAKrV,UAAU,+BAEX+T,GAActP,KAAKgR,kBACpBhR,KAAKiR,sBACLjR,KAAKkR,qBAEPlR,KAAK6Q,yBACLzN,EAAOvG,IAAImD,KAAKmR,uBAGnB,uBAAK5V,UAAU,cACZ4I,GAAc,qBAAG5I,UAAU,yBAC5B,gBAAC,eAAY,CAACkK,SAAUzF,KAAK9D,MAAMiI,YAAakN,GAChD,gBAAC,kBAAe,CACd5L,SAAUtB,EACVrI,GAAG,2CACHC,QAASiE,KAAKpD,MAAM4H,SACnB,oBAAU,eAOzB,EAnTA,CAAiD,iB,+UCrBjD,uE,OACE,EAAAxI,SAAU,EACV,EAAAE,MAAe,CAAEsM,OAAO,GAUxB,EAAA8I,YAAc,WACZ,EAAK5U,SAAS,CAAE8L,OAAO,KAGzB,EAAA+I,iBAAmB,WACb,EAAKvV,SACP,EAAKU,SAAS,CAAE8L,OAAO,KAI3B,EAAAgJ,WAAa,SAACvB,GACZ,EAAKsB,mBACL,EAAK3U,MAAM2H,OAAO0L,I,EAmBtB,OA3C8C,QAI5C,YAAAlQ,kBAAA,WACEC,KAAKhE,SAAU,GAGjB,YAAAoE,qBAAA,WACEJ,KAAKhE,SAAU,GAkBjB,YAAA8F,OAAA,WACE,OACE,gCACG9B,KAAKpD,MAAMmN,SAAS,CAAEhO,QAASiE,KAAKsR,cACpCtR,KAAK9D,MAAMsM,OACV,gBAAC,GAAmB,CAClB8G,WAAYtP,KAAKpD,MAAM0S,WACvB9K,QAASxE,KAAKuR,iBACdhN,OAAQvE,KAAKwR,WACbnN,aAAcrE,KAAKpD,MAAMyH,aACzBkL,aAAcvP,KAAKpD,MAAM2S,iBAMrC,EA3CA,CAA8C,iB,khBCQ9C,uE,OACE,EAAAvT,SAAU,EACV,EAAAE,MAAe,CAAEgT,SAAS,GAiB1B,EAAAuC,WAAa,WACX,EAAK/U,SAAS,CAAEwS,SAAS,IACzB,YAAY,CACVwC,EAAG,uBACHrN,aAAc,EAAKzH,MAAMyH,aACzB2L,aAAc,EAAKpT,MAAM+U,YAAYxS,MACpC1C,MACD,SAAC,G,IAAEmV,EAAA,EAAAA,MACG,EAAK5V,SACP,EAAKU,SAAS,CAAEkV,MAAK,EAAE1C,SAAS,OAGpC,WACM,EAAKlT,SACP,EAAKU,SAAS,CAAEwS,SAAS,QAMjC,EAAA2C,iBAAmB,SAAC5B,GACd,EAAKjU,SACP,EAAKU,UAAS,SAAC,G,IAAE,IAAAkV,MAAwB,MAAC,CACxCA,MAAO,QADQ,IAAQ,EAAR,KACC,CAAE3B,SAKxB,EAAA6B,iBAAmB,SAACC,GAClB,OAAO,YAAW,CAAE5S,IAAK4S,EAAS1N,aAAc,EAAKzH,MAAMyH,eAAgB5H,MAAK,WAC1E,EAAKT,SACP,EAAKU,UAAS,SAAC,G,IAAE,IAAAkV,MAAiB,MAAC,CACjCA,YADe,IAAQ,EAAR,MACFpT,QAAO,SAAA2E,GAAQ,OAAAA,EAAKhE,MAAL,aAMpC,EAAA6S,WAAa,SAAC7O,GAAiB,OAC7B,kCAAeA,EAAKhE,IAAKA,IAAKgE,EAAKhE,KACjC,sBAAI5D,UAAU,iCACZ,gBAAC,OAAI,CAAC0W,GAAI,aAAW9O,EAAKhE,IAAK,EAAKvC,MAAMyH,eAAgBlB,EAAKzD,OAGjE,sBAAInE,UAAU,qCACZ,gBAAC4O,EAAA,EAAc,CAAC5O,UAAU,sBAAsB+I,SAAUnB,EAAKmB,YAGjE,sBAAI/I,UAAU,uCACX4H,EAAKC,QACJD,EAAKC,OACF5E,QAAO,SAAA6E,GAAS,OAAAA,EAAA,gBAChBxG,KAAI,SAAAwG,GAAS,OACZ,uBAAK9H,UAAU,qCAAqC4D,IAAKkE,EAAMlE,KAC7D,wBAAM5D,UAAU,OAAO8H,EAAMlE,KAC7B,wBAAM5D,UAAU,OAAK,MACrB,wBAAMA,UAAU,QAAQuK,MAAOzC,EAAMC,cAClCD,EALO,mBAWnB,EAAKzG,MAAMsV,WACV,sBAAI3W,UAAU,oCACZ,gBAAC,KAAa,CACZ4W,kBAAmB,oBAAU,UAC7BC,YAAajP,EAAKhE,IAClBkT,eAAe,EACfC,UAAW,kCAAwB,qCAAsCnP,EAAKzD,MAC9EyF,YAAa,oBAAU,4BACvBoN,UAAW,EAAKT,mBACf,SAAC,G,IAAE/V,EAAA,EAAAA,QAAc,OAChB,gBAAC,SAAM,CAACR,UAAU,mCAAmCQ,QAASA,GAC3D,oBAAU,iB,EA2C3B,OAxIoD,QAIlD,YAAAgE,kBAAA,WACEC,KAAKhE,SAAU,EACfgE,KAAKyR,cAGP,YAAAvR,mBAAA,SAAmBC,GACbA,EAAUwR,YAAYxS,MAAQa,KAAKpD,MAAM+U,YAAYxS,KACvDa,KAAKyR,cAIT,YAAArR,qBAAA,WACEJ,KAAKhE,SAAU,GAsFjB,YAAA8F,OAAA,WACQ,iBAAEoN,EAAA,EAAAA,QAAS,IAAA0C,aAAA,IAAQ,EAAR,KAEjB,OACE,uBAAKrW,UAAU,4CACb,uBAAKA,UAAU,4CACb,uBAAKA,UAAU,kCAEf,sBAAIA,UAAU,6BAA6B,oBAAU,8BAEpDyE,KAAKpD,MAAMsV,WACV,gBAAC,GAAgB,CACf3N,OAAQvE,KAAK6R,iBACbxN,aAAcrE,KAAKpD,MAAMyH,aACzBkL,aAAcvP,KAAKpD,MAAM+U,cACxB,SAAC,G,IAAE5V,EAAA,EAAAA,QAAc,OAChB,gBAAC,SAAM,CAACR,UAAU,oCAAoCQ,QAASA,GAC5D,oBAAU,2BAMnB,gBAAC,KAAe,CAACR,UAAU,cAAc2T,QAASA,GAC/C0C,EAAM/T,OAAS,GACd,yBAAOtC,UAAU,2BAA2BO,GAAG,oCAC7C,6BAAQ,KAAO8V,GAAO,SAAAzO,GAAQ,OAAAA,EAAA,QAAWtG,IAAImD,KAAKgS,kBAQlE,EAxIA,CAAoD,iB,2WCKpD,0E,OACE,EAAAhW,SAAU,EACV,EAAAE,MAAe,CAAEgT,SAAS,GAiB1B,EAAAsD,YAAc,WACN,cACWrT,EAAA,cAAAA,IACfkF,EAAA,EAAAA,aAGF,EAAK3H,SAAS,CAAEwS,SAAS,IACzB,aACE,CACEuD,SAAU,QACVb,MAAOzS,EACPkF,aAAY,GAEd,YACA5H,MACA,SAAC,G,IAAEiW,EAAA,EAAAA,MAAOrL,EAAA,EAAAA,SACR,GAAI,EAAKrL,QAAS,CAGhB,IAFQ,QAAA2W,kBAAA,WAAiB1H,EAAA,EAAAA,OACnB2H,EAAW,G,WACN9V,GACT,IAAM+V,EAAUF,EAAW9H,MAAK,SAAAiI,GAAa,OAAAA,EAAU3T,MAAQrC,EAAlB,OACzC+V,GACFD,EAASlQ,KAAK,CAAEqQ,MAAOjW,EAAKiW,MAAO5T,IAAK0T,EAAQ1T,IAAKO,KAAMmT,EAAQnT,QAHpD,MAAAgT,EAAA,eAAK,C,EAAT,MAMf,EAAKhW,SAAS,CAAEkW,SAAQ,EAAE1D,SAAS,EAAOpM,MAAOmI,EAAOnI,YAG5D,WACM,EAAK9G,SACP,EAAKU,SAAS,CAAEwS,SAAS,QAMjC,EAAA8D,YAAc,WACN,cACW7T,EAAA,cAAAA,IACfkF,EAAA,EAAAA,aAGMvB,EAAA,QAAAA,MACR,QAActD,IAAVsD,EACF,OAAO,KAET,IAAMmQ,EAAO,aAAa,CAAER,SAAU,QAASb,MAAOzS,GAAOkF,GAEvD6O,EACJ,wBAAM3X,UAAU,sBACb,IACD,gBAAC,OAAI,CAAC0W,GAAIgB,GAAOnQ,GAChB,KAIL,OAAK,EAAKlG,MAAMuW,SAASC,gBAKvB,gBAAC,IAAO,CAAC1X,QAAS,oBAAU,2CAA4CwX,GAJjEA,GAQX,EAAAG,cAAgB,SAACR,GACT,cACW1T,EAAA,cAAAA,IACfkF,EAAA,EAAAA,aAGI4O,EAAO,aACX,CAAER,SAAU,QAASb,MAAOzS,EAAKyT,SAAUC,EAAQ1T,KACnDkF,GAEF,OACE,sBAAIlF,IAAK0T,EAAQ1T,KACf,sBAAI5D,UAAU,iCAAiCsX,EAAQnT,MACvD,sBAAInE,UAAU,uCACZ,gBAAC,OAAI,CAAC0W,GAAIgB,GAAO,wBAAcJ,EAAQE,MAAO,W,EAmCxD,OArIuC,QAIrC,YAAAhT,kBAAA,WACEC,KAAKhE,SAAU,EACfgE,KAAKwS,eAGP,YAAAtS,mBAAA,SAAmBC,GACbA,EAAUwR,cAAgB3R,KAAKpD,MAAM+U,aACvC3R,KAAKwS,eAIT,YAAApS,qBAAA,WACEJ,KAAKhE,SAAU,GAwFjB,YAAA8F,OAAA,WACQ,iBAAEoN,EAAA,EAAAA,QAAS,IAAA0D,gBAAA,IAAW,EAAX,KAEjB,OACE,uBAAKrX,UAAU,sCACb,uBAAKA,UAAU,kCAEf,gBAAC,KAAe,CAAC2T,QAASA,GACxB,sBAAI3T,UAAU,6BACX,oBAAU,uBACVyE,KAAKgT,eAGPJ,EAAS/U,OAAS,GACjB,yBAAOtC,UAAU,gEACf,6BACE,0BACE,sBAAIA,UAAU,gCAAgC+X,QAAS,GACpD,oBAAU,0CAGdV,EAAS/V,IAAImD,KAAKqT,oBAQnC,EArIA,CAAuC,iBAuIxB,UAAAE,GAAA,GAAa,I,0VC3J5B,uE,OACE,EAAAC,gBAAkB,SAACnQ,GAA2B,OAC5C,sBAAI9H,UAAU,gCAAgC4D,IAAKkE,EAAMlE,KACvD,sBAAI5D,UAAU,sCAAsC8H,EAAMlE,KAC1D,sBAAI5D,UAAU,6CACZ,qBAEE0K,wBAAyB,CAAEC,OAAQ,oBAAS7C,EAAM8C,UAAY,YAExC3G,IAAvB6D,EAAMC,cACL,uBAAK/H,UAAU,mBACZ,oBAAU,yCACX,2BACA,wBAAMA,UAAU,uCAAuC8H,EAZnB,kB,EA6BhD,OA9BmD,QAoBjD,YAAAvB,OAAA,WACE,OACE,uBAAKvG,UAAU,sBACb,sBAAIA,UAAU,6BAA6B,oBAAU,4BACrD,yBAAOA,UAAU,kCACf,6BAAQyE,KAAKpD,MAAMwG,OAAOvG,IAAImD,KAAKwT,qBAK7C,EA9BA,CAAmD,iB,qYCYnD,uE,OACE,EAAAtX,MAAe,CAAEsM,OAAO,GAExB,EAAAiL,kBAAoB,WAClB,EAAK/W,SAAS,CAAE8L,OAAO,KAGzB,EAAAkL,iBAAmB,WACjB,EAAKhX,SAAS,CAAE8L,OAAO,K,EA2B3B,OAnC8C,QAW5C,YAAA1G,OAAA,WACE,OACE,gCACE,gBAAC,SAAM,CACLvG,UAAWyE,KAAKpD,MAAMrB,UACtBO,GAAG,wCACHC,QAASiE,KAAKyT,mBACbzT,KAAKpD,MAAM+W,YAGb3T,KAAK9D,MAAMsM,OACV,gBAACoL,GAAA,QAAmB,CAClB1Q,WAAYlD,KAAKpD,MAAMsG,WACvBiC,YAAanF,KAAKpD,MAAMuI,YACxBX,QAASxE,KAAK0T,iBACdnP,OAAQvE,KAAKpD,MAAM2H,OACnBF,aAAcrE,KAAKpD,MAAMyH,aACzBb,SAAUxD,KAAKpD,MAAM4G,SACrBL,KAAMnD,KAAKpD,MAAMuG,SAM7B,EAnCA,CAA8C,iB,8hBCZhC,SAAU0Q,GAAoB,GAAE,IAAAtY,EAAA,EAAAA,UAAWmQ,EAAA,EAAAA,YAAa,oCAC9D0B,EAAuB,cAAhB1B,EAA8B,UAAOoI,IAAM,UAAOC,cAE/D,OACE,0BACExY,UAAWA,EACXyY,OAAQ,GACRC,QAAQ,MACRC,QAAQ,YACRC,MAAO,GACPC,SAAS,WACTC,WAAW,gCACPC,GACJ,wBACEC,EAAE,uaACFC,MAAO,CAAEpH,KAAI,EAAEqH,SAAU,c,mVCEjC,uE,OACE,EAAAC,eAAiB,WAAM,SAAK9X,MAAL,cAEvB,EAAA+X,iBAAmB,SAACxV,GACdA,GACF,YAAe,CACbA,IAAG,EACHkF,aAAc,EAAKzH,MAAMyH,aACzBlB,KAAM,EAAKvG,MAAM+U,YAAYxS,MAC5B1C,KAAK,EAAKG,MAAMgY,cAAc,gBAIrC,EAAAC,aAAe,SAAC1V,GACVA,GACF,YAAa,CACXA,IAAG,EACHkF,aAAc,EAAKzH,MAAMyH,aACzBlB,KAAM,EAAKvG,MAAM+U,YAAYxS,IAC7B2V,OAAO,IACNrY,KAAK,EAAKG,MAAMmY,YAAY,gBAInC,EAAAC,uBAAyB,SAAC9R,EAA8BO,GACtD,IAAKA,EAAQwR,WACX,OAAO,KAET,IAAMC,EAAc,aAClBzR,EAAQwR,WACRxR,EAAQI,SACR,EAAKjH,MAAMyH,cAEb,OACE,uBAAK9I,UAAU,oDACY,cAAvB2H,EAAWiS,SAAkD,cAAvBjS,EAAWiS,UACjD,gCACE,gBAACtB,GAAmB,CAACtY,UAAU,cAAcmQ,YAAaxI,EAAWiS,UACrE,gBAAC,OAAI,CAAC5Z,UAAU,iDAAiD0W,GAAIiD,GAClEzR,EAAQwR,eAQrB,EAAAG,eAAiB,SAAClS,EAA8BmS,GAAwC,OACtF,sBAAI9Z,UAAU,gDACZ,gBAAC,IAAO,CAACG,QAAS,oBAAU,qCAC1B,4BACE,gBAACyO,EAAA,EAAc,CAAC5O,UAAU,6BAA6B+I,SAAUpB,EAAWoB,kBAG1D9E,IAArB6V,GAAkCnS,EAAWoB,WAAa+Q,EAAiB/Q,UAC1E,uBAAK/I,UAAU,mDACZ,oBAAU,yB,IAA2B,oBAAU,WAAY8Z,EAToB,aAexF,EAAA7B,gBAAkB,SAChBnQ,EACAgS,GAEA,IAAMC,EACJD,GAAoBA,EAAiBjS,OAAOyH,MAAK,SAAA0K,GAAK,OAAAA,EAAEpW,MAAQkE,EAAV,OAClDmS,EAAgBF,GAAiBA,EAAc1V,MAErD,OACE,uBAAKrE,UAAU,gDAAgD4D,IAAKkE,EAAMlE,KACxE,wBAAM5D,UAAU,OAAO8H,EAAMlE,KAC7B,wBAAM5D,UAAU,OAAK,MACrB,wBAAMA,UAAU,QAAQuK,MAAOzC,EAAMzD,OAClCyD,EAAMzD,OAERyV,GAAoBhS,EAAMzD,QAAU4V,GACnC,uBAAKja,UAAU,mDACZ,oBAAU,yB,IAA0B,wBAAMA,UAAU,SAASia,MAOxE,EAAAC,iBAAmB,SAACvS,EAA8BmS,GAAwC,OACxF,sBAAI9Z,UAAU,kDACX2H,EAAWE,OAAOvG,KAAI,SAAAwG,GAAS,SAAKmQ,gBAAgBnQ,EAArB,QAIpC,EAAAqS,cAAgB,SAACxS,EAA8BO,GAC7C,IAAMkS,EAAUlS,EAAQE,SAAWF,EAAQE,QAAQC,OAASH,EAAQC,UAC5DiO,EAAA,QAAAA,YACFiE,EAAmC,SAAvB1S,EAAWiS,SAAsB1R,EAAQoS,UAC3D,OACE,sBAAIta,UAAU,+CACXoa,GACC,iCACIhE,EAAYmE,YACZ,gBAAC,GAAgB,CACf5S,WAAYA,EACZyQ,WAAY,oBAAU,eACtBpY,UAAU,6CACV4J,YAAa,oBAAU,+BACvBZ,OAAQ,EAAKmQ,eACbrQ,aAAc,EAAKzH,MAAMyH,aACzBb,SAAU,CAACC,GACXN,KAAMwO,IAGTiE,EACwB,cAAvB1S,EAAWiS,SACX1R,EAAQwR,YACN,gBAAC,KAAa,CACZ9C,kBAAmB,oBAAU,OAC7BC,YAAa3O,EAAQtE,IACrBmT,UAAW,kCACT,mDACA7O,EAAQwR,YAEV9P,YAAa,oBAAU,4CACvBoN,UAAW,EAAKsC,eACf,SAAC,G,IAAE9Y,EAAA,EAAAA,QAAc,OAChB,gBAAC,SAAM,CACLR,UAAU,oEACVQ,QAASA,GACR,oBAAU,gDAMnB,gBAAC,KAAa,CACZoW,kBAAmB,oBAAU,OAC7BC,YAAa3O,EAAQtE,IACrBmT,UAAW,oBAAU,mCACrBnN,YAAa,oBAAU,2BACvBoN,UAAW,EAAKoC,mBACf,SAAC,G,IAAE5Y,EAAA,EAAAA,QAAc,OAChB,gBAAC,SAAM,CACLR,UAAU,wEACVQ,QAASA,GACR,oBAAU,kCAW7B,EAAAkQ,iBAAmB,SAAC/I,GACZ,cAAE,IAAA6S,mBAAA,IAAc,EAAd,KAAkBpE,EAAA,EAAAA,YACpBlO,EAAU,EAAK7G,MAAMsK,mBAAmBhE,EAAW8S,UACzD,IAAKvS,EACH,OAAO,KAGT,IAAM4R,EAAmBU,EAAYlL,MAAK,SAAAoL,GAAK,OAAAA,EAAED,WAAavS,EAAf,aAE/C,OACE,qCAAkBA,EAAQtE,IAAKA,IAAKsE,EAAQtE,KAC1C,sBAAI5D,UAAU,4CACZ,gBAAC,OAAI,CAAC0W,GAAI,aAAqBxO,EAAQ/D,KAAM+D,EAAQI,SAAU,EAAKjH,MAAMyH,eACvEZ,EAAQ/D,MAEV+D,EAAQC,WAAa,gBAACpI,GAAA,EAA0B,CAACC,UAAU,gBAC3D,EAAKyZ,uBAAuB9R,EAAYO,IAG1C,EAAK2R,eAAelS,EAAYmS,IAC/B1D,EAAY5M,aAAe,EAAK0Q,iBAAiBvS,EAAYmS,GAC9D,EAAKK,cAAcxS,EAAYO,K,EA8CxC,OA9NiD,QAqL/C,YAAA3B,OAAA,WACQ,iBAAE,IAAAiU,mBAAA,IAAc,EAAd,KAAkB7O,EAAA,EAAAA,mBAAoByK,EAAA,EAAAA,YACxCuE,EAAc5X,OAAOY,OAAOgI,GAAoBP,MAAK,SAAAlD,GACzD,OAAA8C,QAAQ9C,EAAQE,SAAWF,EAAQE,QAAQC,MAAQH,EAAQI,WAAa8N,EAAY7N,SAGtF,OACE,uBAAKvI,UAAU,wCACb,uBAAKA,UAAU,gDACb,uBAAKA,UAAU,kCAEf,sBAAIA,UAAU,6BACZ,gBAAC4a,GAAA,EAAe,CAACC,QAAS,oBAAU,oCAGrCF,GACC,gBAAC,GAAgB,CACfvC,WAAY,oBAAU,yBACtBpY,UAAU,oDACV4J,YAAa,oBAAU,4CACvBZ,OAAQvE,KAAK0U,eACbrQ,aAAcrE,KAAKpD,MAAMyH,aACzBb,SAAU,KACRxD,KAAKpD,MAAMsK,oBACX,SAAAzD,GAAW,OAACsS,EAAYlL,MAAK,SAAA3H,GAAc,OAAAA,EAAW8S,WAAavS,EAAxB,UAE7CN,KAAMwO,IAIToE,EAAYlY,OAAS,GACpB,yBACEtC,UAAU,iDACVO,GAAG,wCACH,6BAAQia,EAAYlZ,IAAImD,KAAKiM,uBAO3C,EA9NA,CAAiD,iB,giBCajD,uE,OACE,EAAAjQ,SAAU,EACV,EAAAE,MAAe,CAAEgT,SAAS,GAmB1B,EAAAmH,iBAAmB,WACjB,OAAO,YAAe,CACpBC,SAAS,EACTnX,IAAK,EAAKvC,MAAMmV,QAChB1N,aAAc,EAAKzH,MAAMyH,eACxB5H,MACD,SAAC,G,IAAE6Z,EAAA,EAAAA,QAASnT,EAAA,EAAAA,KACN,EAAKnH,SACP,EAAKU,SAAS,CAAE4Z,QAAO,EAAEpH,SAAS,EAAOyC,YAAaxO,OAG1D,WACM,EAAKnH,SACP,EAAKU,SAAS,CAAEwS,SAAS,QAMjC,EAAAqH,iBAAmB,SAAC5E,GACd,EAAK3V,SACP,EAAKU,SAAS,CAAEiV,YAAW,KAI/B,EAAA6E,iBAAmB,SAACzJ,GAElB,IAAM0J,EAAU,EAAKva,MAAMyV,aAAe,EAAKzV,MAAMyV,YAAY5E,KACjE,EAAKrQ,UAAS,SAAAR,GACZ,OAAAA,EAAMyV,YAAc,CAAEA,YAAa,GAAF,MAAOzV,EAAMyV,aAAW,CAAE5E,KAAI,KAAO,QAExE,YAAW,CACT5N,IAAK,EAAKvC,MAAMmV,QAChB1N,aAAc,EAAKzH,MAAMyH,aACzB0I,KAAMA,EAAK0C,SACViH,OAAM,WACH,EAAK1a,SACP,EAAKU,UAAS,SAAAR,GACZ,OAAAA,EAAMyV,YAAc,CAAEA,YAAa,GAAF,MAAOzV,EAAMyV,aAAW,CAAE5E,KAAM0J,KAAc,YAMvF,EAAA/B,eAAiB,WACf,OAAO,EAAK2B,mBAAmB5Z,MAAK,WAC5B,cAAEsV,EAAA,EAAAA,QAAS/D,EAAA,EAAAA,gBACjB,GAAIA,GAAmB,EAAK9R,MAAMoa,QAAS,CACzC,IAAM7W,EAAS,EAAKvD,MAAMoa,QAAQzL,MAAK,SAAApL,GAAU,OAAAA,EAAOuW,WAAahI,EAApB,OAC7CvO,GACF,EAAK7C,MAAMmY,WAAW/G,EAAgB7O,IAAK4S,EAAStS,QAM5D,EAAAkV,iBAAmB,WACjB,OAAO,EAAK0B,mBAAmB5Z,MAAK,WAC5B,cAAEsV,EAAA,EAAAA,QAAS/D,EAAA,EAAAA,gBAEfA,GACA,EAAK9R,MAAMoa,UACV,EAAKpa,MAAMoa,QAAQzL,MAAK,SAAApL,GAAU,OAAAA,EAAOuW,WAAahI,EAApB,QAEnC,EAAKpR,MAAMgY,aAAa5G,EAAgB7O,IAAK4S,OAKnD,EAAA4E,aAAe,WACb,OAAO,YAAW,CAAExX,IAAK,EAAKvC,MAAMmV,QAAS1N,aAAc,EAAKzH,MAAMyH,eAAgB5H,MAAK,WACzF,SAAKG,MAAMga,SAAS,EAAKha,MAAMmV,a,EAwHrC,OApNyC,QAIvC,YAAAhS,kBAAA,WACEC,KAAKhE,SAAU,EACfgE,KAAKtD,SAAS,CAAEwS,SAAS,IACzBlP,KAAKqW,oBAGP,YAAAnW,mBAAA,SAAmBC,GACbA,EAAU4R,UAAY/R,KAAKpD,MAAMmV,UACnC/R,KAAKtD,SAAS,CAAEwS,SAAS,IACzBlP,KAAKqW,qBAIT,YAAAjW,qBAAA,WACEJ,KAAKhE,SAAU,GA8EjB,YAAA8F,OAAA,WACU,IAAA6P,EAAA,WAAAA,YAER,IAAKA,EACH,OAAO,uBAAKpW,UAAU,wBAGlB,iBACJsb,EAAA,EAAAA,iBACAC,EAAA,EAAAA,SACAC,EAAA,EAAAA,oBACA1S,EAAA,EAAAA,aACA6C,EAAA,EAAAA,mBAEM,IAAA9D,cAAA,WAEF4T,IAAarF,EAAY5M,YACzBkS,EAAaH,KAAc9W,KAAKpD,MAAMia,kBAAoBG,EAEhE,OACE,uBAAKzb,UAAU,uBACb,gBAAC,KAAe,CAAC2T,QAASlP,KAAK9D,MAAMgT,SACnC,gBAACgI,GAAA,EAAe,CACdJ,SAAUA,EACV3I,eAAgBnO,KAAKpD,MAAMuR,eAC3BgJ,aAAcnX,KAAKwW,iBACnBnS,aAAcA,EACdqI,uBAAwB1M,KAAKpD,MAAM8P,uBACnCiF,YAAaA,IAGf,gBAACyF,GAAA,EAAsB,CACrBN,SAAUA,EACVzZ,SAAU2C,KAAKuW,iBACflS,aAAcA,EACdsN,YAAaA,IAGdvO,EAAOvF,OAAS,GAAK,gBAAC,GAAqB,CAACuF,OAAQA,IAEpD6T,GACC,uBAAK1b,UAAU,uDAGb,gBAAC,GAAgB,CACf+T,WAAYqC,EACZpN,OAAQvE,KAAKuW,iBACblS,aAAcA,EACdkL,aAAcoC,IACb,SAAC,G,IAAE5V,EAAA,EAAAA,QAAc,OAChB,gBAAC,SAAM,CACLR,UAAU,iBACVO,GAAG,yCACHC,QAASA,GACR,oBAAU,YAIjB,gBAAC,KAAa,CACZoW,kBAAmB,oBAAU,UAC7BE,eAAe,EACfC,UAAW,kCACT,qCACAX,EAAYjS,MAEdyF,YAAa,oBAAU,4BACvBoN,UAAWvS,KAAK2W,eACf,SAAC,G,IAAE5a,EAAA,EAAAA,QAAc,OAChB,gCACE,gBAAC,SAAM,CACLR,UAAU,mCACVO,GAAG,kCACHC,QAASA,GACR,oBAAU,WAEb,gBAAC,KAAW,CACVR,UAAU,cACVG,QACE,uBAAKH,UAAU,oCACZ,oBAAU,4CAU1BoW,EAAYmE,YACX,gBAAC,GAAsB,CACrB5D,UAAW2E,GAAoBC,EAC/BzS,aAAcA,EACdsN,YAAaA,KAIfA,EAAYmE,aAAeiB,GAC3B,gBAAC,GAAmB,CAClBhB,YAAa/V,KAAK9D,MAAMoa,QACxBQ,SAAUA,EACV/B,WAAY/U,KAAK0U,eACjBE,aAAc5U,KAAK2U,iBACnBtQ,aAAcA,EACd6C,mBAAoBA,EACpByK,YAAaA,KAIfA,EAAYmE,YAAmC,qBAArBnE,EAAY3O,MACtC,gBAAC,GAAiB,CAACqB,aAAcA,EAAcsN,YAAaA,OAMxE,EApNA,CAAyC,iB,kjBCPzC,uE,OACE,EAAAgD,iBAAmB,WACjB,GAAI,EAAK/X,MAAMoR,gBAAiB,CAC9B,IAAM,EAAO,CACX7O,IAAK,EAAKvC,MAAMoR,gBAAgB7O,IAChCkF,aAAc,EAAKzH,MAAMyH,aACzBlB,KAAM,EAAKvG,MAAMuG,KAAKhE,KAExB,YAAe,GAAM1C,MACnB,WAAM,SAAKG,MAAMgY,aAAa,EAAKzV,IAAK,EAAlC,SACN,iBAKN,EAAAuV,eAAiB,SAACpQ,GAOhB,OANI,EAAK1H,MAAMoR,iBACb,EAAKpR,MAAMmY,WAAW,EAAKnY,MAAMoR,gBAAgB7O,IAAK,EAAKvC,MAAMuG,KAAKhE,IAAK,CACzEmF,SAAQ,EACR6Q,QAAS,SAGNhX,QAAQC,WAGjB,EAAAiZ,gBAAkB,SAACpT,GAEjB,IAAMqT,EAAoC,IAAjBrT,EAAMsT,WACJtT,EAAMuT,SAAWvT,EAAMwT,QAAUxT,EAAMyT,SAAWzT,EAAM0T,WAC3DL,IAIxBrT,EAAMC,iBACN,EAAKtH,MAAMgb,OAAO,EAAKhb,MAAMuG,KAAKhE,OAGpC,EAAA8M,iBAAmB,WACX,cAAE/I,EAAA,EAAAA,WAAY8K,EAAA,EAAAA,gBACpB,OAAK9K,EAKH,sBAAI3H,UAAU,sDACZ,gBAAC,KAAY,CAAC+I,SAAUpB,EAAWoB,WAClC0J,GAAmBA,EAAgBiH,YAClC,gCAC0B,cAAvB/R,EAAWiS,SACV,gBAAC,IAAO,CACNzZ,QAAS,kCACP,yBACAsS,EAAgBtO,KAChBsO,EAAgBiH,aAElB,gBAACpB,GAAmB,CAClBtY,UAAU,qBACVmQ,YAAaxI,EAAWiS,WAIN,cAAvBjS,EAAWiS,SACV,gBAAC,IAAO,CACNzZ,QAAS,kCACP,wBACAsS,EAAgBtO,KAChBsO,EAAgBiH,aAElB,gBAACpB,GAAmB,CAClBtY,UAAU,qBACVmQ,YAAaxI,EAAWiS,aA9B7B,MAwCX,EAAAO,cAAgB,WACR,cAAExS,EAAA,EAAAA,WAAY2U,EAAA,EAAAA,WAAY1U,EAAA,EAAAA,KAAM6K,EAAA,EAAAA,gBACtC,IAAKA,IAAoB6J,EACvB,OAAO,KAGT,IAAMC,EAAU9J,EAAgBrK,SAAWqK,EAAgBrK,QAAQoU,KACnE,OAAI/J,EAAgBtK,WAAaoU,EAE7B,sBAAIvc,UAAU,8DACX,EAAKyc,uBAAuB,GAAI,qCAKvBhK,EAAgBrK,SAAWqK,EAAgBrK,QAAQC,KAMjE,sBAAIrI,UAAU,8DACX2H,EACG,EAAK8U,uBAAuB9U,EAAWiS,UACtChS,EAAK2S,YACJ,gBAAC,GAAgB,CACfnC,WAAY,oBAAU,yBACtBpY,UAAU,+CACV4J,YAAa,oBAAU,4CACvBZ,OAAQ,EAAKmQ,eACbrQ,aAAc,EAAKzH,MAAMyH,aACzBb,SAAU,CAACwK,GACX7K,KAAMA,KAfT,MAsBX,EAAA6U,uBAAyB,SACvB7C,EACA8C,GAEA,YAFA,IAAAA,MAAA,mCAEmB,SAAZ9C,EACL,gBAAC,KAAa,CACZhD,kBAAmB,oBAAU,OAC7BG,UAAW,oBAAU,mCACrBnN,YAAa,oBAAU,2BACvBoN,UAAW,EAAKoC,mBACf,SAAC,G,IAAE5Y,EAAA,EAAAA,QAAc,OAChB,gBAAC,SAAM,CACLR,UAAU,4DACVQ,QAASA,GACR,oBAAU,+BAKjB,gBAAC,IAAO,CAACL,QAAS,oBAAUuc,IAC1B,gBAAC,SAAM,CAAC1c,UAAU,sEACf,oBAAU,8B,EAsErB,OAlN0C,QAkJxC,YAAAuG,OAAA,WACQ,iBAAEqB,EAAA,EAAAA,KAAMoI,EAAA,EAAAA,SACR2M,EAAU,GAAK/U,EAAK4J,MAAQ,GAAS5J,EAAKgV,SAAW,IAC3D,OACE,uBAAK5c,UAAW,GAAW,cAAe,CAAEgQ,SAAQ,IAAG,YAAapI,EAAKhE,KACvE,yBAAO5D,UAAU,qBACf,6BACE,0BACGyE,KAAKiM,mBAEN,0BACE,uBAAK1Q,UAAU,qBACb,gBAAC,OAAI,CACHA,UAAU,oBACVQ,QAASiE,KAAKqX,gBACdpF,GAAI,aAAW9O,EAAKhE,IAAKa,KAAKpD,MAAMyH,eACnClB,EAAKzD,MAEPyD,EAAK2S,YACJ,gBAAC,IAAO,CAACpa,QAAS,oBAAU,qCAC1B,wBAAMH,UAAU,qBACb,oBAAU,kCAOrB,sBAAIA,UAAU,+BACZ,uBAAKA,UAAU,wCACI,UAAhB4H,EAAKyJ,QACJ,wBAAMrR,UAAU,iCACb,oBAAU,eAAgB4H,EAAKyJ,SAGpC,wBAAMrR,UAAU,+CACb4H,EAAKiV,UAER,gBAAC,IAAO,CAAC1c,QAAS,oBAAU,4BAA6ByH,EAAKH,OAC5D,wBAAMzH,UAAU,+CACd,gBAAC,KAAa,CAAC2C,MAAOiF,EAAKH,OAC3B,wBAAMzH,UAAU,kCACb,oBAAU,aAAc4H,EAAKH,SAInCkV,EAAQra,OAAS,GAChB,gBAACwa,GAAA,EAAQ,CACPC,aAAa,EACb/c,UAAU,8CACVwR,KAAMmL,IAGV,gBAACK,GAAA,EAAkB,CAACpK,eAAgBnO,KAAKpD,MAAMuR,eAAgBhL,KAAMA,MAIxEnD,KAAK0V,qBAOpB,EAlNA,CAA0C,iB,stBCgE1C,eAGE,WAAY9Y,GAAZ,MACE,YAAMA,IAAM,KAHd,EAAAZ,SAAU,EA+DV,EAAAwc,gBAAkB,WAChB,WAAa,gBACb,EAAI,KAAM,gBAAgB,WAExB,OADA,EAAKC,sBACE,KAET,EAAI,OAAQ,gBAAgB,WAE1B,OADA,EAAKC,kBACE,KAET,EAAI,QAAS,gBAAgB,WAE3B,OADA,EAAKC,oBACE,KAET,EAAI,OAAQ,gBAAgB,WAE1B,OADA,EAAKC,cACE,MAIX,EAAAC,gBAAkB,WAAM,sCAExB,EAAAC,YAAc,SAAClc,EAAcgV,GAC3B,IAAM3R,EAAO,YAAQrD,EAAMmc,SAAS7a,OACpC,OAAO+B,GAAQ2R,EAAM/G,MAAK,SAAA1H,GAAQ,OAAAA,EAAKhE,MAAL,MAGpC,EAAA6Z,iBAAmB,WACT,IAAA3K,EAAA,QAAAA,WACR,OAAO/P,OAAOC,KAAK8P,GAChB7P,QAAO,SAACkU,GAAoB,OAAArE,EAAA,MAC5B7P,QAAO,SAACkU,GAAoB,yBAC5B7V,KAAI,SAAC6V,GAAoB,0BAG9B,EAAAuG,iBAAmB,WACjB,IAAMC,EAAS,CACb,aACA,OACA,OACA,WACA,WACA,SACA,UACA,OACA,eAKF,OAHI,EAAKhd,MAAMgC,MAAMuF,SACnByV,EAAOxW,KAAK,UAAW,UAElBwW,GAGT,EAAAC,oBAAsB,WAAM,WAC1BzH,EAAG,EAAKuH,mBAAmBxJ,OAC3BnB,OAAQ,EAAK0K,mBAAmBvJ,OAChCpL,aAAc,EAAKzH,MAAMyH,cAAgB,EAAKzH,MAAMyH,aAAalF,IACjE0N,GAzJc,IA0JduM,EAAG,QACA,YAAe,EAAKld,MANG,SAS5B,EAAAmd,YAAc,WACR,EAAKrd,SACP,EAAKU,SAAS,CAAEwS,SAAS,KAI7B,EAAAoK,iBAAmB,WACjB,EAAK5c,SAAS,CAAEwS,SAAS,IACzB,IAAM7K,EAAe,EAAKzH,MAAMyH,cAAgB,EAAKzH,MAAMyH,aAAalF,IACxEhB,QAAQob,IAAI,CAAC,YAAYlV,GAAe,EAAKmV,yBAAyB/c,MACpE,SAAC,G,IAAC,OAAEqa,EAAA,EAAAA,SAAUtI,EAAA,EAAAA,aAAkBhL,EAAA,KAAAA,SAC9B,EAAK9G,SAAS,CACZoa,SAAQ,EACR5P,mBAAoB,IAAM1D,EAAU,OACpCkJ,uBAAwB,IAAM8B,EAAc,SAE9C,EAAKiL,oBAEP,EAAKJ,cAIT,EAAAK,iBAAmB,SAACxb,GAClB,mBAAY,GAAD,MAAM,EAAKib,uBAA0Bjb,IAASzB,MACvD,SAAC,G,IAAE,IAAA6Z,QAAqB,IAAAhI,OAAmBiH,EAAA,EAAAA,EAAG1I,EAAA,EAAAA,GAAI+E,EAAA,EAAAA,MAAO9O,EAAA,EAAAA,MAIvD,MAAO,CAAEwT,QAHOqD,GA2bxB,SAAsBA,GAEpB,IADA,IAAMrD,EAAmB,GACS,MAAAhY,OAAOsb,QAAQD,GAAf,eAA4B,CAAnD,WAACxW,EAAA,KAAM4S,EAAA,KAChBO,EAAQnT,GAAQ,GAChB,IAA8C,UAAA4S,EAAA,eAAa,CAAhD,WAAEZ,EAAA,EAAAA,QAASa,EAAA,EAAAA,SAAU1R,EAAA,EAAAA,SAC9BgS,EAAQnT,GAAM6S,GAAY,CAAEb,QAAO,EAAE7Q,SAAQ,IAGjD,OAAOgS,EAnc6BuD,CAAaF,GAGzBrL,OAFHwL,GAqcvB,SAAqBA,GAEnB,IADA,IAAMxL,EAAiB,GACA,MAAAwL,EAAA,eAAW,CAEhC,IAFG,IAAMC,EAAQ,KACX7a,EAAyB,GACR,MAAA6a,EAAS7a,OAAT,eAAiB,CAAnC,IAAM8a,EAAQ,KACjB9a,EAAO8a,EAASC,KAAOD,EAASjH,MAElCzE,EAAO,YAAYyL,EAAS9d,WAAaiD,EAE3C,OAAOoP,EA9c2B4L,CAAYJ,GAEd7O,OADX,CAAEC,UAAWqK,EAAGpK,SAAU0B,EAAI/J,MAAK,GAChB8O,MAAK,OAI7C,EAAA6H,gBAAkB,SAACvb,GACjB,EAAKxB,SAAS,CAAEwS,SAAS,IACzB,EAAKwK,iBAAiBxb,GAAOzB,MAAK,SAAC,G,IAAE6Z,EAAA,EAAAA,QAAShI,EAAA,EAAAA,OAAQrD,EAAA,EAAAA,OAAQ2G,EAAA,EAAAA,MAC5D,GAAI,EAAK5V,QAAS,CAChB,IAAMme,EAAW,EAAKrB,YAAY,EAAKlc,MAAOgV,GACxCwI,EAAiB,YAAW,EAAKxd,MAAMmc,SAAS7a,OAChDqN,EAAWqG,EAAM/T,OAAS,EAAKsc,GAAYA,EAAShb,KAAQyS,EAAM,GAAGzS,SAAMK,EACjF,EAAK9C,SAAS,CACZ4Z,QAAO,EACPhI,OAAM,EACNY,SAAS,EACTiL,SAAQ,EACRlP,OAAM,EACN2G,MAAK,EACLrG,SAAQ,EACR6O,eAAc,OAGjB,EAAKf,cAGV,EAAAgB,eAAiB,WACP,IAAApP,EAAA,QAAAA,OACR,GAAIA,EAAQ,CACV,EAAKvO,SAAS,CAAEwS,SAAS,IACzB,IAAMoL,EAAWrP,EAAOC,UAAY,EACpC,EAAKwO,iBAAiB,CAAEnE,EAAG+E,EAAUhM,YAAQ9O,IAAa/C,MACxD,SAAC,G,IAAE6Z,EAAA,EAAAA,QAASrL,EAAA,EAAAA,OAAQ2G,EAAA,EAAAA,MACd,EAAK5V,SACP,EAAKU,UAAS,SAACR,GAAiB,MAAC,CAC/Boa,QAAS,GAAF,MAAOpa,EAAMoa,SAAYA,GAChCpH,SAAS,EACTjE,OAAM,EACN2G,MAAO,GAAI1V,EAAM0V,MAAUA,SAIjC,EAAKyH,eAKX,EAAAkB,WAAa,SAAC7H,GACZ,EAAKgH,iBAAiB,CAAE7M,GAAI,EAAGyB,OAAQ,YAAeoE,KAAUjW,MAAK,SAAC,G,IAAE6R,EAAA,EAAAA,OAClE,EAAKtS,SACP,EAAKU,UAAS,SAAAR,GAAS,MAAC,CAAEoS,OAAQ,GAAF,MAAOpS,EAAMoS,QAAWA,GAAUY,SAA3C,QAExB,EAAKmK,cAGV,EAAAG,qBAAuB,WACf,cAAEnT,EAAA,EAAAA,YAAahC,EAAA,EAAAA,aACrB,OAAI+B,EAAiBC,EAAahC,EADC,EAAAiC,mBAE1B,YAAsB,CAAEjC,aAAcA,GAAgBA,EAAalF,MAErE,CAAEqE,SAAU,KAGrB,EAAAgX,iBAAmB,SAAC,G,IAAA,uBAAEjP,EAAA,EAAAA,SACdkP,EADwB,EAAA7I,MACV8I,WAAU,SAAAvX,GAAQ,OAAAA,EAAKhE,MAAL,KACtC,OAAkB,IAAXsb,EAAeA,OAAQjb,GAGhC,EAAAkZ,eAAiB,WACT,cAAE9G,EAAA,EAAAA,MAAO1C,EAAA,EAAAA,QAASjE,EAAA,EAAAA,OAClBmE,EAAgB,EAAKoL,wBACLhb,IAAlB4P,IAEAA,EAAgBwC,EAAM/T,OAjQC,IAkQtBqR,GACDjE,GACA2G,EAAM/T,OAASoN,EAAOnI,OAEtB,EAAKuX,iBAEHzI,GAASxC,EAAgBwC,EAAM/T,OAAS,IACtC,EAAK3B,MAAMie,SACb,EAAKA,SAASvI,EAAMxC,EAAgB,GAAGjQ,KAEvC,EAAKzC,SAAS,CAAE6O,SAAUqG,EAAMxC,EAAgB,GAAGjQ,SAM3D,EAAAsZ,mBAAqB,WACX,IAAA7G,EAAA,QAAAA,MACFxC,EAAgB,EAAKoL,mBACvB5I,QAA2BpS,IAAlB4P,GAA+BA,EAAgB,IACtD,EAAKlT,MAAMie,SACb,EAAKA,SAASvI,EAAMxC,EAAgB,GAAGjQ,KAEvC,EAAKzC,SAAS,CAAE6O,SAAUqG,EAAMxC,EAAgB,GAAGjQ,QAKzD,EAAAwb,YAAc,SAACxX,GAAiB,MAAC,CAC/ByX,SAAU,EAAKhe,MAAMmc,SAAS6B,SAC9B1c,MAAO,GAAF,MAAO,YAAe,EAAKhC,MAAMgC,QAAM,CAAE+B,KAAMkD,MAGtD,EAAAgX,SAAW,SAAChX,GACV,IAAM8P,EAAO,EAAK0H,YAAYxX,GAC1B,EAAKjH,MAAMie,SACb,EAAKvd,MAAMie,OAAOzK,QAAQ6C,GAE1B,EAAKrW,MAAMie,OAAOnY,KAAKuQ,IAI3B,EAAA0F,iBAAmB,WACT,IAAApN,EAAA,QAAAA,SACJA,GACF,EAAK4O,SAAS5O,IAIlB,EAAAuP,UAAY,WACV,EAAKle,MAAMie,OAAOnY,KAAK,CACrBkY,SAAU,EAAKhe,MAAMmc,SAAS6B,SAC9B1c,MAAO,GAAF,MACA,YAAe,EAAKhC,MAAMgC,QAAM,CACnC+B,UAAMT,MAGV,EAAKub,sBAAqB,IAG5B,EAAAA,qBAAuB,SAACC,QAAA,IAAAA,OAAA,GACd,IAAAzP,EAAA,QAAAA,SACR,GAAIA,EAAU,CACZ,IAAM0P,EAAUC,SAASC,cAAc,eAAe5P,EAAQ,MAC1D0P,GACF,0BAAgBA,EAAS,CAAEG,UAAW,IAAKC,aAAc,IAAKL,OAAM,MAK1E,EAAAM,kBAAoB,SAACnY,GACb,cAAEmT,EAAA,EAAAA,QAASpY,EAAA,EAAAA,MACjB,OAAIoY,GAAWA,EAAQnT,IAASjF,EAAMuF,QAC7B6S,EAAQnT,GAAMjF,EAAMuF,cAE3B,GAIJ,EAAAgF,mBAAqB,WACb,cAAEvK,EAAA,EAAAA,MAAOgJ,EAAA,EAAAA,mBACf,OAAIhJ,EAAMuF,QACDyD,EAAmBhJ,EAAMuF,cAEhC,GAIJ,EAAA8X,WAAa,SAAC7I,GACZ,SAAKhW,UAAS,SAAAR,G,MAAS,MAAC,CACtBmS,WAAY,GAAF,MAAOnS,EAAMmS,aAAU,OAAGqE,IAAQ,EAAK,SAGrD,EAAA8I,eAAiB,SAACzJ,GAChB,EAAKnV,MAAMie,OAAOnY,KAAK,EAAKiY,YAAY5I,KAG1C,EAAA6G,WAAa,SAAC3U,GACJ,IAAAmW,EAAA,QAAAA,eAEJnW,IACFA,EAAMC,iBACND,EAAM2E,cAAcC,QAGlBuR,EACF,EAAKqB,cAEL,EAAKX,aAIT,EAAAY,mBAAqB,SAACnO,GACpB,EAAK3Q,MAAMie,OAAOnY,KAAK,CACrBkY,SAAU,EAAKhe,MAAMmc,SAAS6B,SAC9B1c,MAAO,YAAe,GAAD,MAAM,EAAKhC,MAAMgC,OAAUqP,MAGlD,EAAK7Q,UAAS,SAAC,G,IAAE2R,EAAA,EAAAA,WAAiB,MAAC,CACjCA,WAAY,GAAF,MACLA,GAAU,CACb9R,oBAAqB,YAAmC8R,EAAYd,GACpEpR,UAAW,YAAyBkS,EAAYd,UAKtD,EAAAoO,kBAAoB,SAAC1f,GACnB,EAAKS,UAAS,SAAAR,G,MACN0f,GAAoB1f,EAAMmS,WAAWpS,GACrC4f,EAAW,CACf3M,QAAShT,EAAMgT,QACfb,WAAY,GAAF,MAAOnS,EAAMmS,aAAU,OAAGpS,GAAW2f,EAAgB,KAkBjE,OAdIA,GAAoB3f,IAAa,MACnC4f,EAASxN,WAAW9R,oBAAsB,YACxCsf,EAASxN,WACTnS,EAAMgC,OAGRjC,EAAW4f,EAASxN,WAAW9R,oBAAsB,sBAAwBN,IAG3E,YAAmBA,IAAeC,EAAMoS,QAAWpS,EAAMoS,OAAOrS,KAClE4f,EAAS3M,SAAU,EACnB,EAAKqL,WAAWte,IAGX4f,MAIX,EAAAC,aAAe,WAAM,4BAErB,EAAAL,YAAc,WAAM,SAAK7e,MAAMie,OAAOnY,KAAK,CAAEkY,SAAU,EAAKhe,MAAMmc,SAA9C,YAGpB,EAAAgD,eAAiB,SAACnK,EAAiBxC,GACjC,QAAsB5P,IAAlB4P,GAAgD,IAAjBwC,EAAM/T,OAGzC,OAAIuR,GAAiB,GAAKA,EAAgBwC,EAAM/T,OACvC+T,EAAMxC,GAAejQ,IAEvByS,EAAMA,EAAM/T,OAAS,GAAGsB,KAGjC,EAAA2S,iBAAmB,SAACC,GACd,EAAK7V,MAAMgC,MAAM6T,UAAYA,EAC/B,EAAK0J,eAEL,EAAK/e,UAAS,SAAAR,GACZ,IAAM0V,EAAQ1V,EAAM0V,MAAMpT,QAAO,SAAA2E,GAAQ,OAAAA,EAAKhE,MAAL,KACnCiQ,EAAgB,EAAKoL,iBAAiBte,GAE5C,MAAO,CAAE0V,MAAK,EAAErG,SADC,EAAKwQ,eAAenK,EAAOxC,OAG9C,EAAK0L,cAIT,EAAAkB,mBAAqB,SAACvY,EAAiBN,EAAcD,GACnD,SAAKxG,UAAS,SAACR,G,YACL,IAAAoa,eAAA,WACR,OAAKA,EAAQnT,GAIN,CAAEmT,QAAS,GAAF,MAAOA,IAAO,OAAGnT,GAAI,SAAQmT,EAAQnT,KAAK,OAAGM,GAAUP,EAAU,SAHxE,CAAEoT,QAAS,GAAF,MAAOA,IAAO,OAAGnT,IAAI,KAAK,EAACM,GAAUP,EAAU,YAMrE,EAAA+Y,qBAAuB,SAACxY,EAAiBN,GACvC,SAAKzG,UAAS,SAAAR,G,MACJoa,EAAA,EAAAA,QACR,GAAIA,GAAWA,EAAQnT,GAAO,CAC5B,IAAM+Y,EAAU,GAAH,GAAQ5F,EAAQnT,IAE7B,cADO+Y,EAAQzY,GACR,CAAE6S,QAAS,GAAF,MAAOA,IAAO,OAAGnT,GAAO+Y,EAAO,KAEjD,OAAO,SAGX,EAAAnR,aAAe,SAACoR,GAAwB,SAAKT,mBAAmB,CAAES,YAA1B,KAExC,EAAAC,WAAa,WAAM,OAAA9d,OAAOC,KAAK,YAAe,EAAKrC,MAAMgC,QAAQL,OAA9C,GAEnB,EAAAwe,iBAAmB,WACX,cAAEhW,EAAA,EAAAA,YAAac,EAAA,EAAAA,UACf,UAAE2P,EAAA,EAAAA,SAAU7L,EAAA,EAAAA,OAAQ/M,EAAA,EAAAA,MAAOgJ,EAAA,EAAAA,mBAC3B7C,EAAe,EAAKzH,MAAMyH,cAAgB,EAAKzH,MAAMyH,aAAalF,IAExE,OAAK,YAAWkH,IAAiB,2BAAmBhC,IAAkByS,EAC7D,KAIP7L,GACE,gBAAC,EAAU,CACT9D,UAAWA,EACX9C,aAAcA,EACdnG,MAAOA,EACPgJ,mBAAoBA,EACpBpE,MAAOmI,EAAOnI,SA9bpB,IAAM5E,EAAQ,YAAWtB,EAAMmc,SAAS7a,O,OACxC,EAAKhC,MAAQ,CACXgT,SAAS,EACTb,WAAY,CACVlH,WAAW,EACX/K,WAAY,YAA8B,GAAI8B,EAAO,cACrD7B,UAAW,YAA8B,GAAI6B,EAAO,aACpD3B,oBAAqB,YAAmC,GAAI2B,GAC5D/B,UAAW,YAAyB,GAAI+B,GACxCqQ,OAAO,GAETrQ,MAAK,EACLgJ,mBAAoB,GACpBwF,uBAAwB,GACxBkF,MAAO,I,EA6jBb,OAhlByB,QAuBvB,YAAA7R,kBAAA,WACEC,KAAKhE,SAAU,EACf,8BACA,4BACAgE,KAAKwY,kBACLxY,KAAKsZ,oBAGP,YAAAgD,0BAAA,SAA0BC,GAA1B,WACEvc,KAAKtD,UAAS,SAAC,G,IAAEkV,EAAA,EAAAA,MAAOrG,EAAA,EAAAA,SAChB4O,EAAW,EAAKrB,YAAYyD,EAAW3K,GAC7C,MAAO,CACLuI,SAAQ,EACRC,eAAgB,YAAWmC,EAAUxD,SAAS7a,OAC9CA,MAAO,YAAWqe,EAAUxD,SAAS7a,OACrCqN,SAAU4O,EAAWA,EAAShb,IAAMoM,OAK1C,YAAArL,mBAAA,SAAmBC,EAAkBqc,GAC9B,YAAgBrc,EAAU4Y,SAAS7a,MAAO8B,KAAKpD,MAAMmc,SAAS7a,QACjE8B,KAAKyZ,kBAGJzZ,KAAK9D,MAAMie,UACXqC,EAAUjR,WAAavL,KAAK9D,MAAMqP,WAAYiR,EAAUrC,UAIzDna,KAAK+a,wBAIT,YAAA3a,qBAAA,WACEJ,KAAKhE,SAAU,EACf,iCACA,+BACAgE,KAAK6Y,mBA4YP,YAAA/W,OAAA,sBACQ,aAAEmJ,EAAA,EAAAA,OAAQ2G,EAAA,EAAAA,MACVxC,EAAgBpP,KAAKwa,mBACrBnW,EAAerE,KAAKpD,MAAMyH,cAAgBrE,KAAKpD,MAAMyH,aAAalF,IAClE4X,GAAuB3Q,EAC3BpG,KAAKpD,MAAMyJ,YACXrG,KAAKpD,MAAMyH,aACXrE,KAAKpD,MAAM0J,mBAGb,OACE,gCACE,gBAACmW,EAAA,EAAW,CAACC,YAAY,iBACzB,gBAAC,IAAM,CAACC,OAAO,EAAO7W,MAAO,oBAAU,sBACrC,wBAAM7D,QAAQ,UAAUvC,KAAK,YAE/B,uBAAKnE,UAAU,cAAcO,GAAG,qBAC9B,gBAAC8gB,EAAA,EAAoB,CAACrhB,UAAU,2BAC7B,SAAC,G,IAAEshB,EAAA,EAAAA,IAAU,OACZ,uBAAKthB,UAAU,mBAAmBiZ,MAAO,CAAEqI,IAAG,IAC5C,uBAAKthB,UAAU,0BACb,uBAAKA,UAAU,uBACb,gBAACuhB,EAAA,EAAc,CACbC,OAAO,gBACPla,MAAO,oBAAU,gCACjBma,OAAQ,KAEV,gBAACrhB,EAAA,EAAa,CAACC,aAAc,EAAKwgB,aAAcvgB,QAAS,EAAK4f,cAC9D,gBAAC,IAAS,CACRlgB,UAAU,gBACVO,GAAG,sBACHmhB,UAAW,EACX5f,SAAU,EAAK0N,aACfhF,YAAa,oBAAU,2BACvBnG,MAAO,EAAK1D,MAAMgC,MAAMie,aAAe,KAEzC,gBAACvO,GAAU,CACTU,OAAQ,EAAKpS,MAAMoS,OACnBR,iBAAkBiJ,EAClB3I,cAAe,EAAKuN,kBACpBxN,eAAgB,EAAKuN,mBACrBrN,WAAY,EAAKnS,MAAMmS,WACvBhK,aAAcA,EACd0K,qBAAsB,EAAKnS,MAAMuW,SAASpE,qBAC1C7Q,MAAO,EAAKhC,MAAMgC,MAClBgJ,mBAAoB,EAAKhL,MAAMgL,mBAC/BwF,uBAAwB,EAAKxQ,MAAMwQ,uBACnCsB,gBAAiB,EAAKvF,6BAQlC,uBAAKlN,UAAU,oBACb,uBAAKA,UAAU,oDACb,uBAAKA,UAAU,gEACb,uBAAKA,UAAU,0BACb,gBAACuhB,EAAA,EAAc,CAACC,OAAO,eACtB/c,KAAK9D,MAAMie,SACV,qBACE5e,UAAU,uDACV+N,KAAK,IACLvN,QAASiE,KAAK4Y,YACd,gBAAC,IAAQ,CAACrd,UAAU,iBACnByE,KAAK9D,MAAMke,eACR,oBAAU,wBACV,oBAAU,gCAGhBpa,KAAKqc,oBAELrc,KAAK9D,MAAMke,gBACX,gBAACpL,GAAW,CACVE,QAASlP,KAAK9D,MAAMgT,QACpBC,SAAUnP,KAAK8b,aACf7Q,OAAQA,EACRmE,cAAeA,OAOzB,uBAAK7T,UAAU,0BACZyE,KAAK9D,MAAMie,SACV,gBAAC,GAAW,CACVtD,kBAAmB7W,KAAKpD,MAAMuW,SAASpE,qBACvC+H,SAAU9W,KAAK9D,MAAM4a,SACrBC,oBAAqBA,EACrBhC,WAAY/U,KAAKgc,mBACjBpH,aAAc5U,KAAKic,qBACnBrF,SAAU5W,KAAK8R,iBACf3D,eAAgBnO,KAAK0b,mBACrBrX,aAAcA,EACd6C,mBAAoBlH,KAAK9D,MAAMgL,mBAC/BwF,uBAAwB1M,KAAK9D,MAAMwQ,uBACnCqF,QAAS/R,KAAK9D,MAAMie,SAAShb,IAC7B6O,gBAAiBhO,KAAKyI,uBAGxB,gCACGmJ,EAAM/U,KAAI,SAAAsG,GAAQ,OACjB,gBAAC,GAAY,CACXD,WAAY,EAAKoY,kBAAkBnY,EAAKhE,KACxC2X,SAAU,EAAK5a,MAAM4a,SACrBe,WAAY,YAAW,EAAKjb,MAAMyJ,aAClClH,IAAKgE,EAAKhE,IACV4V,WAAY,EAAKiH,mBACjBpH,aAAc,EAAKqH,qBACnB9N,eAAgB,EAAKuN,mBACrB9D,OAAQ,EAAK4D,eACbnX,aAAcA,EACdlB,KAAMA,EACNoI,SAAUpI,EAAKhE,MAAQ,EAAKjD,MAAMqP,SAClCyC,gBAAiB,EAbF,+BAgBPxO,IAAXyL,GACC,gBAAC,IAAU,CACT8H,MAAOnB,EAAM/T,OACbqf,SAAUld,KAAKqa,eACf8C,OAAQnd,KAAK9D,MAAMgT,QACnBpM,MAAOmI,EAAOnI,cAWpC,EAhlBA,CAAyB,iBAgnBV,+BAAW,mBAPF,SAAC5G,GAAiB,MAAC,CACzCiX,SAAU,sBAAYjX,GACtBmK,YAAa,yBAAenK,GAC5BiL,UAAW,uBAAajL,GACxBoK,kBAAmB,6BAAmBpK,MAGd,CAAyB,M,8YCxsBrC,SAAUugB,EAAY,G,IAAEC,EAAA,EAAAA,YACpC,OACE,gBAAC,IAAmBU,SAAQ,MACzB,SAAC,G,IAAEC,EAAA,EAAAA,eAAgBC,EAAA,EAAAA,kBAAwB,OAC1C,gBAACC,EAAgB,CACfF,eAAgBA,EAChBC,kBAAmBA,EACnBZ,YAAaA,OAavB,+B,+CAmBA,OAnB+B,OAC7B,YAAA3c,kBAAA,WACEC,KAAKpD,MAAMygB,eAAerd,KAAKpD,MAAM8f,cAGvC,YAAAxc,mBAAA,SAAmBC,GACbA,EAAUuc,cAAgB1c,KAAKpD,MAAM8f,cACvC1c,KAAKpD,MAAM0gB,kBAAkBtd,KAAKpD,MAAM8f,aACxC1c,KAAKpD,MAAMygB,eAAeld,EAAUuc,eAIxC,YAAAtc,qBAAA,WACEJ,KAAKpD,MAAM0gB,kBAAkBtd,KAAKpD,MAAM8f,cAG1C,YAAA5a,OAAA,WACE,OAAO,MAEX,EAnBA,CAA+B,kB,smBCjBjB,SAAUgb,EAAelgB,GACrC,OACE,gBAAC,IAAYwgB,SAAQ,MAClB,SAAC,G,IAAEI,EAAA,EAAAA,gBAAiBC,EAAA,EAAAA,mBAAyB,OAC5C,gBAACC,EAAmB,GAClBF,gBAAiBA,EACjBC,mBAAoBA,GAChB7gB,OAYd,6E,OASE,EAAA+gB,QAAU,WACF,cAAE,IAAAZ,OAAa,IAAAla,MACrB,MAAO,CAAE1D,IAAG,EAAE0D,WADO,IAAQ,EAAR,yCACAma,OADsC,EAAAA,S,EAQ/D,OAlByC,OACvC,YAAAjd,kBAAA,WACEC,KAAKpD,MAAM4gB,gBAAgBxd,KAAK2d,YAGlC,YAAAvd,qBAAA,WACEJ,KAAKpD,MAAM6gB,mBAAmBzd,KAAK2d,YAQrC,YAAA7b,OAAA,WACU,IAAAib,EAAA,WAAAA,OACR,OAAO,wBAAMjhB,GAAI,gBAAgBihB,KAErC,EAlBA,CAAyC,kB,0vCCsBnC,SAAUa,EACdC,GAEA,OAAO,kBAAQ,8BAA+BA,GAAYnH,MAAM,KAG5D,SAAUoH,EAAkB,G,IAChCC,EAAA,EAAAA,kBACW5e,EAAA,UAAAA,IAKX,OAAO,kBAAQ,4BAA6B,CAAE4e,kBAAiB,EAAE5e,IAAG,IAGhE,SAAU6e,EAAqB5Z,GACnC,OAAO,mBAAS,8BAA+BA,GAAMsS,MAAM,KAGvD,SAAUuH,EAAsB7Z,GACpC,OAAO,mBAAS,+BAAgCA,GAAMsS,MAAM,KAUxD,SAAUwH,EACd9Z,GAEA,OAAO,kBAAQ,gCAAiCA,GAAMsS,MAAM,KAGxD,SAAUyH,EAAsB,G,IACpCta,EAAA,EAAAA,SACA,IAAAnE,KACA2E,EAAA,EAAAA,aAMA,OAAO,kBAAQ,mCAAoC,CACjDR,SAAQ,EACRua,eAAc,EACd/Z,aAAY,IACXqS,MAAM,KAGL,SAAU2H,EAAkB,G,IAAExa,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAClE,OAAO,eAAK,mCAAoC,CAC9CR,SAAQ,EACRua,eAAc,EACd/Z,aAAY,IAIV,SAAUia,EAAcnf,EAAaO,GACzC,OAAO,eAAK,8BAA+B,CAAEP,IAAG,EAAEO,KAAI,IAAIgX,MAAM,KAG5D,SAAU6H,EAAYC,EAAiBC,GAC3C,OAAO,mBAAS,4BAA6B,CAAED,QAAO,EAAEC,OAAM,IAAI/H,MAAM,KAGpE,SAAUgI,EAAc,G,IAAE7a,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAC9D,OAAO,eAAK,8BAA+B,CAAER,SAAQ,EAAEua,eAAc,EAAE/Z,aAAY,IAAIqS,MACrF,KAIE,SAAUiI,EACd,EACAC,G,IADE/a,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAGlC,OAAO,eAAK,qCAAsC,CAChDR,SAAQ,EACRua,eAAc,EACd/Z,aAAY,EACZwa,qBAAsBD,EAAgBA,EAAclf,UAAOF,IAC1DkX,MAAM,KAGL,SAAUoI,EAA2B,G,IACzCjb,EAAA,EAAAA,SACA,IAAAnE,KACA2E,EAAA,EAAAA,aAKA,MAAO,+BAHa/F,OAAOsb,QAAQ,CAAE/V,SAAQ,EAAEua,eAAc,EAAE/Z,aAAY,IACxExH,KAAI,SAAC,G,IAACsC,EAAA,KAAKS,EAAA,KAAW,OAAGT,EAAG,IAAI4f,mBAAmBnf,MACnD6P,KAAK,KAIJ,SAAUuP,EACd,EACA,G,IADE,IAAA7f,IACA0E,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAKlC,MAAO,+BAHa/F,OAAOsb,QAAQ,CAAEqF,YAAW,EAAEpb,SAAQ,EAAEua,eAAc,EAAE/Z,aAAY,IACrFxH,KAAI,SAAC,G,IAACsC,EAAA,KAAKS,EAAA,KAAW,OAAGT,EAAG,IAAI4f,mBAAmBnf,MACnD6P,KAAK,KAIJ,SAAUyP,IAGd,OAAO,kBAAQ,kCAAkCziB,MAAK,SAAA0iB,GAAK,OAAAA,EAAA,YAAa,KAGpE,SAAUC,IACd,OAAO,kBAAQ,kCAAkC3iB,MAAK,SAAA0iB,GAAK,OAAAA,EAAA,aAGvD,SAAUE,EACdC,EACArN,EACA,EACAsN,G,IADE1b,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAQlC,OAAO,kBAAQ,iCAAkC,CAC/Cib,MAAK,EACLrN,GAAE,EACFpO,SAAQ,EACRua,eAAc,EACd/Z,aAAY,EACZkR,EAAGgK,IAiBD,SAAUC,EAAgBC,EAAiBC,GAC/C,OAAO,kBAAQ,+BAAgC,CAAED,QAAO,EAAEC,SAAQ,IAG9D,SAAUC,EACd,EACA9M,G,IADEhP,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAGlC,OAAO,eAAK,mCAAoC,CAC9CR,SAAQ,EACRua,eAAc,EACd/Z,aAAY,EACZwO,QAAO,IACN6D,MAAM,KAGL,SAAUkJ,EACd,EACA/M,G,IADEhP,EAAA,EAAAA,SAAU,IAAAnE,KAAsB2E,EAAA,EAAAA,aAGlC,OAAO,eAAK,sCAAuC,CACjDR,SAAQ,EACRua,eAAc,EACd/Z,aAAY,EACZwO,QAAO,IACN6D,MAAM,KAgBL,SAAUmJ,EAAYhC,GAC1B,OAAO,kBAAQ,oCAAqCA,GAAYnH,MAAM,KAQlE,SAAUoJ,EACdjC,GAEA,OAAO,kBAAQ,qCAAsCA,GAAYnH,MAAM,KAUnE,SAAUqJ,EAAQlC,GACtB,OAAO,eAAK,gCAAiCA,GAAYnH,MAAM,KAG3D,SAAUsJ,EAAWnC,GACzB,OAAO,eAAK,mCAAoCA,GAAYnH,MAAM,KAU9D,SAAUuJ,EAASpC,GACvB,OAAO,eAAK,iCAAkCA,GAAYnH,MAAM,KAG5D,SAAUwJ,EAAYrC,GAC1B,OAAO,eAAK,oCAAqCA,GAAYnH,MAAM,KA2B/D,SAAUyJ,EAAkB/b,GAChC,OAAO,mBAAS,sCAAuCA,GAGnD,SAAUgc,EAAoBhc,GAClC,OAAO,mBAAS,wCAAyCA,GAGrD,SAAUic,EAAajc,GAQ3B,IAAMhB,EACJgB,EAAKhB,QAAU,IAAIgB,EAAKhB,QAAQ,SAACxD,EAAOT,GAAQ,OAAGA,EAAG,IAAI,oBAAV,MAA8BsQ,KAAK,KACrF,OAAO,eAAK,qCAAoC,OAAOrL,GAAI,CAAEhB,OAAM,KAAIsT,MAAM,KAGzE,SAAU4J,EAAelc,GAK7B,OAAO,eAAK,uCAAwCA,GAAMsS,MAAM,O,iCCtWlE,uDA4Bc,SAAU9M,EAAShN,GAC/B,OACE,uBACErB,UAAW,EAAW,6BAA8BqB,EAAMrB,WAAU,gBACrDqB,EAAMX,UACpBW,EAAMmN,Y,2aCIb,yE,OACE,EAAAuH,YAAc,SAACrN,GACbA,EAAMC,iBACND,EAAM2E,cAAcC,OAChB,EAAKjM,MAAMb,SACb,EAAKa,MAAMb,W,EAoEjB,OAzEyC,OASvC,YAAAwkB,aAAA,WACE,OAAKvgB,KAAKpD,MAAM4jB,OAGT,gBAAC,IAAW,CAACjlB,UAAU,cAAcG,QAASsE,KAAKpD,MAAM4jB,SAFvD,MAKX,YAAAC,qBAAA,WACU,IAAAvhB,EAAA,WAAAA,OACR,IAAKA,IAAWA,EAAOrB,OACrB,OAAO,KAET,IAAM+B,EACc,IAAlBV,EAAOrB,OAAeqB,EAAO,GAAK,kCAAwB,aAAcA,EAAOrB,QACjF,OACE,wBAAMtC,UAAU,sBAAsBuK,MAAOlG,GAC1CA,IAKP,YAAAkC,OAAA,WACE,IAAM4e,EACiB,MAArB1gB,KAAKpD,MAAMsC,QAAkBc,KAAKpD,MAAMsC,OAAOrB,OAAS,GAA2B,MAAtBmC,KAAKpD,MAAMmF,QAE1E,OACE,uBAAKxG,UAAU,6DACZyE,KAAKpD,MAAMb,QACV,wBAAMR,UAAU,qDACd,qBAAG+N,KAAK,IAAIvN,QAASiE,KAAKsR,aACxB,gBAAC,IAAa,CAAC/V,UAAU,sBAAsB0E,KAAMD,KAAKpD,MAAMqD,OAC/DD,KAAKpD,MAAM8C,MAEbM,KAAKugB,gBAGR,wBAAMhlB,UAAU,qDACbyE,KAAKpD,MAAM8C,KACXM,KAAKugB,gBAITvgB,KAAKpD,MAAMmN,SAEZ,wBAAMxO,UAAU,iEACbyE,KAAKygB,wBAGPzgB,KAAKpD,MAAMgE,UACV,wBAAMrF,UAAU,uBACd,gBAAC,IAAe,OAInBmlB,GACC,gBAAC,SAAM,CACLnlB,UAAU,+DACVQ,QAASiE,KAAKpD,MAAMmF,SACnB,oBAAU,YAMvB,EAzEA,CAAyC,iB,mXCFzC,yE,OAOE,EAAAuP,YAAc,SAACrN,GACbA,EAAMC,iBACND,EAAM2E,cAAcC,OACpB,EAAKjM,MAAMb,QAAQ,EAAKa,MAAMgD,MAAOqE,EAAMyT,SAAWzT,EAAMuT,U,EAmChE,OA7CuC,OAarC,YAAAmJ,YAAA,WACE,OAAuB,MAAnB3gB,KAAKpD,MAAM+C,KACN,KAGF,wBAAMpE,UAAU,cAAcyE,KAAKpD,MAAM+C,OAGlD,YAAAmC,OAAA,WACU,IAAApC,EAAA,WAAAA,KACFnE,EAAY,EAAW,yBAA0ByE,KAAKpD,MAAMrB,UAAW,CAC3EkE,OAAQO,KAAKpD,MAAM6C,OACnB,8BAA+BO,KAAKpD,MAAM+M,YAG5C,OAAO3J,KAAKpD,MAAM6I,SAChB,wBAAMlK,UAAWA,EAAS,aAAcyE,KAAKpD,MAAMgD,MAAOkG,MAAO9F,KAAKpD,MAAMpB,SAC1E,wBAAMD,UAAU,cAAcmE,GAC7BM,KAAK2gB,eAGR,qBACEplB,UAAWA,EAAS,aACRyE,KAAKpD,MAAMgD,MACvB0J,KAAK,IACLvN,QAASiE,KAAKsR,YACdxL,MAAO9F,KAAKpD,MAAMpB,SAClB,wBAAMD,UAAU,cAAcmE,GAC7BM,KAAK2gB,gBAxCL,EAAAC,aAAe,CACpBnb,UAAU,EACVkE,WAAW,EACXuF,SAAS,GAyCb,EA7CA,CAAuC,iBAAlB,O,qXCRrB,cAIE,WAAYtS,GAAZ,MACE,YAAMA,IAAM,K,OAad,EAAAikB,YAAc,WACZ,IAAMC,EAAe,EAAKC,WAAa,EAAKA,UAAUC,wBACtD,OAAKF,EAGE,CACLjE,IAAKoE,OAAOC,YAAcJ,EAAajE,IACvCsE,KAAMF,OAAOG,YAAcN,EAAaK,MAJjC,CAAEtE,IAAK,EAAGsE,KAAM,IAfzB,EAAKE,kBAAoB,KAAS,WAAM,yBAAoB,K,EAgChE,OAtCkD,OAShD,YAAAthB,kBAAA,WACEC,KAAKshB,cACLL,OAAOM,iBAAiB,SAAUvhB,KAAKqhB,oBAGzC,YAAAjhB,qBAAA,WACE6gB,OAAOO,oBAAoB,SAAUxhB,KAAKqhB,oBAc5C,YAAAvf,OAAA,sBACE,OACE,uBACEvG,UAAWyE,KAAKpD,MAAMrB,UACtBkmB,IAAK,SAAAV,GAAa,OAAC,EAAKA,UAAN,IACjB/gB,KAAKpD,MAAMmN,SAAS/J,KAAK6gB,iBAIlC,EAtCA,CAAkD,iB,wCC3BlD,8CA0Bc,SAAU7W,EAAe,G,IAAED,EAAA,EAAAA,SAAUjE,EAAA,EAAAA,MACjD,OACE,uBAAKvK,UAAU,+BACZuK,GAAS,uBAAKvK,UAAU,qCAAqCuK,GAC7DiE,K,ghBCCP,uE,OACE,EAAA2X,oBAAsB,SAACzd,GACrBA,EAAMC,iBACND,EAAM2E,cAAcC,OACpB,EAAKjM,MAAM+kB,YAGb,EAAAC,oBAAsB,SAAC3d,GACrBA,EAAMC,iBACND,EAAM2E,cAAcC,OAChB,EAAKjM,MAAMilB,UACb,EAAKjlB,MAAMilB,Y,EA2BjB,OAtCkD,OAehD,YAAA/f,OAAA,WACQ,iBAAEiR,EAAA,EAAAA,MAAOjQ,EAAA,EAAAA,MACTgf,EAAUhf,EAAQiQ,EAClBgP,EAAWxb,QAAQzD,GAASA,IAAUiQ,GAE5C,OACE,0BAAQxX,UAAU,6CACf,kCAAwB,SAAU,wBAAcwX,EAAO,MAAO,OAE9D+O,GACC,qBAAGvmB,UAAU,yBAAyB+N,KAAK,IAAIvN,QAASiE,KAAK0hB,qBAC1D,oBAAU,cAId1hB,KAAKpD,MAAMilB,UAAYE,GACtB,qBAAGxmB,UAAU,yBAAyB+N,KAAK,IAAIvN,QAASiE,KAAK4hB,qBAC1D,oBAAU,gBAMvB,EAtCA,CAAkD,iB,2tBCmDlD,yE,OACE,EAAA5lB,SAAU,EAQV,EAAAE,MAAkB,CAChBwU,WAAW,EACXxS,MAAO,GACP8jB,WAAW,EACXC,oBAAqB,GACrBC,cAAc,GAqChB,EAAA5kB,gBAAkB,SAACE,EAAmBC,G,QACpC,GAAI,EAAKb,MAAMulB,YACb,EAAKvlB,MAAMulB,YAAY3kB,EAAWC,OAC7B,CACG,IAAAyB,EAAA,QAAAA,OACR,GAAIzB,EAAU,CACZ,IAAME,EAAW,IACfuB,EAAOtB,SAASJ,GAAa,IAAQ0B,EAAQ1B,GAAY,EAAK0B,EAAM,CAAE1B,KAExE,EAAKZ,MAAMS,WAAQ,MAAI,EAAKT,MAAMX,UAAW0B,EAAQ,SAErD,EAAKf,MAAMS,WAAQ,MAChB,EAAKT,MAAMX,UAAWiD,EAAOtB,SAASJ,IAAc0B,EAAOrB,OAAS,EAAI,GAAK,CAACL,GAC/E,MAKR,EAAAT,kBAAoB,WAClB,EAAKH,MAAMI,SAAS,EAAKJ,MAAMX,WAGjC,EAAAmB,YAAc,W,MACR,EAAKR,MAAMmF,QACb,EAAKnF,MAAMmF,UAEX,EAAKnF,MAAMS,WAAQ,MAAI,EAAKT,MAAMX,UAAW,GAAE,KAInD,EAAAmmB,cAAgB,WACV,EAAKpmB,SACP,EAAKU,SAAS,CAAEslB,WAAW,KAI/B,EAAAK,OAAS,SAACnkB,GACJA,EAAML,QAAU,EAAKjB,MAAM0O,iBAC7B,EAAK5O,SAAS,CAAEwB,MAAK,EAAE8jB,WAAW,IAClC,EAAKplB,MACF4E,SAAStD,GACTzB,KAAK,EAAK6lB,4BACV7lB,MAAK,SAAC,G,IAAE8lB,EAAA,EAAAA,WAAYtX,EAAA,EAAAA,OAAQ5M,EAAA,EAAAA,QAASY,EAAA,EAAAA,MAChC,EAAKjD,SACP,EAAKU,UAAS,SAAAR,GAAS,MAAC,CACtB8lB,WAAW,EACXQ,iBAAkBD,EAClBE,cAAepkB,EACfqkB,aAAczX,EACdgX,oBAAqB,EAAF,KAAO/lB,EAAM+lB,qBAAwBhjB,UAI7DyX,MAAM,EAAK0L,gBAEd,EAAK1lB,SAAS,CAAEwB,MAAK,EAAE8jB,WAAW,EAAOS,cAAe,MAI5D,EAAAE,WAAa,WACL,cAAEzkB,EAAA,EAAAA,MAAOwkB,EAAA,EAAAA,aAAcD,EAAA,EAAAA,cACzBvkB,GAASukB,GAAiBC,IAC5B,EAAKhmB,SAAS,CAAEslB,WAAW,IAC3B,EAAKplB,MACF4E,SAAStD,EAAOwkB,EAAaxX,UAAY,GACzCzO,KAAK,EAAK6lB,4BACV7lB,MAAK,SAAC,G,IAAEwO,EAAA,EAAAA,OAAQ5M,EAAA,EAAAA,QAASY,EAAA,EAAAA,MACpB,EAAKjD,SACP,EAAKU,UAAS,SAAAR,GAAS,MAAC,CACtB8lB,WAAW,EACXS,cAAe,EAAIA,EAAkBpkB,GACrCqkB,aAAczX,EACdgX,oBAAqB,EAAF,KAAO/lB,EAAM+lB,qBAAwBhjB,UAI7DyX,MAAM,EAAK0L,iBAIlB,EAAAE,2BAA6B,SAACjb,GACpB,cAAAzI,6BAAA,+CACFgkB,EAAgBvb,EAAShJ,QAAQG,QAAO,SAAAuJ,GAC5C,IAAM5I,EAAM,EAAKvC,MAAM0E,mBAAmByG,GAC1C,YAA6BvI,IAAtB,EAAKF,QAAQH,SAA8DK,IAAxC,EAAKtD,MAAM+lB,oBAAoB9iB,MAE3E,OAAIyjB,EAAc/kB,OAAS,EAClBe,EAAsBgkB,GAAenmB,MAAK,SAAAwC,GAAS,cAAMoI,GAAQ,CAAEpI,MAAhB,OAE1D,OAAYoI,GAAQ,CAAEpI,MAAO,MASjC,EAAAijB,aAAe,WACb,EAAKxlB,SAAS,CAAEwlB,cAAc,KAGhC,EAAAW,aAAe,WACb,EAAKnmB,SAAS,CAAEwlB,cAAc,K,EA2LlC,OArV+C,OAiB7C,YAAAniB,kBAAA,WACEC,KAAKhE,SAAU,GAGjB,YAAAkE,mBAAA,SAAmBC,IACZA,EAAUF,MAAQD,KAAKpD,MAAMqD,KAEhCD,KAAKtD,SAAS,CAAEgU,WAAW,IAE1BvQ,EAAUF,OAASD,KAAKpD,MAAMqD,OAC9B,uBAAaE,EAAUjC,OAAS,GAAI8B,KAAKpD,MAAMsB,OAAS,IAGzD8B,KAAKtD,SAAS,CACZwB,MAAO,GACPskB,sBAAkBhjB,EAClBijB,mBAAejjB,EACfwiB,WAAW,EACXC,oBAAqB,GACrBC,cAAc,IAGhB/hB,EAAUlB,QAAUe,KAAKpD,MAAMqC,OAC/BX,OAAOC,KAAKyB,KAAKpD,MAAMqC,OAAS,IAAIpB,OAASmC,KAAKpD,MAAMkmB,iBAGxD9iB,KAAKtD,SAAS,CAAEwlB,cAAc,KAIlC,YAAA9hB,qBAAA,WACEJ,KAAKhE,SAAU,GAgGjB,YAAAsD,QAAA,SAAQxC,GACE,IAAAmC,EAAA,WAAAA,MACR,OAAOA,QAAyBO,IAAhBP,EAAMnC,GAAsBmC,GAASA,EAAMnC,QAAQ0C,GAWrE,YAAAX,WAAA,sBACUI,EAAA,WAAAA,MAER,IAAKA,EACH,OAAO,KAGT,IAAM8jB,EAAc/iB,KAAKpD,MAAMomB,eAC3BhjB,KAAKpD,MAAMomB,iBACX,IACE1kB,OAAOC,KAAKU,IACZ,SAAAE,GAAO,OAACF,EAAD,MACP,SAAAE,GAAO,SAAKvC,MAAMyE,iBAAX,MAGP4hB,EAAcjjB,KAAK9D,MAAMgmB,aAC3Ba,EACAA,EAAYG,MAAM,EAAGljB,KAAKpD,MAAMkmB,iBAG9BK,EAAqBnjB,KAAK9D,MAAMgmB,aAClC,GACAa,EACGG,MAAMljB,KAAKpD,MAAMkmB,iBACjBtkB,QAAO,SAAA1B,GAAQ,SAAKF,MAAMsC,OAAOtB,SAAlB,MAEhBwlB,EAAuBL,EAAYllB,QAAUmC,KAAKpD,MAAMymB,SAE9D,OACE,gCACE,gBAACrZ,EAAA,EAAc,KACZiZ,EAAYpmB,KAAI,SAAAC,GAAQ,OACvB,gBAAC4M,EAAA,EAAS,CACRjK,OAAQ,EAAK7C,MAAMsC,OAAOtB,SAASd,GACnCqC,IAAKrC,EACL4C,KAAM,EAAK9C,MAAM8E,gBAAgB5E,GACjCf,QAAS,EAAKuB,gBACdqC,KAAM2jB,EAAgB,EAAKhkB,QAAQxC,IACnCtB,QAAS,EAAKoB,MAAMyE,iBAAiBvE,GACrC8C,MARqB,QAY1BujB,EAAmBtlB,OAAS,GAC3B,gCACE,uBAAKtC,UAAU,kCAAgC,KAC/C,gBAACyO,EAAA,EAAc,KACZmZ,EAAmBtmB,KAAI,SAAAC,GAAQ,OAC9B,gBAAC4M,EAAA,EAAS,CACRjK,QAAQ,EACRN,IAAKrC,EACL4C,KAAM,EAAK9C,MAAM8E,gBAAgB5E,GACjCf,QAAS,EAAKuB,gBACdqC,KAAM2jB,EAAgB,EAAKhkB,QAAQxC,IACnCtB,QAAS,EAAKoB,MAAMyE,iBAAiBvE,GACrC8C,MAR4B,SActC,gBAAC,EAAoB,CACnBmT,MAAOkQ,EAAYplB,OAASslB,EAAmBtlB,OAC/CgkB,SAAU7hB,KAAK9D,MAAMgmB,aAAeliB,KAAK6iB,kBAAerjB,EACxDmiB,SAAU3hB,KAAKkiB,aACfpf,MAAOigB,EAAYllB,SAEpBulB,GAAwBpjB,KAAK9D,MAAMgmB,cAClC,gBAACja,EAAA,MAAK,CAAC1M,UAAU,aAAagK,QAAQ,WACnC,oBAAU,oCAOrB,YAAAge,aAAA,WACE,OAAKvjB,KAAKpD,MAAMqC,OAAUX,OAAOC,KAAKyB,KAAKpD,MAAMqC,OAAOpB,OAKtD,gBAAC,IAAS,CACR6S,UAAW1Q,KAAK9D,MAAMwU,UACtBnV,UAAU,kCACV2T,QAASlP,KAAK9D,MAAM8lB,UACpB/E,UAAWjd,KAAKpD,MAAM0O,gBACtBjO,SAAU2C,KAAKqiB,OACftc,YAAa/F,KAAKpD,MAAMgF,kBACxBhC,MAAOI,KAAK9D,MAAMgC,QAXb,MAgBX,YAAAslB,oBAAA,sBACQ,aAAExB,EAAA,EAAAA,UAAWQ,EAAA,EAAAA,iBAAkBC,EAAA,EAAAA,cAAeC,EAAA,EAAAA,aAEpD,OAAKV,GAAeS,GAAkBA,EAAc5kB,OAI/C4kB,EAMH,gCACE,gBAACzY,EAAA,EAAc,KACZyY,EAAc5lB,KAAI,SAAAkL,GAAU,SAAKpG,mBAAL,OAE9B6gB,GACC,gBAACva,EAAA,MAAK,CAAC1M,UAAU,aAAagK,QAAQ,WACnC,oBAAU,kCAGdmd,GACC,gBAAC,IAAU,CACTnnB,UAAU,gBACVwX,MAAO0P,EAAc5kB,OACrBqf,SAAUld,KAAK2iB,WACfxF,OAAQ6E,EACRlf,MAAO4f,EAAa5f,SAnBnB,KALA,uBAAKvH,UAAU,sBAAsB,oBAAU,gBA+B1D,YAAAoG,mBAAA,SAAmBoG,GACjB,IAAM5I,EAAMa,KAAKpD,MAAM0E,mBAAmByG,GACpCtI,EAASO,KAAKpD,MAAMsC,OAAOtB,SAASuB,GACpCQ,EAAOK,KAAKV,QAAQH,IAAQa,KAAK9D,MAAM+lB,oBAAoB9iB,GAC3DsG,GAAYhG,GAAmB,IAATE,EAC5B,OACE,gBAAC+J,EAAA,EAAS,CACRjK,OAAQA,EACRgG,SAAUA,EACVtG,IAAKA,EACLO,KAAMM,KAAKpD,MAAM+E,mBAAmBoG,EAAQ/H,KAAK9D,MAAMgC,OACvDnC,QAASiE,KAAK1C,gBACdqC,KAAM2jB,EAAgB3jB,GACtBnE,QAASwE,KAAKpD,MAAM2E,oBAAoBwG,GACxCnI,MAAOT,KAKb,YAAA2C,OAAA,sBACQ,aAAE2D,EAAA,EAAAA,SAAU,IAAAxG,aAAA,IAAQ,EAAR,KACZ,aAAEf,EAAA,EAAAA,MAAO8jB,EAAA,EAAAA,UAAWS,EAAA,EAAAA,cACpBvjB,EAASc,KAAKpD,MAAMsC,OAAOrC,KAAI,SAAAC,GAAQ,SAAKF,MAAMyE,iBAAX,MACvCoiB,EACM,KAAVvlB,GAAgB8jB,SAAgCxiB,IAAlBijB,GAAwD,IAAzBA,EAAc5kB,QACvE6lB,GAAYxlB,GAASulB,EAC3B,OACE,gBAAC7Z,EAAA,EAAQ,CACPrO,UAAW,EAAWyE,KAAKpD,MAAMrB,UAAW,CAC1C,uCAAwCkK,IAE1CxJ,SAAU+D,KAAKpD,MAAMX,UACrB,gBAAC4N,EAAA,EAAW,CACVjJ,SAAUZ,KAAKpD,MAAMgE,SACrBlB,KACE,gBAAC,IAAO,CAAChE,QAAS+J,EAAWzF,KAAKpD,MAAMkN,oBAAiBtK,GACvD,4BAAOQ,KAAKpD,MAAMuE,cAGtBY,QAAS/B,KAAK5C,YACdrB,QAAS0J,OAAWjG,EAAYQ,KAAKjD,kBACrCkD,KAAMD,KAAKpD,MAAMqD,OAASwF,EAC1BvG,OAAQA,IAGTc,KAAKpD,MAAMqD,OAASwF,GACnB,gCACGzF,KAAKujB,eACLG,EAAW1jB,KAAKnB,aAAemB,KAAKwjB,sBACrC,gBAACG,EAAA,EAAqB,CAAC7jB,QAASxB,OAAOC,KAAKU,GAAOpB,OAAQqB,OAAQA,EAAOrB,YA5U7E,EAAA+iB,aAAe,CACpBkC,gBAAiB,GACjBO,SAAU,IACV/X,gBAAiB,GA+UrB,EArVA,CAA+C,aAA1B,MAuVrB,SAASgY,EAAgB3jB,GACvB,OAAOA,GAAQ,wBAAcA,EAAM,e,ykCC/X/BikB,EAAY,6BAAkB,WAAM,8CAA4B,aAwBtE,cAGE,WAAYhnB,GAAZ,MACE,YAAMA,IAAM,K,OAId,EAAAinB,MAAQ,WACF,EAAKC,OACP,EAAKA,MAAMD,QAEb,EAAKE,gBAGP,EAAAC,iBAAmB,WACjB,EAAKC,gBACL,EAAKrnB,MAAMS,cAASmC,IAGtB,EAAAukB,aAAe,WACb,EAAKrnB,SAAS,CACZwnB,aAAc,EAAKtnB,MAAMgD,OAAS,EAAKhD,MAAMsnB,cAAgB,IAAIC,KACjEC,iBAAa5kB,EACbS,MAAM,KAIV,EAAAgkB,cAAgB,WACd,EAAKvnB,SAAS,CAAEuD,MAAM,KAGxB,EAAAokB,eAAiB,SAACC,EAAWC,GACtBA,EAAU9e,WACb,EAAKwe,gBACL,EAAKrnB,MAAMS,SAASinB,KAIxB,EAAAE,oBAAsB,SAACF,EAAWC,GAChC,EAAK7nB,SAAS,CAAE0nB,YAAaG,EAAU9e,cAAWjG,EAAY8kB,KAGhE,EAAAG,yBAA2B,SAAC,G,IAAE7kB,EAAA,EAAAA,MAC5B,EAAKlD,UAAS,SAACR,GAAiB,MAAC,CAAEgoB,aAAc,EAAShoB,EAAMgoB,aAAhC,QAGlC,EAAAQ,wBAA0B,SAAC,G,IAAE9kB,EAAA,EAAAA,MAC3B,EAAKlD,UAAS,SAAAR,GAAS,MAAC,CAAEgoB,aAAc,EAAQhoB,EAAMgoB,aAA/B,QAGzB,EAAAS,yBAA2B,WACzB,EAAKjoB,UAAS,SAAAR,GAAS,MAAC,CAAEgoB,aAAc,EAAUhoB,EAAMgoB,aAAjC,QAGzB,EAAAU,qBAAuB,WACrB,EAAKloB,UAAS,SAAAR,GAAS,MAAC,CAAEgoB,aAAc,EAAUhoB,EAAMgoB,aAAjC,QAnDvB,EAAKhoB,MAAQ,CAAEgoB,aAActnB,EAAMgD,OAAShD,EAAMsnB,cAAgB,IAAIC,KAAQlkB,MAAM,G,EAoJxF,OAzJuC,OA2DrC,YAAA6B,OAAA,eAUMyiB,EAVN,OACQ,aAAEM,EAAA,EAAAA,cAAeC,EAAA,EAAAA,YAAaC,EAAA,EAAAA,QAASnlB,EAAA,EAAAA,MACrCwkB,EAAA,WAAAA,YAEFY,EAAQhlB,KAAKpD,MAAMqoB,SAAW,IAAId,KAElCe,EAAS,IAAM,IACfC,EAAQ,KAAM,IAAIhB,MAAOiB,cAAgB,IAAI,IAAIjB,MAAOiB,cAAgB,GAExEC,EAA2BzlB,EAAQ,CAACA,GAAS,GAE7C0lB,EAAqBlB,GAAexkB,EAEtCilB,GAAiBS,IACnBf,EAAY,CAAEgB,YAAa,CAAEC,KAAMX,EAAe5S,GAAIqT,IACtDD,EAAa3iB,KAAKmiB,IAEhBC,GAAeQ,IACjBf,EAAY,CAAEgB,YAAa,CAAEC,KAAMF,EAAoBrT,GAAI6S,IAC3DO,EAAa3iB,KAAKoiB,IAGpB,IAAMW,EAAe,IAAM,GAAG5oB,IAAI,kBAC5B6oB,EAAgB,IAAM,GAAG7oB,IAAI,uBAEnC,OACE,gBAAC,IAAmB,CAAC8oB,eAAgB3lB,KAAKikB,eACxC,wBAAM1oB,UAAW,EAAW,qBAAsByE,KAAKpD,MAAMrB,YAC3D,gBAACqqB,EAAY,CACXrqB,UAAW,EAAW,2BAA4ByE,KAAKpD,MAAMipB,eAAgB,CAC3E,iBAAkCrmB,IAArBQ,KAAKpD,MAAMgD,QAE1BkmB,SAAU,SAAAC,GAAQ,OAAC,EAAKjC,MAAN,GAClBpkB,KAAMM,KAAKpD,MAAM8C,KACjBsmB,QAAShmB,KAAK+jB,aACdhe,YAAa/F,KAAKpD,MAAMmJ,YACxBkgB,UAAU,EACVjjB,KAAK,OACLpD,MAAOA,IAET,gBAAC,IAAY,CAACrE,UAAU,0BAA0B6R,KAAK,UACjC5N,IAArBQ,KAAKpD,MAAMgD,OACV,gBAAC,cAAW,CACVrE,UAAU,uCACV2qB,UAAW,CAAE7gB,KAAM,IACnBtJ,QAASiE,KAAKgkB,mBAGjBhkB,KAAK9D,MAAM+D,MACV,uBAAK1E,UAAU,uBACb,uBAAKA,UAAU,2BACb,gBAAC,aAAU,CAACA,UAAU,eAAeQ,QAASiE,KAAK2kB,0BACjD,gBAAC,IAAe,OAElB,uBAAKppB,UAAU,6BACb,gBAAC,IAAM,CACLA,UAAU,mCACV8B,SAAU2C,KAAKykB,yBACf3kB,QAASolB,EAAOroB,KAAI,SAAAspB,GAAS,MAAC,CAC5BtjB,MAAO,4BAAkBsjB,GACzBvmB,MAAOumB,MAETvmB,MAAOI,KAAK9D,MAAMgoB,aAAakC,aAEjC,gBAAC,IAAM,CACL7qB,UAAU,+CACV8B,SAAU2C,KAAK0kB,wBACf5kB,QAASqlB,EAAMtoB,KAAI,SAAAwpB,GAAQ,MAAC,CAAExjB,MAAO8K,OAAO0Y,GAAOzmB,MAAxB,MAC3BA,MAAOI,KAAK9D,MAAMgoB,aAAakB,iBAGnC,gBAAC,aAAU,CAAC7pB,UAAU,eAAeQ,QAASiE,KAAK4kB,sBACjD,gBAAC,IAAgB,QAGrB,gBAAChB,EAAS,CACR0C,eAAgB,gBAACC,EAAa,MAC9BC,aAAc,CAAExB,MAAK,EAAEyB,OAAQ1B,GAC/B2B,eAAgB,EAChBnC,UAAWA,EACX4B,MAAOnmB,KAAK9D,MAAMgoB,aAClByC,cAAe,gBAACJ,EAAa,MAC7BK,WAAY5mB,KAAKqkB,eACjBwC,gBAAiB7mB,KAAKwkB,oBACtBa,aAAcA,EACdI,aAAcA,EACdC,cAAeA,QAQ/B,EAzJA,CAAuC,iBA2JvC,SAASa,IACP,OAAO,K,MAST,IAAMX,EAAe,sBAAW,SAAC,GAAE,IAAAE,EAAA,EAAAA,SAAUvb,EAAA,EAAAA,KAAM3K,EAAA,EAAAA,MAAO,mCAClDknB,EACJlnB,GAAS2K,EAAKC,WAAW5K,EAAO,CAAEymB,KAAM,UAAWF,MAAO,QAAS7B,IAAK,YAC1E,OAAO,6BAAWhQ,EAAK,CAAEmN,IAAKqE,EAAUlmB,MAAOknB,GAAkB,U,oBC3OnE,IAAI9kB,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAInC,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBwC,GAFSN,EAAIC,EAASnC,GAEXmC,EAAQM,OAASN,EAAQM,OAAS,IAIjDH,EAAOI,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACN,EAAOC,EAAI,qpDAAspD,KAE/qDD,EAAOI,QAAUA,G,oBCNjB,IAAIR,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAInC,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBwC,GAFSN,EAAIC,EAASnC,GAEXmC,EAAQM,OAASN,EAAQM,OAAS,IAIjDH,EAAOI,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACN,EAAOC,EAAI,q0BAAs0B,KAE/1BD,EAAOI,QAAUA,G,iCCNjB,+DA4Bc,SAAUmhB,EAAsB,G,IAAE7jB,EAAA,EAAAA,QAE9C,OAAe,IAFwC,EAAAZ,QAEnCY,EAAU,EACrB,KAIP,uBAAKvE,UAAU,2BACb,uBAAKA,UAAU,iCACZ,qBAW6C,IAA7CwrB,UAAUC,UAAUC,QAAQ,YATvB,qDACA,sD,oBCxCd,IAAIjlB,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAInC,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBwC,GAFSN,EAAIC,EAASnC,GAEXmC,EAAQM,OAASN,EAAQM,OAAS,IAIjDH,EAAOI,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACN,EAAOC,EAAI,+/PAAogQ,KAE7hQD,EAAOI,QAAUA,G,iCCaX,SAAU0kB,IACd,OAAO,qCAA2BzqB,MAAK,SAAAwZ,GAAK,OAAAA,EAAA,WAGxC,SAAUkR,EAAkBhrB,EAAwBoD,GACxD,IAAM6nB,EAASjrB,EAAUG,IAAIiD,GAC7B,OAAK6nB,EAEmB,YAAb7nB,EACF6nB,EAAOthB,MAEP,OAAOvG,EAAQ,MAAM6nB,EAAOthB,MAJ5B,OAAOvG,EAQZ,SAAU8nB,EACdlrB,EACAoD,EACA+nB,QAAA,IAAAA,OAAA,GAEA,IAAMF,EAASjrB,EAAUC,WAAWmD,GACpC,OAGSgoB,EAHJH,EAGiB7nB,EAASioB,cAAa,MAAMJ,EAAOthB,MAFtCvG,EAASioB,cAEsC,QAASF,GAIvE,SAAUG,EACdtrB,EACAoD,EACA+nB,QAAA,IAAAA,OAAA,GAEA,IAAMF,EAASjrB,EAAUE,UAAUkD,GACnC,OAAOgoB,EAAUH,EAASA,EAAOthB,MAAQvG,EAAU,OAAQ+nB,GAGvD,SAAUI,EACdvrB,EACAoD,EACA+nB,QAAA,IAAAA,OAAA,GAEA,IAAMF,EAASjrB,EAAUI,oBAAoBgD,GAC7C,OAAK6nB,EAEmB,WAAb7nB,EACF6nB,EAAOthB,MAEPyhB,EAAUH,EAAOthB,MAAO,QAASwhB,GAJjCC,EAAUhoB,EAASioB,cAAe,QAASF,GAQtD,SAASC,EAAUzhB,EAAe6hB,EAAgBL,GAChD,OAAOA,EAAgBK,EAAM,IAAI7hB,EAAUA,EAxE7C,2K,iCCAA,2FAgCc,SAAUuG,EAAqBzP,GACnC,IAAArB,EAAA,EAAAA,UAAW0G,EAAA,EAAAA,QAASqK,EAAA,EAAAA,MAAOxG,EAAA,EAAAA,MAEnC,OACE,gBAAC,IAAW,CACVvK,UAAWA,EACXG,QACE,uBAAKH,UAAU,oCACZuK,GACC,uBAAKvK,UAAU,iBACb,8BAASuK,IAIZ7D,GAAW,yBAAIA,GAEfqK,GACC,gCACE,sBAAI/Q,UAAU,qCAEb+Q,EAAMzP,KAAI,SAAC,G,IAAEyM,EAAA,EAAAA,KAAMzG,EAAA,EAAAA,MAAY,OAC9B,uBAAKtH,UAAU,uBAAuB4D,IAAK0D,GACzC,qBACEtH,UAAU,4CACV+N,KAAMA,EACNse,IAAI,sBACJC,OAAO,UACN,mBAASve,IAAS,gBAAC,IAAU,CAACjE,KAAM,GAAI9J,UAAU,iBACnD,4BAAOsH,WAQpBjG,EAAMmN","file":"js/284.1601658702741.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return <Tooltip overlay={translate('quality_profiles.built_in.description')}>{badge}</Tooltip>;\n  }\n\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h3>{translate('filters')}</h3>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport MultipleSelectionHint from '../../../components/facet/MultipleSelectionHint';\nimport {\n  getStandards,\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../../helpers/security-standard';\nimport { Facet, formatFacetStat, Query, STANDARDS } from '../utils';\n\ninterface Props {\n  cwe: string[];\n  cweOpen: boolean;\n  cweStats: T.Dict<number> | undefined;\n  fetchingCwe: boolean;\n  fetchingOwaspTop10: boolean;\n  fetchingSansTop25: boolean;\n  fetchingSonarSourceSecurity: boolean;\n  loadSearchResultCount?: (property: string, changes: Partial<Query>) => Promise<Facet>;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  owaspTop10: string[];\n  owaspTop10Open: boolean;\n  owaspTop10Stats: T.Dict<number> | undefined;\n  query: Partial<Query>;\n  sansTop25: string[];\n  sansTop25Open: boolean;\n  sansTop25Stats: T.Dict<number> | undefined;\n  sonarsourceSecurity: string[];\n  sonarsourceSecurityOpen: boolean;\n  sonarsourceSecurityStats: T.Dict<number> | undefined;\n}\n\ninterface State {\n  standards: T.Standards;\n}\n\ntype StatsProp = 'owaspTop10Stats' | 'cweStats' | 'sansTop25Stats' | 'sonarsourceSecurityStats';\ntype ValuesProp = T.StandardType;\n\nexport default class StandardFacet extends React.PureComponent<Props, State> {\n  mounted = false;\n  property = STANDARDS;\n  state: State = {\n    standards: { owaspTop10: {}, sansTop25: {}, cwe: {}, sonarsourceSecurity: {} }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n\n    // load standards.json only if the facet is open, or there is a selected value\n    if (\n      this.props.open ||\n      this.props.owaspTop10.length > 0 ||\n      this.props.cwe.length > 0 ||\n      this.props.sansTop25.length > 0 ||\n      this.props.sonarsourceSecurity.length > 0\n    ) {\n      this.loadStandards();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.open && this.props.open) {\n      this.loadStandards();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStandards = () => {\n    getStandards().then(\n      ({ owaspTop10, sansTop25, cwe, sonarsourceSecurity }: T.Standards) => {\n        if (this.mounted) {\n          this.setState({ standards: { owaspTop10, sansTop25, cwe, sonarsourceSecurity } });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getValues = () => {\n    return [\n      ...this.props.sonarsourceSecurity.map(item =>\n        renderSonarSourceSecurityCategory(this.state.standards, item, true)\n      ),\n      ...this.props.owaspTop10.map(item =>\n        renderOwaspTop10Category(this.state.standards, item, true)\n      ),\n      ...this.props.sansTop25.map(item =>\n        renderSansTop25Category(this.state.standards, item, true)\n      ),\n      ...this.props.cwe.map(item => renderCWECategory(this.state.standards, item))\n    ];\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleOwaspTop10HeaderClick = () => {\n    this.props.onToggle('owaspTop10');\n  };\n\n  handleSansTop25HeaderClick = () => {\n    this.props.onToggle('sansTop25');\n  };\n\n  handleSonarSourceSecurityHeaderClick = () => {\n    this.props.onToggle('sonarsourceSecurity');\n  };\n\n  handleClear = () => {\n    this.props.onChange({\n      [this.property]: [],\n      owaspTop10: [],\n      sansTop25: [],\n      cwe: [],\n      sonarsourceSecurity: []\n    });\n  };\n\n  handleItemClick = (prop: ValuesProp, itemValue: string, multiple: boolean) => {\n    const items = this.props[prop];\n    if (multiple) {\n      const newValue = sortBy(\n        items.includes(itemValue) ? without(items, itemValue) : [...items, itemValue]\n      );\n      this.props.onChange({ [prop]: newValue });\n    } else {\n      this.props.onChange({\n        [prop]: items.includes(itemValue) && items.length < 2 ? [] : [itemValue]\n      });\n    }\n  };\n\n  handleOwaspTop10ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('owaspTop10', itemValue, multiple);\n  };\n\n  handleSansTop25ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sansTop25', itemValue, multiple);\n  };\n\n  handleSonarSourceSecurityItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sonarsourceSecurity', itemValue, multiple);\n  };\n\n  handleCWESearch = (query: string) => {\n    return Promise.resolve({\n      results: Object.keys(this.state.standards.cwe).filter(cwe =>\n        renderCWECategory(this.state.standards, cwe)\n          .toLowerCase()\n          .includes(query.toLowerCase())\n      )\n    });\n  };\n\n  loadCWESearchResultCount = (categories: string[]) => {\n    const { loadSearchResultCount } = this.props;\n    return loadSearchResultCount\n      ? loadSearchResultCount('cwe', { cwe: categories })\n      : Promise.resolve({});\n  };\n\n  renderList = (\n    statsProp: StatsProp,\n    valuesProp: ValuesProp,\n    renderName: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    const stats = this.props[statsProp];\n    const values = this.props[valuesProp];\n    if (!stats) {\n      return null;\n    }\n    const categories = sortBy(Object.keys(stats), key => -stats[key]);\n    return this.renderFacetItemsList(stats, values, categories, renderName, renderName, onClick);\n  };\n\n  // eslint-disable-next-line max-params\n  renderFacetItemsList = (\n    stats: any,\n    values: string[],\n    categories: string[],\n    renderName: (standards: T.Standards, category: string) => React.ReactNode,\n    renderTooltip: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    if (!categories.length) {\n      return (\n        <div className=\"search-navigator-facet-empty little-spacer-top\">\n          {translate('no_results')}\n        </div>\n      );\n    }\n\n    const getStat = (category: string) => {\n      return stats ? stats[category] : undefined;\n    };\n\n    return (\n      <FacetItemsList>\n        {categories.map(category => (\n          <FacetItem\n            active={values.includes(category)}\n            key={category}\n            name={renderName(this.state.standards, category)}\n            onClick={onClick}\n            stat={formatFacetStat(getStat(category))}\n            tooltip={renderTooltip(this.state.standards, category)}\n            value={category}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  };\n\n  renderHint = (statsProp: StatsProp, valuesProp: ValuesProp) => {\n    const stats = this.props[statsProp] || {};\n    const values = this.props[valuesProp];\n    return <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />;\n  };\n\n  renderOwaspTop10List() {\n    return this.renderList(\n      'owaspTop10Stats',\n      'owaspTop10',\n      renderOwaspTop10Category,\n      this.handleOwaspTop10ItemClick\n    );\n  }\n\n  renderOwaspTop10Hint() {\n    return this.renderHint('owaspTop10Stats', 'owaspTop10');\n  }\n\n  renderSansTop25List() {\n    return this.renderList(\n      'sansTop25Stats',\n      'sansTop25',\n      renderSansTop25Category,\n      this.handleSansTop25ItemClick\n    );\n  }\n\n  renderSansTop25Hint() {\n    return this.renderHint('sansTop25Stats', 'sansTop25');\n  }\n\n  renderSonarSourceSecurityList() {\n    return this.renderList(\n      'sonarsourceSecurityStats',\n      'sonarsourceSecurity',\n      renderSonarSourceSecurityCategory,\n      this.handleSonarSourceSecurityItemClick\n    );\n  }\n\n  renderSonarSourceSecurityHint() {\n    return this.renderHint('sonarsourceSecurityStats', 'sonarsourceSecurity');\n  }\n\n  renderSubFacets() {\n    return (\n      <>\n        <FacetBox className=\"is-inner\" property=\"sonarsourceSecurity\">\n          <FacetHeader\n            fetching={this.props.fetchingSonarSourceSecurity}\n            name={translate('issues.facet.sonarsourceSecurity')}\n            onClick={this.handleSonarSourceSecurityHeaderClick}\n            open={this.props.sonarsourceSecurityOpen}\n            values={this.props.sonarsourceSecurity.map(item =>\n              renderSonarSourceSecurityCategory(this.state.standards, item)\n            )}\n          />\n          {this.props.sonarsourceSecurityOpen && (\n            <>\n              {this.renderSonarSourceSecurityList()}\n              {this.renderSonarSourceSecurityHint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"owaspTop10\">\n          <FacetHeader\n            fetching={this.props.fetchingOwaspTop10}\n            name={translate('issues.facet.owaspTop10')}\n            onClick={this.handleOwaspTop10HeaderClick}\n            open={this.props.owaspTop10Open}\n            values={this.props.owaspTop10.map(item =>\n              renderOwaspTop10Category(this.state.standards, item)\n            )}\n          />\n          {this.props.owaspTop10Open && (\n            <>\n              {this.renderOwaspTop10List()}\n              {this.renderOwaspTop10Hint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"sansTop25\">\n          <FacetHeader\n            fetching={this.props.fetchingSansTop25}\n            name={translate('issues.facet.sansTop25')}\n            onClick={this.handleSansTop25HeaderClick}\n            open={this.props.sansTop25Open}\n            values={this.props.sansTop25.map(item =>\n              renderSansTop25Category(this.state.standards, item)\n            )}\n          />\n          {this.props.sansTop25Open && (\n            <>\n              {this.renderSansTop25List()}\n              {this.renderSansTop25Hint()}\n            </>\n          )}\n        </FacetBox>\n        <ListStyleFacet<string>\n          className=\"is-inner\"\n          facetHeader={translate('issues.facet.cwe')}\n          fetching={this.props.fetchingCwe}\n          getFacetItemText={item => renderCWECategory(this.state.standards, item)}\n          getSearchResultKey={item => item}\n          getSearchResultText={item => renderCWECategory(this.state.standards, item)}\n          loadSearchResultCount={this.loadCWESearchResultCount}\n          onChange={this.props.onChange}\n          onSearch={this.handleCWESearch}\n          onToggle={this.props.onToggle}\n          open={this.props.cweOpen}\n          property=\"cwe\"\n          query={omit(this.props.query, 'cwe')}\n          renderFacetItem={item => renderCWECategory(this.state.standards, item)}\n          renderSearchResult={(item, query) =>\n            highlightTerm(renderCWECategory(this.state.standards, item), query)\n          }\n          searchPlaceholder={translate('search.search_for_cwe')}\n          stats={this.props.cweStats}\n          values={this.props.cwe}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderSubFacets()}\n      </FacetBox>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".multiple-selection-hint{margin-top:8px;margin-bottom:8px;text-align:center}.multiple-selection-hint-inner{display:inline-block;height:24px;line-height:24px;border-radius:24px;background-color:#e6e6e6;text-align:center;padding:0 8px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: Props) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"js-page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: T.IssueType | T.RuleType;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, Profile } from '../../../api/quality-profiles';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { sortProfiles } from '../../quality-profiles/utils';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: Profile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  params: T.Dict<string>;\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: T.Dict<string> = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      organization: this.props.organization,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as T.RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className={classNames('modal-body', { 'modal-container': params.length > 0 })}>\n            {!isUpdateMode && activeInAllProfiles && (\n              <Alert variant=\"info\">{translate('coding_rules.active_in_all_profiles')}</Alert>\n            )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label title={param.key}>{param.key}</label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  <div\n                    className=\"note\"\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: sanitize(param.htmlDesc || '') }}\n                  />\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { bulkActivateRules, bulkDeactivateRules, Profile } from '../../../api/quality-profiles';\nimport { Query, serializeQuery } from '../query';\n\ninterface Props {\n  action: string;\n  languages: T.Languages;\n  onClose: () => void;\n  organization: string | undefined;\n  profile?: Profile;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper.then(() =>\n        method({\n          ...data,\n          organization: this.props.organization,\n          targetKey: profile\n        }).then(response => this.processResponse(profile, response))\n      );\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    const { languages } = this.props;\n    const language = languages[profile.language]\n      ? languages[profile.language].name\n      : profile.language;\n    return (\n      <Alert key={result.profile} variant={result.failed === 0 ? 'success' : 'warning'}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              language,\n              result.succeeded\n            )}\n      </Alert>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished && !this.state.submitting && (\n              <div className=\"modal-field\">\n                <h3>\n                  <label htmlFor=\"coding-rules-bulk-change-profile\">\n                    {action === 'activate'\n                      ? translate('coding_rules.activate_in')\n                      : translate('coding_rules.deactivate_in')}\n                  </label>\n                </h3>\n                {profile ? (\n                  <span>\n                    {profile.name}\n                    {'  '}\n                    {translate('are_you_sure')}\n                  </span>\n                ) : (\n                  this.renderProfileSelect()\n                )}\n              </div>\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { Query } from '../query';\nimport BulkChangeModal from './BulkChangeModal';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\n\ninterface Props {\n  languages: T.Languages;\n  organization: string | undefined;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user has at least one QP which he administrates\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return (\n        <Tooltip overlay={translate('coding_rules.can_not_bulk_change')}>\n          <Button className=\"js-bulk-change\" disabled={true}>\n            {translate('bulk_change')}\n          </Button>\n        </Tooltip>\n      );\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown\n          className=\"pull-left\"\n          overlayPlacement={PopupPlacement.BottomLeft}\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a href=\"#\" onClick={this.handleActivateClick}>\n                  {translate('coding_rules.activate_in')}\n                </a>\n              </li>\n              {allowActivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                    {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n              <li>\n                <a href=\"#\" onClick={this.handleDeactivateClick}>\n                  {translate('coding_rules.deactivate_in')}\n                </a>\n              </li>\n              {allowDeactivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                    {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n            </ul>\n          }>\n          <Button className=\"js-bulk-change\">{translate('bulk_change')}</Button>\n        </Dropdown>\n        {this.state.modal && this.state.action && (\n          <BulkChangeModal\n            action={this.state.action}\n            languages={this.props.languages}\n            onClose={this.closeModal}\n            organization={this.props.organization}\n            profile={this.state.profile}\n            query={this.props.query}\n            referencedProfiles={this.props.referencedProfiles}\n            total={this.props.total}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { orderBy, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey } from '../query';\n\nexport interface BasicProps {\n  onChange: (changes: T.Dict<string | string[] | undefined>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: T.Dict<number>;\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  children?: React.ReactNode;\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else if (multiple) {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    } else {\n      newValue = values.includes(itemValue) && values.length < 2 ? [] : [itemValue];\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName, renderTextName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        tooltip={renderTextName(value)}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => renderTextName(key).toLowerCase()\n        ));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{translate('coding_rules.facet', this.props.property)}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}>\n          {this.props.children}\n        </FacetHeader>\n\n        {this.props.open && items !== undefined && (\n          <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>\n        )}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { longFormatterOption } from 'sonar-ui-common/components/intl/DateFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { Query } from '../query';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nclass AvailableSinceFacet extends React.PureComponent<Props & InjectedIntlProps> {\n  handleHeaderClick = () => {\n    this.props.onToggle('availableSince');\n  };\n\n  handleClear = () => {\n    this.props.onChange({ availableSince: undefined });\n  };\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.props.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nexport default injectIntl(AvailableSinceFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: T.RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: T.RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={['NONE', 'INHERITED', 'OVERRIDES']}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport { BasicProps } from './Facet';\n\ninterface InstalledLanguage {\n  key: string;\n  name: string;\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  installedLanguages: InstalledLanguage[];\n}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const language = this.props.installedLanguages.find(l => l.key === languageKey);\n    return language ? language.name : languageKey;\n  };\n\n  handleSearch = (query: string) => {\n    const options = this.getAllPossibleOptions();\n    const results = options.filter(language =>\n      language.name.toLowerCase().includes(query.toLowerCase())\n    );\n    const paging = { pageIndex: 1, pageSize: results.length, total: results.length };\n    return Promise.resolve({ paging, results });\n  };\n\n  getAllPossibleOptions = () => {\n    const { installedLanguages, stats = {} } = this.props;\n\n    // add any language that presents in the facet, but might not be installed\n    // for such language we don't know their display name, so let's just use their key\n    // and make sure we reference each language only once\n    return uniqBy(\n      [...installedLanguages, ...Object.keys(stats).map(key => ({ key, name: key }))],\n      language => language.key\n    );\n  };\n\n  renderSearchResult = ({ name }: InstalledLanguage, term: string) => {\n    return highlightTerm(name, term);\n  };\n\n  render() {\n    return (\n      <ListStyleFacet<InstalledLanguage>\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.language.inactive')}\n        facetHeader={translate('coding_rules.facet.languages')}\n        fetching={false}\n        getFacetItemText={this.getLanguageName}\n        getSearchResultKey={language => language.key}\n        getSearchResultText={language => language.name}\n        minSearchLength={1}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"languages\"\n        renderFacetItem={this.getLanguageName}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_languages')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  installedLanguages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport DocumentationTooltip from '../../../components/common/DocumentationTooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey, Query } from '../query';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: T.Dict<Profile>;\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  getTooltip = (profile: Profile) => {\n    const base = `${profile.name} ${profile.languageName}`;\n    return profile.isBuiltIn ? `${base} (${translate('quality_profiles.built_in')})` : base;\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        tooltip={this.getTooltip(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}>\n          <DocumentationTooltip\n            className=\"spacer-left\"\n            content={translate('coding_rules.facet.qprofile.help')}\n            links={[\n              {\n                href: '/documentation/instance-administration/quality-profiles/',\n                label: translate('coding_rules.facet.qprofile.link')\n              }\n            ]}\n          />\n        </FacetHeader>\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport Facet, { BasicProps } from './Facet';\n\ninterface StateProps {\n  referencedLanguages: T.Dict<{ key: string; name: string }>;\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport { getRuleTags } from '../../../api/rules';\nimport { colors } from '../../../app/theme';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  organization: string | undefined;\n}\n\nexport default class TagFacet extends React.PureComponent<Props> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ organization: this.props.organization, ps: 50, q: query }).then(tags => ({\n      paging: { pageIndex: 1, pageSize: tags.length, total: tags.length },\n      results: tags\n    }));\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  getTagName = (tag: string) => {\n    return tag;\n  };\n\n  renderTag = (tag: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {tag}\n    </>\n  );\n\n  renderSearchResult = (tag: string, term: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {highlightTerm(tag, term)}\n    </>\n  );\n\n  render() {\n    return (\n      <ListStyleFacet<string>\n        facetHeader={translate('coding_rules.facet.tags')}\n        fetching={false}\n        getFacetItemText={this.getTagName}\n        getSearchResultKey={tag => tag}\n        getSearchResultText={tag => tag}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"tags\"\n        renderFacetItem={this.renderTag}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_tags')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={\n            <div className=\"big-padded-top big-padded-bottom\">\n              {translate('coding_rules.rule_template.help')}\n            </div>\n          }\n        />\n      </Facet>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport StandardFacet from '../../issues/sidebar/StandardFacet';\nimport { Facets, OpenFacets, Query } from '../query';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\n\ninterface Props {\n  facets?: Facets;\n  hideProfileFacet?: boolean;\n  onFacetToggle: (facet: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  organization: string | undefined;\n  organizationsEnabled?: boolean;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: Props) {\n  const languageDisabled = !props.hideProfileFacet && props.query.profile !== undefined;\n\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n  return (\n    <>\n      <LanguageFacet\n        disabled={languageDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.tags}\n        organization={props.organization}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        stats={props.facets && props.facets.repositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <StandardFacet\n        cwe={props.query.cwe}\n        cweOpen={!!props.openFacets.cwe}\n        cweStats={props.facets && props.facets.cwe}\n        fetchingCwe={false}\n        fetchingOwaspTop10={false}\n        fetchingSansTop25={false}\n        fetchingSonarSourceSecurity={false}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.standards}\n        owaspTop10={props.query.owaspTop10}\n        owaspTop10Open={!!props.openFacets.owaspTop10}\n        owaspTop10Stats={props.facets && props.facets.owaspTop10}\n        query={props.query}\n        sansTop25={props.query.sansTop25}\n        sansTop25Open={!!props.openFacets.sansTop25}\n        sansTop25Stats={props.facets && props.facets.sansTop25}\n        sonarsourceSecurity={props.query.sonarsourceSecurity}\n        sonarsourceSecurityOpen={!!props.openFacets.sonarsourceSecurity}\n        sonarsourceSecurityStats={props.facets && props.facets.sonarsourceSecurity}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      {!props.organizationsEnabled && (\n        <TemplateFacet\n          onChange={props.onFilterChange}\n          onToggle={props.onFacetToggle}\n          open={!!props.openFacets.template}\n          value={props.query.template}\n        />\n      )}\n      {!props.hideProfileFacet && (\n        <>\n          <ProfileFacet\n            activation={props.query.activation}\n            compareToProfile={props.query.compareToProfile}\n            languages={props.query.languages}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.profile}\n            referencedProfiles={props.referencedProfiles}\n            value={props.query.profile}\n          />\n          <InheritanceFacet\n            disabled={inheritanceDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.inheritance}\n            value={props.query.inheritance}\n          />\n          <ActivationSeverityFacet\n            disabled={activationSeverityDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.activationSeverities}\n            stats={props.facets && props.facets.activationSeverities}\n            values={props.query.activationSeverities}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReloadButton from 'sonar-ui-common/components/controls/ReloadButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport PageCounter from '../../../components/common/PageCounter';\n\ninterface Props {\n  loading: boolean;\n  onReload: () => void;\n  paging?: T.Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: Props) {\n  return (\n    <div className=\"pull-right\">\n      <Shortcuts />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction Shortcuts() {\n  return (\n    <span className=\"note big-spacer-right\">\n      <span className=\"big-spacer-right\">\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('coding_rules.to_select_rules')}\n      </span>\n\n      <span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('issues.to_navigate')}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { latinize } from 'sonar-ui-common/helpers/strings';\nimport { createRule, updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport { RULE_STATUSES, RULE_TYPES, SEVERITIES } from '../../../helpers/constants';\n\ninterface Props {\n  customRule?: T.RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: T.Dict<string>;\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: T.Dict<string> = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    const { customRule, organization, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      organization,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState(state => ({\n      name,\n      key: state.keyModifiedByUser ? state.key : latinize(name).replace(/[^A-Za-z0-9]/g, '_')\n    }));\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-name\">\n        {translate('name')} <em className=\"mandatory\">*</em>\n      </label>\n      <input\n        autoFocus={true}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-name\"\n        onChange={this.handleNameChange}\n        required={true}\n        type=\"text\"\n        value={this.state.name}\n      />\n    </div>\n  );\n\n  renderKeyField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-key\">\n        {translate('key')} {!this.props.customRule && <em className=\"mandatory\">*</em>}\n      </label>\n\n      {this.props.customRule ? (\n        <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n          {this.props.customRule.key}\n        </span>\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-key\"\n          onChange={this.handleKeyChange}\n          required={true}\n          type=\"text\"\n          value={this.state.key}\n        />\n      )}\n    </div>\n  );\n\n  renderDescriptionField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-html-description\">\n        {translate('description')} <em className=\"mandatory\">*</em>\n      </label>\n      <textarea\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-html-description\"\n        onChange={this.handleDescriptionChange}\n        required={true}\n        rows={5}\n        value={this.state.description}\n      />\n      <MarkdownTips className=\"modal-field-descriptor text-right\" />\n    </div>\n  );\n\n  renderTypeOption = ({ value }: { value: T.RuleType }) => {\n    return <TypeHelper type={value} />;\n  };\n\n  renderTypeField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-type\">{translate('type')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-type\"\n        onChange={this.handleTypeChange}\n        optionRenderer={this.renderTypeOption}\n        options={RULE_TYPES.map(type => ({\n          label: translate('issue.type', type),\n          value: type\n        }))}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={this.renderTypeOption}\n      />\n    </div>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-severity\">{translate('severity')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-severity\"\n        onChange={this.handleSeverityChange}\n        optionRenderer={this.renderSeverityOption}\n        options={SEVERITIES.map(severity => ({\n          label: translate('severity', severity),\n          value: severity\n        }))}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={this.renderSeverityOption}\n      />\n    </div>\n  );\n\n  renderStatusField = () => (\n    <div className=\"modal-field flex-1\">\n      <label htmlFor=\"coding-rules-custom-rule-status\">\n        {translate('coding_rules.filters.status')}\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-status\"\n        onChange={this.handleStatusChange}\n        options={RULE_STATUSES.map(status => ({\n          label: translate('rules.status', status),\n          value: status\n        }))}\n        searchable={false}\n        value={this.state.status}\n      />\n    </div>\n  );\n\n  renderParameterField = (param: T.RuleParameter) => (\n    <div className=\"modal-field\" key={param.key}>\n      <label className=\"capitalize\" htmlFor={param.key}>\n        {param.key}\n      </label>\n\n      {param.type === 'TEXT' ? (\n        <textarea\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          rows={3}\n          value={this.state.params[param.key] || ''}\n        />\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          type=\"text\"\n          value={this.state.params[param.key] || ''}\n        />\n      )}\n      <div\n        className=\"modal-field-description\"\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{ __html: sanitize(param.htmlDesc || '') }}\n      />\n    </div>\n  );\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = customRule\n      ? translate('coding_rules.update_custom_rule')\n      : translate('coding_rules.create_custom_rule');\n    let submit = this.props.customRule ? translate('save') : translate('create');\n    if (this.state.reactivating) {\n      submit = translate('coding_rules.reactivate');\n    }\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <Alert variant=\"warning\">{translate('coding_rules.reactivate.help')}</Alert>\n            )}\n\n            {this.renderNameField()}\n            {this.renderKeyField()}\n            <div className=\"display-flex-space-between\">\n              {/* do not allow to change the type of existing rule */}\n              {!customRule && this.renderTypeField()}\n              {this.renderSeverityField()}\n              {this.renderStatusField()}\n            </div>\n            {this.renderDescriptionField()}\n            {params.map(this.renderParameterField)}\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.submitting}>{submit}</SubmitButton>\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: T.RuleDetails;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: T.RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            organization={this.props.organization}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deleteRule, searchRules } from '../../../api/rules';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport CustomRuleButton from './CustomRuleButton';\n\ninterface Props {\n  canChange?: boolean;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: T.Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      organization: this.props.organization,\n      template_key: this.props.ruleDetails.key\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey, organization: this.props.organization }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: T.Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key, this.props.organization)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params\n            .filter(param => param.defaultValue)\n            .map(param => (\n              <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n                <span className=\"key\">{param.key}</span>\n                <span className=\"sep\">:&nbsp;</span>\n                <span className=\"value\" title={param.defaultValue}>\n                  {param.defaultValue}\n                </span>\n              </div>\n            ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton\n              onDone={this.handleRuleCreate}\n              organization={this.props.organization}\n              templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner className=\"spacer-left\" loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacet } from '../../../api/issues';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { getIssuesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  organization: string | undefined;\n  ruleDetails: Pick<T.RuleDetails, 'key' | 'type'>;\n}\n\ninterface Project {\n  count: number;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails !== this.props.ruleDetails) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIssues = () => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    this.setState({ loading: true });\n    getFacet(\n      {\n        resolved: 'false',\n        rules: key,\n        organization\n      },\n      'projects'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.key === item.val);\n            if (project) {\n              projects.push({ count: item.count, key: project.key, name: project.name });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl({ resolved: 'false', rules: key }, organization);\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.props.appState.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    const path = getIssuesUrl(\n      { resolved: 'false', rules: key, projects: project.key },\n      organization\n    );\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n\nexport default withAppState(RuleDetailsIssues);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  params: T.RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: T.RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        <p\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitize(param.htmlDesc || '') }}\n        />\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport ActivationFormModal from './ActivationFormModal';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: BaseProfile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            organization={this.props.organization}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../../app/theme';\n\ninterface Props {\n  className?: string;\n  inheritance: T.RuleInheritance;\n}\n\nexport default function RuleInheritanceIcon({ className, inheritance, ...other }: Props) {\n  const fill = inheritance === 'OVERRIDES' ? colors.red : colors.baseFontColor;\n\n  return (\n    <svg\n      className={className}\n      height={16}\n      version=\"1.1\"\n      viewBox=\"0 0 16 16\"\n      width={16}\n      xmlSpace=\"preserve\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      {...other}>\n      <path\n        d=\"M6.25 12.5a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm0-9a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm5 1a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm.75 0a1.5 1.5 0 0 1-.75 1.297c-.023 2.82-2.023 3.445-3.352 3.867-1.242.39-1.648.578-1.648 1.336v.203A1.5 1.5 0 1 1 4 12.5a1.5 1.5 0 0 1 .75-1.297V4.797A1.5 1.5 0 1 1 7 3.5a1.5 1.5 0 0 1-.75 1.297V8.68c.398-.196.82-.328 1.203-.446 1.453-.46 2.281-.804 2.297-2.437A1.5 1.5 0 1 1 12 4.5z\"\n        style={{ fill, fillRule: 'nonzero' }}\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { filter } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, deactivateRule, Profile } from '../../../api/quality-profiles';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\n\ninterface Props {\n  activations: T.RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  ruleDetails: T.RuleDetails;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props> {\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: T.RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(\n      profile.parentName,\n      profile.language,\n      this.props.organization\n    );\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === 'OVERRIDES' || activation.inherit === 'INHERITED') && (\n          <>\n            <RuleInheritanceIcon className=\"text-middle\" inheritance={activation.inherit} />\n            <Link className=\"link-base-color little-spacer-left text-middle\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper className=\"display-inline-flex-center\" severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined && activation.severity !== parentActivation.severity && (\n        <div className=\"coding-rules-detail-quality-profile-inheritance\">\n          {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n        </div>\n      )}\n    </td>\n  );\n\n  renderParameter = (\n    param: { key: string; value: string },\n    parentActivation?: T.RuleActivation\n  ) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">: </span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation && param.value !== originalValue && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: T.RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== 'NONE' && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === 'OVERRIDES' &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: T.RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language, this.props.organization)}>\n            {profile.name}\n          </Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            <InstanceMessage message={translate('coding_rules.quality_profiles')} />\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              organization={this.props.organization}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width-100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { deleteRule, getRuleDetails, updateRule } from '../../../api/rules';\nimport { Activation, Query } from '../query';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  hideQualityProfiles?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: T.RuleActivation[];\n  loading: boolean;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () => {\n    return getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey,\n      organization: this.props.organization\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleChange = (ruleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state =>\n      state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags } } : null\n    );\n    updateRule({\n      key: this.props.ruleKey,\n      organization: this.props.organization,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state =>\n          state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags: oldTags } } : null\n        );\n      }\n    });\n  };\n\n  handleActivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n  };\n\n  handleDeactivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (\n        selectedProfile &&\n        this.state.actives &&\n        !this.state.actives.find(active => active.qProfile === selectedProfile.key)\n      ) {\n        this.props.onDeactivate(selectedProfile.key, ruleKey);\n      }\n    });\n  };\n\n  handleDelete = () => {\n    return deleteRule({ key: this.props.ruleKey, organization: this.props.organization }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n  };\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const {\n      allowCustomRules,\n      canWrite,\n      hideQualityProfiles,\n      organization,\n      referencedProfiles\n    } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            organization={organization}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            organization={organization}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description display-flex-center\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                organization={organization}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <>\n                    <Button\n                      className=\"button-red spacer-left js-delete\"\n                      id=\"coding-rules-detail-rule-delete\"\n                      onClick={onClick}>\n                      {translate('delete')}\n                    </Button>\n                    <HelpTooltip\n                      className=\"spacer-left\"\n                      overlay={\n                        <div className=\"big-padded-top big-padded-bottom\">\n                          {translate('coding_rules.custom_rule.removal')}\n                        </div>\n                      }\n                    />\n                  </>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              organization={organization}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && !hideQualityProfiles && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              organization={organization}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && ruleDetails.type !== 'SECURITY_HOTSPOT' && (\n            <RuleDetailsIssues organization={organization} ruleDetails={ruleDetails} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deactivateRule, Profile } from '../../../api/quality-profiles';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Activation, Query } from '../query';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  activation?: Activation;\n  canWrite?: boolean;\n  isLoggedIn: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onOpen: (ruleKey: string) => void;\n  organization: string | undefined;\n  rule: T.Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        organization: this.props.organization,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(\n        () => this.props.onDeactivate(data.key, data.rule),\n        () => {}\n      );\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: 'NONE'\n      });\n    }\n    return Promise.resolve();\n  };\n\n  handleNameClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    // cmd(ctrl) + click should open a rule permalink in a new tab\n    const isLeftClickEvent = event.button === 0;\n    const isModifiedEvent = !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n    if (isModifiedEvent || !isLeftClickEvent) {\n      return;\n    }\n\n    event.preventDefault();\n    this.props.onOpen(this.props.rule.key);\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile && selectedProfile.parentName && (\n          <>\n            {activation.inherit === 'OVERRIDES' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.overrides',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n            {activation.inherit === 'INHERITED' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.inherits',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, isLoggedIn, rule, selectedProfile } = this.props;\n    if (!selectedProfile || !isLoggedIn) {\n      return null;\n    }\n\n    const canCopy = selectedProfile.actions && selectedProfile.actions.copy;\n    if (selectedProfile.isBuiltIn && canCopy) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          {this.renderDeactivateButton('', 'coding_rules.need_extend_or_copy')}\n        </td>\n      );\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {activation\n          ? this.renderDeactivateButton(activation.inherit)\n          : !rule.isTemplate && (\n              <ActivationButton\n                buttonText={translate('coding_rules.activate')}\n                className=\"coding-rules-detail-quality-profile-activate\"\n                modalHeader={translate('coding_rules.activate_in_quality_profile')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[selectedProfile]}\n                rule={rule}\n              />\n            )}\n      </td>\n    );\n  };\n\n  renderDeactivateButton = (\n    inherit: string,\n    overlayTranslationKey = 'coding_rules.can_not_deactivate'\n  ) => {\n    return inherit === 'NONE' ? (\n      <ConfirmButton\n        confirmButtonText={translate('yes')}\n        modalBody={translate('coding_rules.deactivate.confirm')}\n        modalHeader={translate('coding_rules.deactivate')}\n        onConfirm={this.handleDeactivate}>\n        {({ onClick }) => (\n          <Button\n            className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n            onClick={onClick}>\n            {translate('coding_rules.deactivate')}\n          </Button>\n        )}\n      </ConfirmButton>\n    ) : (\n      <Tooltip overlay={translate(overlayTranslationKey)}>\n        <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n          {translate('coding_rules.deactivate')}\n        </Button>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link\n                    className=\"link-no-underline\"\n                    onClick={this.handleNameClick}\n                    to={getRuleUrl(rule.key, this.props.organization)}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-error\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"display-inline-flex-center spacer-left note\">\n                    {rule.langName}\n                  </span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon query={rule.type} />\n                      <span className=\"little-spacer-left text-middle\">\n                        {translate('issue.type', rule.type)}\n                      </span>\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <TagsList\n                      allowUpdate={false}\n                      className=\"display-inline-flex-center note spacer-left\"\n                      tags={allTags}\n                    />\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport BackIcon from 'sonar-ui-common/components/icons/BackIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from 'sonar-ui-common/helpers/pages';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { Profile, searchQualityProfiles } from '../../../api/quality-profiles';\nimport { getRulesApp, searchRules } from '../../../api/rules';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport '../../../components/search-navigator.css';\nimport { hasPrivateAccess } from '../../../helpers/organizations';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\nimport {\n  getAppState,\n  getCurrentUser,\n  getLanguages,\n  getMyOrganizations,\n  Store\n} from '../../../store/rootReducer';\nimport {\n  shouldOpenSonarSourceSecurityFacet,\n  shouldOpenStandardsChildFacet,\n  shouldOpenStandardsFacet,\n  STANDARDS\n} from '../../issues/utils';\nimport {\n  Activation,\n  Actives,\n  areQueriesEqual,\n  FacetKey,\n  Facets,\n  getAppFacet,\n  getOpen,\n  getServerFacet,\n  hasRuleKey,\n  OpenFacets,\n  parseQuery,\n  Query,\n  serializeQuery,\n  shouldRequestFacet\n} from '../query';\nimport '../styles.css';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\n\nconst PAGE_SIZE = 100;\nconst LIMIT_BEFORE_LOAD_MORE = 5;\n\ninterface StateToProps {\n  appState: T.AppState;\n  currentUser: T.CurrentUser;\n  languages: T.Languages;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps extends WithRouterProps {\n  organization: T.Organization | undefined;\n}\n\ntype Props = OwnProps & StateToProps;\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: T.Rule;\n  paging?: T.Paging;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  rules: T.Rule[];\n  selected?: string;\n  usingPermalink?: boolean;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const query = parseQuery(props.location.query);\n    this.state = {\n      loading: true,\n      openFacets: {\n        languages: true,\n        owaspTop10: shouldOpenStandardsChildFacet({}, query, 'owaspTop10'),\n        sansTop25: shouldOpenStandardsChildFacet({}, query, 'sansTop25'),\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet({}, query),\n        standards: shouldOpenStandardsFacet({}, query),\n        types: true\n      },\n      query,\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addWhitePageClass();\n    addSideBarClass();\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this.setState(({ rules, selected }) => {\n      const openRule = this.getOpenRule(nextProps, rules);\n      return {\n        openRule,\n        usingPermalink: hasRuleKey(nextProps.location.query),\n        query: parseQuery(nextProps.location.query),\n        selected: openRule ? openRule.key : selected\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if he went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeWhitePageClass();\n    removeSideBarClass();\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.handleBack();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: T.Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () => {\n    const { openFacets } = this.state;\n    return Object.keys(openFacets)\n      .filter((facet: FacetKey) => openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n  };\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    organization: this.props.organization && this.props.organization.key,\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    const organization = this.props.organization && this.props.organization.key;\n    Promise.all([getRulesApp(organization), this.fetchQualityProfiles()]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: T.RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: T.RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const usingPermalink = hasRuleKey(this.props.location.query);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({\n          actives,\n          facets,\n          loading: false,\n          openRule,\n          paging,\n          rules,\n          selected,\n          usingPermalink\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              actives: { ...state.actives, ...actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  fetchQualityProfiles = () => {\n    const { currentUser, organization, userOrganizations } = this.props;\n    if (hasPrivateAccess(currentUser, organization, userOrganizations)) {\n      return searchQualityProfiles({ organization: organization && organization.key });\n    }\n    return { profiles: [] };\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules, loading, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined) {\n      if (\n        selectedIndex > rules.length - LIMIT_BEFORE_LOAD_MORE &&\n        !loading &&\n        paging &&\n        rules.length < paging.total\n      ) {\n        this.fetchMoreRules();\n      }\n      if (rules && selectedIndex < rules.length - 1) {\n        if (this.state.openRule) {\n          this.openRule(rules[selectedIndex + 1].key);\n        } else {\n          this.setState({ selected: rules[selectedIndex + 1].key });\n        }\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.props.router.replace(path);\n    } else {\n      this.props.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleRuleOpen = (ruleKey: string) => {\n    this.props.router.push(this.getRulePath(ruleKey));\n  };\n\n  handleBack = (event?: React.SyntheticEvent<HTMLAnchorElement>) => {\n    const { usingPermalink } = this.state;\n\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n\n    if (usingPermalink) {\n      this.handleReset();\n    } else {\n      this.closeRule();\n    }\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n    this.setState(({ openFacets }) => ({\n      openFacets: {\n        ...openFacets,\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet(openFacets, changes),\n        standards: shouldOpenStandardsFacet(openFacets, changes)\n      }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => {\n      const willOpenProperty = !state.openFacets[property];\n      const newState = {\n        loading: state.loading,\n        openFacets: { ...state.openFacets, [property]: willOpenProperty }\n      };\n\n      // Try to open sonarsource security \"subfacet\" by default if the standard facet is open\n      if (willOpenProperty && property === STANDARDS) {\n        newState.openFacets.sonarsourceSecurity = shouldOpenSonarSourceSecurityFacet(\n          newState.openFacets,\n          state.query\n        );\n        // Force loading of sonarsource security facet data\n        property = newState.openFacets.sonarsourceSecurity ? 'sonarsourceSecurity' : property;\n      }\n\n      if (shouldRequestFacet(property) && (!state.facets || !state.facets[property])) {\n        newState.loading = true;\n        this.fetchFacet(property);\n      }\n\n      return newState;\n    });\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.props.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: T.Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState(state => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        const newRule = { ...actives[rule] };\n        delete newRule[profile];\n        return { actives: { ...actives, [rule]: newRule } };\n      }\n      return null;\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  renderBulkButton = () => {\n    const { currentUser, languages } = this.props;\n    const { canWrite, paging, query, referencedProfiles } = this.state;\n    const organization = this.props.organization && this.props.organization.key;\n\n    if (!isLoggedIn(currentUser) || (isSonarCloud() && !organization) || !canWrite) {\n      return null;\n    }\n\n    return (\n      paging && (\n        <BulkChange\n          languages={languages}\n          organization={organization}\n          query={query}\n          referencedProfiles={referencedProfiles}\n          total={paging.total}\n        />\n      )\n    );\n  };\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    const organization = this.props.organization && this.props.organization.key;\n    const hideQualityProfiles = !hasPrivateAccess(\n      this.props.currentUser,\n      this.props.organization,\n      this.props.userOrganizations\n    );\n\n    return (\n      <>\n        <Suggestions suggestions=\"coding_rules\" />\n        <Helmet defer={false} title={translate('coding_rules.page')}>\n          <meta content=\"noindex\" name=\"robots\" />\n        </Helmet>\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <A11ySkipTarget\n                      anchor=\"rules_filters\"\n                      label={translate('coding_rules.skip_to_filters')}\n                      weight={10}\n                    />\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      hideProfileFacet={hideQualityProfiles}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      openFacets={this.state.openFacets}\n                      organization={organization}\n                      organizationsEnabled={this.props.appState.organizationsEnabled}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  <A11ySkipTarget anchor=\"rules_main\" />\n                  {this.state.openRule ? (\n                    <a\n                      className=\"js-back display-inline-flex-center link-no-underline\"\n                      href=\"#\"\n                      onClick={this.handleBack}>\n                      <BackIcon className=\"spacer-right\" />\n                      {this.state.usingPermalink\n                        ? translate('coding_rules.see_all')\n                        : translate('coding_rules.return_to_list')}\n                    </a>\n                  ) : (\n                    this.renderBulkButton()\n                  )}\n                  {!this.state.usingPermalink && (\n                    <PageActions\n                      loading={this.state.loading}\n                      onReload={this.handleReload}\n                      paging={paging}\n                      selectedIndex={selectedIndex}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={!this.props.appState.organizationsEnabled}\n                  canWrite={this.state.canWrite}\n                  hideQualityProfiles={hideQualityProfiles}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  organization={organization}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      canWrite={this.state.canWrite}\n                      isLoggedIn={isLoggedIn(this.props.currentUser)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      onOpen={this.handleRuleOpen}\n                      organization={organization}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: T.Dict<T.RuleActivation[]>) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: T.Dict<number> = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: getAppState(state),\n  currentUser: getCurrentUser(state),\n  languages: getLanguages(state),\n  userOrganizations: getMyOrganizations(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile,\n    organization\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile,\n    organization\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile, organization }).catch(\n    throwGlobalError\n  );\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile, organization }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    organization,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile, organization }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile, organization }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    organization,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport OpenCloseIcon from 'sonar-ui-common/components/icons/OpenCloseIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  fetching?: boolean;\n  helper?: string;\n  name: React.ReactNode;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return <HelpTooltip className=\"spacer-left\" overlay={this.props.helper} />;\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (!values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper display-flex-center\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        {this.props.children}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {this.props.fetching && (\n          <span className=\"little-spacer-right\">\n            <DeferredSpinner />\n          </span>\n        )}\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string, multiple?: boolean) => void;\n  stat?: React.ReactNode;\n  /** Textual version of `name` */\n  tooltip?: string;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false,\n    loading: false\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value, event.ctrlKey || event.metaKey);\n  };\n\n  renderValue() {\n    if (this.props.stat == null) {\n      return null;\n    }\n\n    return <span className=\"facet-stat\">{this.props.stat}</span>;\n  }\n\n  render() {\n    const { name } = this.props;\n    const className = classNames('search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value} title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </span>\n    ) : (\n      <a\n        className={className}\n        data-facet={this.props.value}\n        href=\"#\"\n        onClick={this.handleClick}\n        title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n  title?: string;\n}\n\nexport default function FacetItemsList({ children, title }: Props) {\n  return (\n    <div className=\"search-navigator-facet-list\">\n      {title && <div className=\"search-navigator-facet-list-title\">{title}</div>}\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  className?: string;\n  count: number;\n  showMore: () => void;\n  showLess: (() => void) | undefined;\n  total: number;\n}\n\nexport default class ListStyleFacetFooter extends React.PureComponent<Props> {\n  handleShowMoreClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.showMore();\n  };\n\n  handleShowLessClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.showLess) {\n      this.props.showLess();\n    }\n  };\n\n  render() {\n    const { count, total } = this.props;\n    const hasMore = total > count;\n    const allShown = Boolean(total && total === count);\n\n    return (\n      <footer className=\"note spacer-top spacer-bottom text-center\">\n        {translateWithParameters('x_show', formatMeasure(count, 'INT', null))}\n\n        {hasMore && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowMoreClick}>\n            {translate('show_more')}\n          </a>\n        )}\n\n        {this.props.showLess && allShown && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowLessClick}>\n            {translate('show_less')}\n          </a>\n        )}\n      </footer>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { queriesEqual } from 'sonar-ui-common/helpers/query';\nimport FacetBox from './FacetBox';\nimport FacetHeader from './FacetHeader';\nimport FacetItem from './FacetItem';\nimport FacetItemsList from './FacetItemsList';\nimport ListStyleFacetFooter from './ListStyleFacetFooter';\nimport MultipleSelectionHint from './MultipleSelectionHint';\n\ninterface SearchResponse<S> {\n  maxResults?: boolean;\n  results: S[];\n  paging?: T.Paging;\n}\n\nexport interface Props<S> {\n  className?: string;\n  disabled?: boolean;\n  disabledHelper?: string;\n  facetHeader: string;\n  fetching: boolean;\n  getFacetItemText: (item: string) => string;\n  getSearchResultKey: (result: S) => string;\n  getSearchResultText: (result: S) => string;\n  loadSearchResultCount?: (result: S[]) => Promise<T.Dict<number>>;\n  maxInitialItems: number;\n  maxItems: number;\n  minSearchLength: number;\n  onChange: (changes: T.Dict<string | string[]>) => void;\n  onClear?: () => void;\n  onItemClick?: (itemValue: string, multiple: boolean) => void;\n  onSearch: (query: string, page?: number) => Promise<SearchResponse<S>>;\n  onToggle: (property: string) => void;\n  open: boolean;\n  property: string;\n  query?: T.RawQuery;\n  renderFacetItem: (item: string) => React.ReactNode;\n  renderSearchResult: (result: S, query: string) => React.ReactNode;\n  searchPlaceholder: string;\n  getSortedItems?: () => string[];\n  stats: T.Dict<number> | undefined;\n  values: string[];\n}\n\ninterface State<S> {\n  autoFocus: boolean;\n  query: string;\n  searching: boolean;\n  searchMaxResults?: boolean;\n  searchPaging?: T.Paging;\n  searchResults?: S[];\n  searchResultsCounts: T.Dict<number>;\n  showFullList: boolean;\n}\n\nexport default class ListStyleFacet<S> extends React.Component<Props<S>, State<S>> {\n  mounted = false;\n\n  static defaultProps = {\n    maxInitialItems: 15,\n    maxItems: 100,\n    minSearchLength: 2\n  };\n\n  state: State<S> = {\n    autoFocus: false,\n    query: '',\n    searching: false,\n    searchResultsCounts: {},\n    showFullList: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps: Props<S>) {\n    if (!prevProps.open && this.props.open) {\n      // focus search field *only* if it was manually open\n      this.setState({ autoFocus: true });\n    } else if (\n      (prevProps.open && !this.props.open) ||\n      !queriesEqual(prevProps.query || {}, this.props.query || {})\n    ) {\n      // reset state when closing the facet, or when query changes\n      this.setState({\n        query: '',\n        searchMaxResults: undefined,\n        searchResults: undefined,\n        searching: false,\n        searchResultsCounts: {},\n        showFullList: false\n      });\n    } else if (\n      prevProps.stats !== this.props.stats &&\n      Object.keys(this.props.stats || {}).length < this.props.maxInitialItems\n    ) {\n      // show limited list if `stats` changed and there are less than 15 items\n      this.setState({ showFullList: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    if (this.props.onItemClick) {\n      this.props.onItemClick(itemValue, multiple);\n    } else {\n      const { values } = this.props;\n      if (multiple) {\n        const newValue = sortBy(\n          values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n        );\n        this.props.onChange({ [this.props.property]: newValue });\n      } else {\n        this.props.onChange({\n          [this.props.property]: values.includes(itemValue) && values.length < 2 ? [] : [itemValue]\n        });\n      }\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.props.property);\n  };\n\n  handleClear = () => {\n    if (this.props.onClear) {\n      this.props.onClear();\n    } else {\n      this.props.onChange({ [this.props.property]: [] });\n    }\n  };\n\n  stopSearching = () => {\n    if (this.mounted) {\n      this.setState({ searching: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length >= this.props.minSearchLength) {\n      this.setState({ query, searching: true });\n      this.props\n        .onSearch(query)\n        .then(this.loadCountsForSearchResults)\n        .then(({ maxResults, paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchMaxResults: maxResults,\n              searchResults: results,\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    } else {\n      this.setState({ query, searching: false, searchResults: [] });\n    }\n  };\n\n  searchMore = () => {\n    const { query, searchPaging, searchResults } = this.state;\n    if (query && searchResults && searchPaging) {\n      this.setState({ searching: true });\n      this.props\n        .onSearch(query, searchPaging.pageIndex + 1)\n        .then(this.loadCountsForSearchResults)\n        .then(({ paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchResults: [...searchResults, ...results],\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    }\n  };\n\n  loadCountsForSearchResults = (response: SearchResponse<S>) => {\n    const { loadSearchResultCount = () => Promise.resolve({}) } = this.props;\n    const resultsToLoad = response.results.filter(result => {\n      const key = this.props.getSearchResultKey(result);\n      return this.getStat(key) === undefined && this.state.searchResultsCounts[key] === undefined;\n    });\n    if (resultsToLoad.length > 0) {\n      return loadSearchResultCount(resultsToLoad).then(stats => ({ ...response, stats }));\n    } else {\n      return { ...response, stats: {} };\n    }\n  };\n\n  getStat(item: string) {\n    const { stats } = this.props;\n    return stats && stats[item] !== undefined ? stats && stats[item] : undefined;\n  }\n\n  showFullList = () => {\n    this.setState({ showFullList: true });\n  };\n\n  hideFullList = () => {\n    this.setState({ showFullList: false });\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const sortedItems = this.props.getSortedItems\n      ? this.props.getSortedItems()\n      : sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => this.props.getFacetItemText(key)\n        );\n\n    const limitedList = this.state.showFullList\n      ? sortedItems\n      : sortedItems.slice(0, this.props.maxInitialItems);\n\n    // make sure all selected items are displayed\n    const selectedBelowLimit = this.state.showFullList\n      ? []\n      : sortedItems\n          .slice(this.props.maxInitialItems)\n          .filter(item => this.props.values.includes(item));\n\n    const mightHaveMoreResults = sortedItems.length >= this.props.maxItems;\n\n    return (\n      <>\n        <FacetItemsList>\n          {limitedList.map(item => (\n            <FacetItem\n              active={this.props.values.includes(item)}\n              key={item}\n              name={this.props.renderFacetItem(item)}\n              onClick={this.handleItemClick}\n              stat={formatFacetStat(this.getStat(item))}\n              tooltip={this.props.getFacetItemText(item)}\n              value={item}\n            />\n          ))}\n        </FacetItemsList>\n        {selectedBelowLimit.length > 0 && (\n          <>\n            <div className=\"note spacer-bottom text-center\"></div>\n            <FacetItemsList>\n              {selectedBelowLimit.map(item => (\n                <FacetItem\n                  active={true}\n                  key={item}\n                  name={this.props.renderFacetItem(item)}\n                  onClick={this.handleItemClick}\n                  stat={formatFacetStat(this.getStat(item))}\n                  tooltip={this.props.getFacetItemText(item)}\n                  value={item}\n                />\n              ))}\n            </FacetItemsList>\n          </>\n        )}\n        <ListStyleFacetFooter\n          count={limitedList.length + selectedBelowLimit.length}\n          showLess={this.state.showFullList ? this.hideFullList : undefined}\n          showMore={this.showFullList}\n          total={sortedItems.length}\n        />\n        {mightHaveMoreResults && this.state.showFullList && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n      </>\n    );\n  }\n\n  renderSearch() {\n    if (!this.props.stats || !Object.keys(this.props.stats).length) {\n      return null;\n    }\n\n    return (\n      <SearchBox\n        autoFocus={this.state.autoFocus}\n        className=\"little-spacer-top spacer-bottom\"\n        loading={this.state.searching}\n        minLength={this.props.minSearchLength}\n        onChange={this.search}\n        placeholder={this.props.searchPlaceholder}\n        value={this.state.query}\n      />\n    );\n  }\n\n  renderSearchResults() {\n    const { searching, searchMaxResults, searchResults, searchPaging } = this.state;\n\n    if (!searching && (!searchResults || !searchResults.length)) {\n      return <div className=\"note spacer-bottom\">{translate('no_results')}</div>;\n    }\n\n    if (!searchResults) {\n      // initial search\n      return null;\n    }\n\n    return (\n      <>\n        <FacetItemsList>\n          {searchResults.map(result => this.renderSearchResult(result))}\n        </FacetItemsList>\n        {searchMaxResults && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n        {searchPaging && (\n          <ListFooter\n            className=\"spacer-bottom\"\n            count={searchResults.length}\n            loadMore={this.searchMore}\n            ready={!searching}\n            total={searchPaging.total}\n          />\n        )}\n      </>\n    );\n  }\n\n  renderSearchResult(result: S) {\n    const key = this.props.getSearchResultKey(result);\n    const active = this.props.values.includes(key);\n    const stat = this.getStat(key) || this.state.searchResultsCounts[key];\n    const disabled = !active && stat === 0;\n    return (\n      <FacetItem\n        active={active}\n        disabled={disabled}\n        key={key}\n        name={this.props.renderSearchResult(result, this.state.query)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat)}\n        tooltip={this.props.getSearchResultText(result)}\n        value={key}\n      />\n    );\n  }\n\n  render() {\n    const { disabled, stats = {} } = this.props;\n    const { query, searching, searchResults } = this.state;\n    const values = this.props.values.map(item => this.props.getFacetItemText(item));\n    const loadingResults =\n      query !== '' && searching && (searchResults === undefined || searchResults.length === 0);\n    const showList = !query || loadingResults;\n    return (\n      <FacetBox\n        className={classNames(this.props.className, {\n          'search-navigator-facet-box-forbidden': disabled\n        })}\n        property={this.props.property}>\n        <FacetHeader\n          fetching={this.props.fetching}\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{this.props.facetHeader}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}\n        />\n\n        {this.props.open && !disabled && (\n          <>\n            {this.renderSearch()}\n            {showList ? this.renderList() : this.renderSearchResults()}\n            <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />\n          </>\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nfunction formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as addMonths from 'date-fns/add_months';\nimport * as setMonth from 'date-fns/set_month';\nimport * as setYear from 'date-fns/set_year';\nimport * as subMonths from 'date-fns/sub_months';\nimport { range } from 'lodash';\nimport * as React from 'react';\nimport { DayModifiers, Modifier, Modifiers } from 'react-day-picker';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { ButtonIcon, ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport CalendarIcon from 'sonar-ui-common/components/icons/CalendarIcon';\nimport ChevronLeftIcon from 'sonar-ui-common/components/icons/ChevronLeftIcon';\nimport ChevronRightIcon from 'sonar-ui-common/components/icons/ChevronRightIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport {\n  getShortMonthName,\n  getShortWeekDayName,\n  getWeekDayName\n} from 'sonar-ui-common/helpers/l10n';\nimport './DayPicker.css';\nimport './styles.css';\n\nconst DayPicker = lazyLoadComponent(() => import('react-day-picker'), 'DayPicker');\n\ninterface Props {\n  className?: string;\n  currentMonth?: Date;\n  highlightFrom?: Date;\n  highlightTo?: Date;\n  inputClassName?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  name?: string;\n  onChange: (date: Date | undefined) => void;\n  placeholder: string;\n  value?: Date;\n}\n\ninterface State {\n  currentMonth: Date;\n  open: boolean;\n  lastHovered?: Date;\n}\n\ntype Week = [string, string, string, string, string, string, string];\n\nexport default class DateInput extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { currentMonth: props.value || props.currentMonth || new Date(), open: false };\n  }\n\n  focus = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n    this.openCalendar();\n  };\n\n  handleResetClick = () => {\n    this.closeCalendar();\n    this.props.onChange(undefined);\n  };\n\n  openCalendar = () => {\n    this.setState({\n      currentMonth: this.props.value || this.props.currentMonth || new Date(),\n      lastHovered: undefined,\n      open: true\n    });\n  };\n\n  closeCalendar = () => {\n    this.setState({ open: false });\n  };\n\n  handleDayClick = (day: Date, modifiers: DayModifiers) => {\n    if (!modifiers.disabled) {\n      this.closeCalendar();\n      this.props.onChange(day);\n    }\n  };\n\n  handleDayMouseEnter = (day: Date, modifiers: DayModifiers) => {\n    this.setState({ lastHovered: modifiers.disabled ? undefined : day });\n  };\n\n  handleCurrentMonthChange = ({ value }: { value: number }) => {\n    this.setState((state: State) => ({ currentMonth: setMonth(state.currentMonth, value) }));\n  };\n\n  handleCurrentYearChange = ({ value }: { value: number }) => {\n    this.setState(state => ({ currentMonth: setYear(state.currentMonth, value) }));\n  };\n\n  handlePreviousMonthClick = () => {\n    this.setState(state => ({ currentMonth: subMonths(state.currentMonth, 1) }));\n  };\n\n  handleNextMonthClick = () => {\n    this.setState(state => ({ currentMonth: addMonths(state.currentMonth, 1) }));\n  };\n\n  render() {\n    const { highlightFrom, highlightTo, minDate, value } = this.props;\n    const { lastHovered } = this.state;\n\n    const after = this.props.maxDate || new Date();\n\n    const months = range(12);\n    const years = range(new Date().getFullYear() - 10, new Date().getFullYear() + 1);\n\n    const selectedDays: Modifier[] = value ? [value] : [];\n    let modifiers: Partial<Modifiers> | undefined;\n    const lastHoveredOrValue = lastHovered || value;\n\n    if (highlightFrom && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: highlightFrom, to: lastHoveredOrValue } };\n      selectedDays.push(highlightFrom);\n    }\n    if (highlightTo && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: lastHoveredOrValue, to: highlightTo } };\n      selectedDays.push(highlightTo);\n    }\n\n    const weekdaysLong = range(7).map(getWeekDayName) as Week;\n    const weekdaysShort = range(7).map(getShortWeekDayName) as Week;\n\n    return (\n      <OutsideClickHandler onClickOutside={this.closeCalendar}>\n        <span className={classNames('date-input-control', this.props.className)}>\n          <InputWrapper\n            className={classNames('date-input-control-input', this.props.inputClassName, {\n              'is-filled': this.props.value !== undefined\n            })}\n            innerRef={node => (this.input = node)}\n            name={this.props.name}\n            onFocus={this.openCalendar}\n            placeholder={this.props.placeholder}\n            readOnly={true}\n            type=\"text\"\n            value={value}\n          />\n          <CalendarIcon className=\"date-input-control-icon\" fill=\"\" />\n          {this.props.value !== undefined && (\n            <ClearButton\n              className=\"button-tiny date-input-control-reset\"\n              iconProps={{ size: 12 }}\n              onClick={this.handleResetClick}\n            />\n          )}\n          {this.state.open && (\n            <div className=\"date-input-calendar\">\n              <nav className=\"date-input-calendar-nav\">\n                <ButtonIcon className=\"button-small\" onClick={this.handlePreviousMonthClick}>\n                  <ChevronLeftIcon />\n                </ButtonIcon>\n                <div className=\"date-input-calender-month\">\n                  <Select\n                    className=\"date-input-calender-month-select\"\n                    onChange={this.handleCurrentMonthChange}\n                    options={months.map(month => ({\n                      label: getShortMonthName(month),\n                      value: month\n                    }))}\n                    value={this.state.currentMonth.getMonth()}\n                  />\n                  <Select\n                    className=\"date-input-calender-month-select spacer-left\"\n                    onChange={this.handleCurrentYearChange}\n                    options={years.map(year => ({ label: String(year), value: year }))}\n                    value={this.state.currentMonth.getFullYear()}\n                  />\n                </div>\n                <ButtonIcon className=\"button-small\" onClick={this.handleNextMonthClick}>\n                  <ChevronRightIcon />\n                </ButtonIcon>\n              </nav>\n              <DayPicker\n                captionElement={<NullComponent />}\n                disabledDays={{ after, before: minDate }}\n                firstDayOfWeek={1}\n                modifiers={modifiers}\n                month={this.state.currentMonth}\n                navbarElement={<NullComponent />}\n                onDayClick={this.handleDayClick}\n                onDayMouseEnter={this.handleDayMouseEnter}\n                selectedDays={selectedDays}\n                weekdaysLong={weekdaysLong}\n                weekdaysShort={weekdaysShort}\n              />\n            </div>\n          )}\n        </span>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nfunction NullComponent() {\n  return null;\n}\n\ntype InputWrapperProps = T.Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value'> &\n  InjectedIntlProps & {\n    innerRef: React.Ref<HTMLInputElement>;\n    value: Date | undefined;\n  };\n\nconst InputWrapper = injectIntl(({ innerRef, intl, value, ...other }: InputWrapperProps) => {\n  const formattedValue =\n    value && intl.formatDate(value, { year: 'numeric', month: 'short', day: 'numeric' });\n  return <input {...other} ref={innerRef} value={formattedValue || ''} />;\n});\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport './MultipleSelectionHint.css';\n\ninterface Props {\n  options: number;\n  values: number;\n}\n\nexport default function MultipleSelectionHint({ options, values }: Props) {\n  // do not render if nothing is selected or there are less than 2 possible options\n  if (values === 0 || options < 2) {\n    return null;\n  }\n\n  return (\n    <div className=\"multiple-selection-hint\">\n      <div className=\"multiple-selection-hint-inner\">\n        {translate(\n          isOnMac()\n            ? 'shortcuts.section.global.facets.multiselection.mac'\n            : 'shortcuts.section.global.facets.multiselection'\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction isOnMac() {\n  return navigator.userAgent.indexOf('Mac OS X') !== -1;\n}\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #f1e8cb}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#777}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#777}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#444}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#777}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#777;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#777;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#444}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#777}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#444;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#444}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#444;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport DetachIcon from 'sonar-ui-common/components/icons/DetachIcon';\nimport { isWebUri } from 'valid-url';\n\nexport interface DocumentationTooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  content?: React.ReactNode;\n  links?: Array<{ href: string; label: string }>;\n  title?: string;\n}\n\nexport default function DocumentationTooltip(props: DocumentationTooltipProps) {\n  const { className, content, links, title } = props;\n\n  return (\n    <HelpTooltip\n      className={className}\n      overlay={\n        <div className=\"big-padded-top big-padded-bottom\">\n          {title && (\n            <div className=\"spacer-bottom\">\n              <strong>{title}</strong>\n            </div>\n          )}\n\n          {content && <p>{content}</p>}\n\n          {links && (\n            <>\n              <hr className=\"big-spacer-top big-spacer-bottom\" />\n\n              {links.map(({ href, label }) => (\n                <div className=\"little-spacer-bottom\" key={label}>\n                  <a\n                    className=\"display-inline-flex-center link-with-icon\"\n                    href={href}\n                    rel=\"noopener noreferrer\"\n                    target=\"_blank\">\n                    {isWebUri(href) && <DetachIcon size={14} className=\"spacer-right\" />}\n                    <span>{label}</span>\n                  </a>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      }>\n      {props.children}\n    </HelpTooltip>\n  );\n}\n"],"sourceRoot":""}